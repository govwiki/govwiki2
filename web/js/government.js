webpackJsonp([2],[function(t,e,n){(function(t){function e(){var e=window.sessionStorage.getItem("open");e&&(t(".tab_issues").click(),m.modal("show"),window.sessionStorage.removeItem("open"))}function i(){var e=t(".editable");e.editable({stylesheets:!1,type:"textarea",showbuttons:"bottom",display:!0,emptytext:" "}),e.off("click"),e.on("save",function(e,n){var i,r=t(this).closest("tr").data("id"),a=this.dataset.field;i={editRequest:{entityName:"Issue",entityId:r,changes:{}}},i.editRequest.changes[a]=n.newValue,i.editRequest=JSON.stringify(i.editRequest),t.ajax(window.gw.urls.edit_request,{method:"POST",data:i,dataType:"text/json",success:function(t){console.log(t.responseText)},error:function(e){401===e.status&&t("#modal-window").modal("show")}})})}var r,a,o,s,u,l,c,h,f,p,d,v=JSON.parse(window.gw.government),m=t("#addIssue"),g=window.gw.authorized,y=n(15),_=n(28),b=(new(n(36))({year:JSON.parse(window.gw.government).currentYear}),t("#comment-text")),x=t("#comment-edit"),w=t("#articles-content");n(27),d=n(38),p=n(43),f=n(44),h=n(47),_.init(function(){_.forceInit()}),c={firstStep:{completed:!0,data:{},complete:function(){this.completed=!0,s.unlock(),c.firstStep.completed&&c.secondStep.completed&&(c.thirdStep.completed&&c.thirdOneStep.completed||l.loadComparedData("Financial Statement","Revenues",!0),l.unlock(),u.unlock())},incomplete:function(){this.completed=!1,s.lock(),u.lock(),l.lock()}},secondStep:{completed:!1,data:{},complete:function(){this.completed=!0,c.firstStep.completed&&c.secondStep.completed&&(c.thirdStep.completed&&c.thirdOneStep.completed||l.loadComparedData("Financial Statement","Revenues",!0),l.unlock(),u.unlock())},incomplete:function(){this.completed=!1,l.lock(),u.lock()}},thirdStep:{completed:!1,data:{},complete:function(){this.completed=!1},incomplete:function(){this.completed=!0}},thirdOneStep:{completed:!1,data:{},complete:function(){this.completed=!1},incomplete:function(){this.completed=!0}}},o=new d(c,".first-condition"),o.unlock(),s=new p(c,".second-condition"),s.lock(),u=new f(c,".government-categories .caption"),u.lock(),l=new h(c,".government-categories .category"),l.lock(),t("#fin-stmt-year").change(function(){var e=t(this);e.closest("form").submit(),window.localStorage.setItem("tab","Financial_Statements")}),a=window.localStorage.getItem("tab"),a&&(window.localStorage.removeItem("tab"),t('.nav-pills a[href="'+a+'"]').tab("show")),r=t("#subscribe"),r.hasClass("subscribe")?t("#chat_message_container").hide():t("#chat_message_container").show(),r.click(function(e){e.preventDefault(),e.stopPropagation(),t.ajax({url:r.attr("href")}).done(function(){r.hasClass("subscribe")?(t("#chat_message_container").show(),r.text("Unsubscribe").removeClass("subscribe").removeClass("btn-success").addClass("unsubscribe").addClass("btn-danger")):(t("#chat_message_container").hide(),r.text("Subscribe").removeClass("unsubscribe").removeClass("btn-danger").addClass("subscribe").addClass("btn-success"))})}),t("#year-selector").change(function(){var e=t(this).find(":selected").val(),n=t(".tab-titles").find("li.active").find("a").attr("href");window.location.search="?year="+e,window.localStorage.setItem("tab",n)}),t(document).on("click",".paginate .pagination a",function(e){var n,r,a,o,s;e.preventDefault(),e.stopPropagation(),s=t(this),o=s.closest(".tab-pane"),a=s.attr("href"),r=o.find(".tab-pane-main"),r.html(""),n=o.find(".loader"),n.show(),t.ajax(a).success(function(t){n.hide(),r.html(t),i()})}),t(document).on("click",".paginate .sortable a",function(e){var n,r,a,o,s;e.preventDefault(),e.stopPropagation(),a=t(this),o=a.closest(".tab-pane"),s=a.attr("href"),r=o.find(".tab-pane-main"),r.html(""),n=o.find(".loader"),n.show(),t.ajax(s).success(function(t){n.hide(),r.html(t),i()})}),t(document).on("click",".add",function(){g?m.modal("show"):(t("#modal-window").modal("show"),window.sessionStorage.setItem("open","issue"))}),m.find('[data-provide="datepicker"]').on("changeDate",function(){return t(this).datepicker("hide")}),m.on("hidden.bs.modal",function(){m.find("form")[0].reset()}),m.find("form").submit(function(e){var n=new FormData(this);e.preventDefault(),t.ajax({url:this.getAttribute("action"),processData:!1,contentType:!1,method:"post",data:n}).done(function(e){var n=y.compile(t("#issue-row").html());t("#issues tbody tr:last-child").before(n(JSON.parse(e))),m.modal("hide")}).fail(function(t){alert(JSON.parse(t.responseText))})}),e(),t("#comment-text-edit").click(function(){b.hide(),x.show()}),t("#comment-edit-revert").click(function(){window.CKEDITOR.instances.form_comment.setData(document.getElementById("comment-text-value").innerHTML),b.show(),x.hide()}),t("#comment-edit-save").click(function(e){var n,i=t(".analysis-loader"),r=window.CKEDITOR.instances.form_comment.getData();e.preventDefault(),i.show(),b.hide(),x.hide(),n={editRequest:{entityName:"Government",entityId:v.id,changes:{comment:r}}},n.editRequest=JSON.stringify(n.editRequest),t.ajax({url:this.getAttribute("href"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n}).done(function(){alert("Changes saved."),document.getElementById("comment-text-value").innerHTML=r,b.show()}).error(function(e){var n=JSON.parse(e.responseText);"Already edited."===n.errors[0]&&(b.show(),t("#comment-text-edit").remove(),t("#comment-text-value").append('<p class="text-info text-center">Unapproved Changes Pending Approval</p>')),alert(n.errors[0])}).always(function(){i.hide()})}),w.on("click",".edit",function(e){e.preventDefault(),e.stopPropagation(),void 0===e.currentTarget.dataset.noEditable&&(g?t(e.currentTarget).siblings(".editable").editable("toggle"):(t("#modal-window").modal("show"),window.sessionStorage.setItem("tableType","Issues"),window.sessionStorage.setItem("dataId",t(e.currentTarget).closest("tr").data("id")),window.sessionStorage.setItem("field",Number(t(e.currentTarget).closest("td")[0].cellIndex)+1)))}),i()}).call(e,n(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){(function(t,e){/*! X-editable - v1.5.1 
	* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
	* http://github.com/vitalets/x-editable
	* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
!function(t){"use strict";var e=function(e,n){this.options=t.extend({},t.fn.editableform.defaults,n),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(t.fn.editableform.buttons),"bottom"===this.options.showbuttons&&e.addClass("editable-buttons-bottom")},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var e=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(e),this.$form.submit(t.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var n,i=this.$form.find(".control-group"),r=this.$form.find(".editable-error-block");if(e===!1)i.removeClass(t.fn.editableform.errorGroupClass),r.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){n=(""+e).split("\n");for(var a=0;a<n.length;a++)n[a]=t("<div>").text(n[a]).html();e=n.join("<br>")}i.addClass(t.fn.editableform.errorGroupClass),r.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var n=this.input.input2value(),i=this.validate(n);if("object"===t.type(i)&&void 0!==i.newValue){if(n=i.newValue,this.input.value2input(n),"string"==typeof i.msg)return this.error(i.msg),void this.showForm()}else if(i)return this.error(i),void this.showForm();if(!this.options.savenochange&&this.input.value2str(n)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var r=this.input.value2submit(n);this.isSaving=!0,t.when(this.save(r)).done(t.proxy(function(t){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,n):null;return e===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof e?(this.error(e),void this.showForm()):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(n=e.newValue),this.error(!1),this.value=n,void this.$div.triggerHandler("save",{newValue:n,submitValue:r,response:t}))},this)).fail(t.proxy(function(t){this.isSaving=!1;var e;e="function"==typeof this.options.error?this.options.error.call(this.options.scope,t,n):"string"==typeof t?t:t.responseText||t.statusText||"Unknown error!",this.error(e),this.showForm()},this))},save:function(e){this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var n,i="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,r=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==i&&void 0!==i));return r?(this.showLoading(),n={name:this.options.name||"",value:e,pk:i},"function"==typeof this.options.params?n=this.options.params.call(this.options.scope,n):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(n,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,n):t.ajax(t.extend({url:this.options.url,data:n,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){e?this.value=this.input.str2value(t):this.value=t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(n){var i=arguments;return this.each(function(){var r=t(this),a=r.data("editableform"),o="object"==typeof n&&n;a||r.data("editableform",a=new e(this,o)),"string"==typeof n&&a[n].apply(a,Array.prototype.slice.call(i,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error",t.fn.editableform.engine="jquery"}(t),function(t){"use strict";t.fn.editableutils={inherit:function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(n){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,n,i){var r,a,o={};if(!t.isArray(n)||!n.length)return o;for(var s=0;s<n.length;s++)r=n[s],e.hasOwnProperty(r)&&(o[r]=e[r]),i!==!0&&(a=r.toLowerCase(),e.hasOwnProperty(a)&&(o[r]=e[a]));return o},getConfigData:function(e){var n={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(n[t]=e)}),n},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,n,i){if(!n||null===e)return[];if("function"!=typeof i){var r=i||"value";i=function(t){return t[r]}}var a=t.isArray(e),o=[],s=this;return t.each(n,function(n,r){if(r.children)o=o.concat(s.itemsByValue(e,r.children,i));else if(a)t.grep(e,function(t){return t==(r&&"object"==typeof r?i(r):r)}).length&&o.push(r);else{var u=r&&"object"==typeof r?i(r):r;e==u&&o.push(r)}}),o},createInput:function(e){var n,i,r,a=e.type;return"date"===a&&("inline"===e.mode?t.fn.editabletypes.datefield?a="datefield":t.fn.editabletypes.dateuifield&&(a="dateuifield"):t.fn.editabletypes.date?a="date":t.fn.editabletypes.dateui&&(a="dateui"),"date"!==a||t.fn.editabletypes.date||(a="combodate")),"datetime"===a&&"inline"===e.mode&&(a="datetimefield"),"wysihtml5"!==a||t.fn.editabletypes[a]||(a="textarea"),"function"==typeof t.fn.editabletypes[a]?(n=t.fn.editabletypes[a],i=this.sliceObj(e,this.objectKeys(n.defaults)),r=new n(i)):(t.error("Unknown type: "+a),!1)},supportsTransitions:function(){var t=document.body||document.documentElement,e=t.style,n="transition",i=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[n])return!0;n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0;r<i.length;r++)if("string"==typeof e[i[r]+n])return!0;return!1}}}(t),function(t){"use strict";var n=function(t,e){this.init(t,e)},i=function(t,e){this.init(t,e)};n.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.editableContainer.defaults,i),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(e){var i,r=t(e.target),a=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(t.contains(document.documentElement,e.target)&&!r.is(document)){for(i=0;i<a.length;i++)if(r.is(a[i])||r.parents(a[i]).length)return;n.prototype.closeOthers(e.target)}}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!t.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var t;return this.containerDataName&&(t=this.$element.data(this.containerDataName))?t:t=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown",t(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:t});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(n,i){if(i!==e&&!t(i).find(e).length){var r=t(i),a=r.data("editableContainer");a&&("cancel"===a.options.onblur?r.data("editableContainer").hide("onblur"):"submit"===a.options.onblur&&r.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(e){var r=arguments;return this.each(function(){var a=t(this),o="editableContainer",s=a.data(o),u="object"==typeof e&&e,l="inline"===u.mode?i:n;s||a.data(o,s=new l(this,u)),"string"==typeof e&&s[e].apply(s,Array.prototype.slice.call(r,1))})},t.fn.editableContainer.Popup=n,t.fn.editableContainer.Inline=i,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},e.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(t),function(t){"use strict";t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=t("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(t),function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,n,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!t.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e,n=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=t.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),n=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),"string"==typeof this.options.value?this.value=this.input.str2value(this.options.value):this.value=this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(this.options.disabled||t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":e=!0;break;case"auto":e=!t.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!n;break;default:e=!1}t.when(e?this.render():!0).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var n=t(e.target);n.data("editable")||(n.hasClass(this.options.emptyclass)&&n.empty(),n.editable(this.options).trigger(e))},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,n){return e&&"object"==typeof e?void t.each(e,t.proxy(function(e,n){this.option(t.trim(e),n)},this)):(this.options[e]=n,"disabled"===e?n?this.disable():this.enable():("value"===e&&this.setValue(n),this.container&&this.container.option(e,n),void(this.input.option&&this.input.option(e,n))))},handleEmpty:function(e){this.options.display!==!1&&(void 0!==e?this.isEmpty=e:"function"==typeof this.input.isEmpty?this.isEmpty=this.input.isEmpty(this.$element):this.isEmpty=""===t.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var n=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(n),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var n=!1;n=n||"function"==typeof this.options.url,n=n||this.options.display===!1,n=n||void 0!==e.response,n=n||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),n?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var i=this.$element,r=i.css("background-color");i.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===r&&(r=""),i.css("background-color",r),i.addClass("editable-bg-transition"),setTimeout(function(){i.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,n,i){n?this.value=this.input.str2value(e):this.value=e,this.container&&this.container.option("value",this.value),t.when(this.render(i)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},t.fn.editable=function(n){var i={},r=arguments,a="editable";switch(n){case"validate":return this.each(function(){var e,n=t(this),r=n.data(a);r&&(e=r.validate())&&(i[r.options.name]=e)}),i;case"getValue":return 2===arguments.length&&arguments[1]===!0?i=this.eq(0).data(a).value:this.each(function(){var e=t(this),n=e.data(a);n&&void 0!==n.value&&null!==n.value&&(i[n.options.name]=n.input.value2submit(n.value))}),i;case"submit":var o=arguments[1]||{},s=this,u=this.editable("validate");if(t.isEmptyObject(u)){var l={};if(1===s.length){var c=s.data("editable"),h={name:c.options.name||"",value:c.input.value2submit(c.value),pk:"function"==typeof c.options.pk?c.options.pk.call(c.options.scope):c.options.pk};"function"==typeof c.options.params?h=c.options.params.call(c.options.scope,h):(c.options.params=t.fn.editableutils.tryParseJson(c.options.params,!0),t.extend(h,c.options.params)),l={url:c.options.url,data:h,type:"POST"},o.success=o.success||c.options.success,o.error=o.error||c.options.error}else{var f=this.editable("getValue");l={url:o.url,data:f,type:"POST"}}l.success="function"==typeof o.success?function(t){o.success.call(s,t,o)}:t.noop,l.error="function"==typeof o.error?function(){o.error.apply(s,arguments)}:t.noop,o.ajaxOptions&&t.extend(l,o.ajaxOptions),o.data&&t.extend(l.data,o.data),t.ajax(l)}else"function"==typeof o.error&&o.error.call(s,u);return this}return this.each(function(){var i=t(this),o=i.data(a),s="object"==typeof n&&n;return s&&s.selector?void(o=new e(this,s)):(o||i.data(a,o=new e(this,s)),void("string"==typeof n&&o[n].apply(o,Array.prototype.slice.call(r,1))))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(t),function(t){"use strict";t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,n,i){this.type=e,this.options=t.extend({},i,n)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,n){t(n)[this.options.escape?"text":"html"](t.trim(e))},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){void 0!==this.options[t]&&null!==this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},t.extend(t.fn.editabletypes,{abstractinput:e})}(t),function(t){"use strict";var e=function(t){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(t){return null},value2html:function(e,n,i,r){var a=t.Deferred(),o=function(){"function"==typeof i?i.call(n,e,this.sourceData,r):this.value2htmlFinal(e,n),a.resolve()};return null===e?o.call(this):this.onSourceReady(o,function(){a.resolve()}),a.promise()},onSourceReady:function(e,n){var i;if(t.isFunction(this.options.source)?(i=this.options.source.call(this.options.scope),this.sourceData=null):i=this.options.source,this.options.sourceCache&&t.isArray(this.sourceData))return void e.call(this);try{i=t.fn.editableutils.tryParseJson(i,!1)}catch(r){return void n.call(this)}if("string"==typeof i){if(this.options.sourceCache){var a,o=i;if(t(document).data(o)||t(document).data(o,{}),a=t(document).data(o),a.loading===!1&&a.sourceData)return this.sourceData=a.sourceData,this.doPrepend(),void e.call(this);if(a.loading===!0)return a.callbacks.push(t.proxy(function(){this.sourceData=a.sourceData,this.doPrepend(),e.call(this)},this)),void a.err_callbacks.push(t.proxy(n,this));a.loading=!0,a.callbacks=[],a.err_callbacks=[]}var s=t.extend({url:i,type:"get",cache:!1,dataType:"json",success:t.proxy(function(i){a&&(a.loading=!1),this.sourceData=this.makeArray(i),t.isArray(this.sourceData)?(a&&(a.sourceData=this.sourceData,t.each(a.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(n.call(this),a&&t.each(a.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){n.call(this),a&&(a.loading=!1,t.each(a.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);t.ajax(s)}else this.sourceData=this.makeArray(i),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):n.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(t.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(t,e){},makeArray:function(e){var n,i,r,a,o=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){a=function(t,e){return i={value:t,text:e},n++>=2?!1:void 0};for(var s=0;s<e.length;s++)r=e[s],"object"==typeof r?(n=0,t.each(r,a),1===n?o.push(i):n>1&&(r.children&&(r.children=this.makeArray(r.children)),o.push(r))):o.push({value:r,text:r})}else t.each(e,function(t,e){o.push({value:t,text:e})});return o},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),t.fn.editabletypes.list=e}(t),function(t){"use strict";var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(t.proxy(function(e){if(!~t.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var n=this;this.t=setTimeout(function(){n.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(t){if(this.$clear){var e=this.$input.val().length,n=this.$clear.is(":visible");e&&!n&&this.$clear.show(),!e&&n&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(t),function(t){"use strict";var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(t),function(t){"use strict";var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(n,i){var r;if(t.isArray(i))for(var a=0;a<i.length;a++)r={},i[a].children?(r.label=i[a].text,n.append(e(t("<optgroup>",r),i[a].children))):(r.value=i[a].value,i[a].disabled&&(r.disabled=!0),n.append(t("<option>",r).text(i[a].text)));return n};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,n){var i="",r=t.fn.editableutils.itemsByValue(e,this.sourceData);r.length&&(i=r[0].text),t.fn.editabletypes.abstractinput.prototype.value2html.call(this,i,n)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(t),function(t){"use strict";var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var n=0;n<this.sourceData.length;n++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[n].value})).append(t("<span>").text(" "+this.sourceData[n].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var n,i=null;return"string"==typeof e&&e.length?(n=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),i=e.split(n)):i=t.isArray(e)?e:[e],i},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(n,i){var r=t(i);t.each(e,function(t,e){r.val()==e&&r.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(n,i){e.push(t(i).val())}),e},value2htmlFinal:function(e,n){var i=[],r=t.fn.editableutils.itemsByValue(e,this.sourceData),a=this.options.escape;r.length?(t.each(r,function(e,n){var r=a?t.fn.editableutils.escape(n.text):n.text;i.push(r)}),t(n).html(i.join("<br>"))):t(n).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(t),function(t){"use strict";var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,n){e?t(n).text("[hidden]"):t(n).empty()},html2value:function(t){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(t),function(t){"use strict";var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(t),function(t){"use strict";var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(t),function(t){"use strict";var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(t),function(t){"use strict";var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(t),function(t){"use strict";var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{
render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(t),function(t){"use strict";var e=function(t){this.init("time",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),t.fn.editabletypes.time=e}(t),function(t){"use strict";var e=function(n){if(this.init("select2",n,e.defaults),n.select2=n.select2||{},this.sourceData=null,n.placeholder&&(n.select2.placeholder=n.placeholder),!n.select2.tags&&n.source){var i=n.source;t.isFunction(n.source)&&(i=n.source.call(n.scope)),"string"==typeof i?(n.select2.ajax=n.select2.ajax||{},n.select2.ajax.data||(n.select2.ajax.data=function(t){return{query:t}}),n.select2.ajax.results||(n.select2.ajax.results=function(t){return{results:t}}),n.select2.ajax.url=i):(this.sourceData=this.convertSource(i),n.select2.data=this.sourceData)}if(this.options.select2=t.extend({},e.defaults.select2,n.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var r=this.idFunc||"id";this.idFunc=function(t){return t[r]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(t){return t.text})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",t.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(n,i){var r,a="",o=this;this.options.select2.tags?r=n:this.sourceData&&(r=t.fn.editableutils.itemsByValue(n,this.sourceData,this.idFunc)),t.isArray(r)?(a=[],t.each(r,function(t,e){a.push(e&&"object"==typeof e?o.formatSelection(e):e)})):r&&(a=o.formatSelection(r)),a=t.isArray(a)?a.join(this.options.viewseparator):a,e.superclass.value2html.call(this,a,i)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(e){if(t.isArray(e)&&(e=e.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(e).trigger("change",!0):(this.$input.val(e),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var n=this.options.select2.id,i=this.options.select2.formatSelection;if(!n&&!i){var r=t(this.options.scope);if(!r.data("editable").isEmpty){var a={id:e,text:r.text()};this.$input.select2("data",a)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(e,n){if("string"!=typeof e||!this.isMultiple)return e;n=n||this.getSeparator();var i,r,a;if(null===e||e.length<1)return null;for(i=e.split(n),r=0,a=i.length;a>r;r+=1)i[r]=t.trim(i[r]);return i},autosubmit:function(){this.$input.on("change",function(e,n){n||t(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||t.fn.select2.defaults.separator},convertSource:function(e){if(t.isArray(e)&&e.length&&void 0!==e[0].value)for(var n=0;n<e.length;n++)void 0!==e[n].value&&(e[n].id=e[n].value,delete e[n].value);return e},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(t),function(t){var e=function(e,n){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,n,this.$element.data()),void this.init()):void t.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(e){this.$element.val(this.getValue()).change(),this.options.smartDays&&(t(e.target).is(".month")||t(e.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,n){n=n[0];var i=new RegExp(n+"+"),r=n.length>1?n.substring(1,2):n;e=e.replace(i,"{"+r+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,n){n=n[0];var i=n.length>1?n.substring(1,2):n;e=e.replace("{"+i+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){for(var t in this.map){var e=this.$widget.find("."+t);this["$"+t]=e.length?e:null,this.fillCombo(t)}},fillCombo:function(t){var e=this["$"+t];if(e){var n="fill"+t.charAt(0).toUpperCase()+t.slice(1),i=this[n](),r=e.val();e.empty();for(var a=0;a<i.length;a++)e.append('<option value="'+i[a][0]+'">'+i[a][1]+"</option>");e.val(r)}},fillCommon:function(t){var e,n=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var i="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];i=i.split(" ").reverse()[0],n.push(["",i])}else"empty"===this.options.firstItem&&n.push(["",""]);return n},fillDay:function(){var t,e,n=this.fillCommon("d"),i=-1!==this.options.template.indexOf("DD"),r=31;if(this.options.smartDays&&this.$month&&this.$year){var a=parseInt(this.$month.val(),10),o=parseInt(this.$year.val(),10);isNaN(a)||isNaN(o)||(r=moment([o,a]).daysInMonth())}for(e=1;r>=e;e++)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillMonth:function(){var t,e,n=this.fillCommon("M"),i=-1!==this.options.template.indexOf("MMMM"),r=-1!==this.options.template.indexOf("MMM"),a=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=i?moment().date(1).month(e).format("MMMM"):r?moment().date(1).month(e).format("MMM"):a?this.leadZero(e+1):e+1,n.push([e,t]);return n},fillYear:function(){var t,e,n=[],i=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=i?e:(e+"").substring(2),n[this.options.yearDescending?"push":"unshift"]([e,t]);return n=this.fillCommon("y").concat(n)},fillHour:function(){var t,e,n=this.fillCommon("h"),i=-1!==this.options.template.indexOf("h"),r=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),a=i?1:0,o=i?12:23;for(e=a;o>=e;e++)t=r?this.leadZero(e):e,n.push([e,t]);return n},fillMinute:function(){var t,e,n=this.fillCommon("m"),i=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillSecond:function(){var t,e,n=this.fillCommon("s"),i=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=i?this.leadZero(e):e,n.push([e,t]);return n},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var n,i={},r=this,a=!1;return t.each(this.map,function(t,e){if("ampm"!==t){var n="day"===t?1:0;return i[t]=r["$"+t]?parseInt(r["$"+t].val(),10):n,isNaN(i[t])?(a=!0,!1):void 0}}),a?"":(this.$ampm&&(12===i.hour?i.hour="am"===this.$ampm.val()?0:12:i.hour="am"===this.$ampm.val()?i.hour:i.hour+12),n=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(n),e=void 0===e?this.options.format:e,null===e?n.isValid()?n:null:n.isValid()?n.format(e):"")},setValue:function(e){function n(e,n){var i={};return e.children("option").each(function(e,r){var a,o=t(r).attr("value");""!==o&&(a=Math.abs(o-n),("undefined"==typeof i.distance||a<i.distance)&&(i={value:o,distance:a}))}),i.value}if(e){var i="string"==typeof e?moment(e,this.options.format):moment(e),r=this,a={};i.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(a[t]=i[e[1]]())}),this.$ampm&&(a.hour>=12?(a.ampm="pm",a.hour>12&&(a.hour-=12)):(a.ampm="am",0===a.hour&&(a.hour=12))),t.each(a,function(t,e){r["$"+t]&&("minute"===t&&r.options.minuteStep>1&&r.options.roundTime&&(e=n(r["$"+t],e)),"second"===t&&r.options.secondStep>1&&r.options.roundTime&&(e=n(r["$"+t],e)),r["$"+t].val(e))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(i.format(this.options.format)).change())}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(n){var i,r=Array.apply(null,arguments);return r.shift(),"getValue"===n&&this.length&&(i=this.eq(0).data("combodate"))?i.getValue.apply(i,r):this.each(function(){var i=t(this),a=i.data("combodate"),o="object"==typeof n&&n;a||i.data("combodate",a=new e(this,o)),"string"==typeof n&&"function"==typeof a[n]&&a[n].apply(a,r)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(t),function(t){"use strict";var e=function(n){this.init("combodate",n,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),n.combodate=t.fn.editableutils.tryParseJson(n.combodate,!0),this.options.combodate=t.extend({},e.defaults.combodate,n.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===t.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,n){var i=t?t.format(this.options.viewformat):"";e.superclass.value2html.call(this,i,n)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(t),function(t){"use strict";var e=t.fn.editableform.Constructor.prototype.initInput;t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var n=null===this.input.options.inputclass||this.input.options.inputclass===!1,i="input-sm",r="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~t.inArray(this.input.type,r)&&(this.input.$input.addClass("form-control"),n&&(this.input.options.inputclass=i,this.input.$input.addClass(i)));for(var a=this.$form.find(".editable-buttons"),o=n?[i]:this.input.options.inputclass.split(" "),s=0;s<o.length;s++)"input-lg"===o[s].toLowerCase()&&a.find("button").removeClass("btn-sm").addClass("btn-lg")}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',t.fn.editableform.errorGroupClass="has-error",t.fn.editableform.errorBlockClass=null,t.fn.editableform.engine="bs3"}(t),function(t){"use strict";t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:t.fn.popover.Constructor.DEFAULTS,initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var t=this.tip(),e="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,n=/\s?auto?\s?/i,i=n.test(e);i&&(e=e.replace(n,"")||"top");var r=this.getPosition(),a=t[0].offsetWidth,o=t[0].offsetHeight;if(i){var s=this.$element.parent(),u=e,l=document.documentElement.scrollTop||document.body.scrollTop,c="body"==this.options.container?window.innerWidth:s.outerWidth(),h="body"==this.options.container?window.innerHeight:s.outerHeight(),f="body"==this.options.container?0:s.offset().left;e="bottom"==e&&r.top+r.height+o-l>h?"top":"top"==e&&r.top-l-o<0?"bottom":"right"==e&&r.right+a>c?"left":"left"==e&&r.left-a<f?"right":e,t.removeClass(u).addClass(e)}var p=this.getCalculatedOffset(e,r,a,o);this.applyPlacement(p,e)}).call(this.container())}})}(t),function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function n(e,n){var i,r=t(e).data(),a={},o=new RegExp("^"+n.toLowerCase()+"([A-Z])"),n=new RegExp("^"+n.toLowerCase());for(var s in r)n.test(s)&&(i=s.replace(o,function(t,e){return e.toLowerCase()}),a[i]=r[s]);return a}function i(e){var n={};if(c[e]||(e=e.split("-")[0],c[e])){var i=c[e];return t.each(l,function(t,e){e in i&&(n[e]=i[e])}),n}}var r=function(e,n){this._process_options(n),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(h.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};r.prototype={constructor:r,_process_options:function(e){this._o=t.extend({},this._o,e);var n=this.o=t.extend({},this._o),i=n.language;switch(c[i]||(i=i.split("-")[0],c[i]||(i=u.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var r=h.parseFormat(n.format);n.startDate!==-(1/0)&&(n.startDate=h.parseDate(n.startDate,r,n.language)),n.endDate!==1/0&&(n.endDate=h.parseDate(n.endDate,r,n.language)),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],t.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=t.map(n.daysOfWeekDisabled,function(t){return parseInt(t,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,n,i=0;i<t.length;i++)e=t[i][0],n=t[i][1],e.on(n)},_unapplyEvents:function(t){for(var e,n,i=0;i<t.length;i++)e=t[i][0],n=t[i][1],e.off(n)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).size()||this.picker.is(t.target)||this.picker.find(t.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.date,r=new Date(i.getTime()+6e4*i.getTimezoneOffset());this.element.trigger({type:e,date:r,format:t.proxy(function(t){var e=t||this.o.format;return h.formatDate(i,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(t){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t)},getFormattedDate:function(t){return void 0===t&&(t=this.o.format),h.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,n=this.component?this.component.parent().offset():this.element.offset(),i=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:n.top+i,left:n.left,zIndex:e})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=h.parseDate(t,this.o.format,this.o.language),e&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';e+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+c[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+c[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),a=this.date.valueOf(),o=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()==i&&e.getUTCMonth()<r?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()==i&&e.getUTCMonth()>r)&&n.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==o.getFullYear()&&e.getUTCMonth()==o.getMonth()&&e.getUTCDate()==o.getDate()&&n.push("today"),a&&e.valueOf()==a&&n.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&n.push("selected")),n},fill:function(){var n,i=new Date(this.viewDate),r=i.getUTCFullYear(),a=i.getUTCMonth(),o=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),u=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(c[this.o.language].months[a]+" "+r),this.picker.find("tfoot th.today").text(c[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var f=e(r,a-1,28,0,0,0,0),p=h.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(p),f.setUTCDate(p-(f.getUTCDay()-this.o.weekStart+7)%7);var d=new Date(f);d.setUTCDate(d.getUTCDate()+42),d=d.valueOf();for(var v,m=[];f.valueOf()<d;){if(f.getUTCDay()==this.o.weekStart&&(m.push("<tr>"),this.o.calendarWeeks)){var g=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),y=new Date(+g+(11-g.getUTCDay())%7*864e5),_=new Date(+(_=e(y.getUTCFullYear(),0,1))+(11-_.getUTCDay())%7*864e5),b=(y-_)/864e5/7+1;m.push('<td class="cw">'+b+"</td>")}v=this.getClassNames(f),v.push("day");var x=this.o.beforeShowDay(f);void 0===x?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),x.enabled===!1&&v.push("disabled"),x.classes&&(v=v.concat(x.classes.split(/\s+/))),x.tooltip&&(n=x.tooltip),v=t.unique(v),m.push('<td class="'+v.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+f.getUTCDate()+"</td>"),f.getUTCDay()==this.o.weekEnd&&m.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(m.join(""));var w=this.date&&this.date.getUTCFullYear(),k=this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");w&&w==r&&k.eq(this.date.getUTCMonth()).addClass("active"),(o>r||r>u)&&k.addClass("disabled"),r==o&&k.slice(0,s).addClass("disabled"),r==u&&k.slice(l+1).addClass("disabled"),m="",r=10*parseInt(r/10,10);var M=this.picker.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;for(var C=-1;11>C;C++)m+='<span class="year'+(-1==C?" old":10==C?" new":"")+(w==r?" active":"")+(o>r||r>u?" disabled":"")+'">'+r+"</span>",r+=1;M.html(m)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(n){n.preventDefault();var i=t(n.target).closest("span, td, th");if(1==i.length)switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var r=h.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,r);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,r)}this.fill();break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var o="linked"==this.o.todayBtn?null:"view";this._setDate(a,o);break;case"clear":var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!i.is(".disabled")){if(this.viewDate.setUTCDate(1),i.is(".month")){var u=1,l=i.parent().find("span").index(i),c=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(l),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(c,l,u,0,0,0,0))}else{var c=parseInt(i.text(),10)||0,u=1,l=0;this.viewDate.setUTCFullYear(c),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(c,l,u,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var u=parseInt(i.text(),10)||1,c=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth();i.is(".old")?0===l?(l=11,c-=1):l-=1:i.is(".new")&&(11==l?(l=0,c+=1):l+=1),this._setDate(e(c,l,u,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),!this.o.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var n,i,r=new Date(t.valueOf()),a=r.getUTCDate(),o=r.getUTCMonth(),s=Math.abs(e);if(e=e>0?1:-1,1==s)i=-1==e?function(){return r.getUTCMonth()==o}:function(){return r.getUTCMonth()!=n},n=o+e,r.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var u=0;s>u;u++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(a),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--a),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,n,i,r=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+e),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):(n=new Date(this.date),n.setUTCDate(this.date.getUTCDate()+7*e),i=new Date(this.viewDate),i.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),r=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(r){this._trigger("changeDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+h.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(e,n){this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,t(this.inputs).datepicker(n).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){var n=t(e.target).data("datepicker"),i=n.getUTCDate(),r=t.inArray(e.target,this.inputs),a=this.inputs.length;if(-1!=r){if(i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[r])for(;a>r&&i>this.dates[r];)this.pickers[r++].setUTCDate(i);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var o=t.fn.datepicker,s=t.fn.datepicker=function(e){var o=Array.apply(null,arguments);o.shift();var s;return this.each(function(){var l=t(this),c=l.data("datepicker"),h="object"==typeof e&&e;if(!c){var f=n(this,"date"),p=t.extend({},u,f,h),d=i(p.language),v=t.extend({},u,d,f,h);if(l.is(".input-daterange")||v.inputs){var m={inputs:v.inputs||l.find("input").toArray()};l.data("datepicker",c=new a(this,t.extend(v,m)))}else l.data("datepicker",c=new r(this,v))}return"string"==typeof e&&"function"==typeof c[e]&&(s=c[e].apply(c,o),void 0!==s)?!1:void 0}),void 0!==s?s:this},u=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},l=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=r;var c=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},h={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0;
},getDaysInMonth:function(t,e){return[31,h.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(n,i,a){if(n instanceof Date)return n;if("string"==typeof i&&(i=h.parseFormat(i)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){var o,s,u=/([\-+]\d+)([dmwy])/,l=n.match(/([\-+]\d+)([dmwy])/g);n=new Date;for(var f=0;f<l.length;f++)switch(o=u.exec(l[f]),s=parseInt(o[1]),o[2]){case"d":n.setUTCDate(n.getUTCDate()+s);break;case"m":n=r.prototype.moveMonth.call(r.prototype,n,s);break;case"w":n.setUTCDate(n.getUTCDate()+7*s);break;case"y":n=r.prototype.moveYear.call(r.prototype,n,s)}return e(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}var p,d,o,l=n&&n.match(this.nonpunctuation)||[],n=new Date,v={},m=["yyyy","yy","M","MM","m","mm","d","dd"],g={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};g.M=g.MM=g.mm=g.m,g.dd=g.d,n=e(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var y=i.parts.slice();if(l.length!=y.length&&(y=t(y).filter(function(e,n){return-1!==t.inArray(n,m)}).toArray()),l.length==y.length){for(var f=0,_=y.length;_>f;f++){if(p=parseInt(l[f],10),o=y[f],isNaN(p))switch(o){case"MM":d=t(c[a].months).filter(function(){var t=this.slice(0,l[f].length),e=l[f].slice(0,t.length);return t==e}),p=t.inArray(d[0],c[a].months)+1;break;case"M":d=t(c[a].monthsShort).filter(function(){var t=this.slice(0,l[f].length),e=l[f].slice(0,t.length);return t==e}),p=t.inArray(d[0],c[a].monthsShort)+1}v[o]=p}for(var b,f=0;f<m.length;f++)b=m[f],b in v&&!isNaN(v[b])&&g[b](n,v[b])}return n},formatDate:function(e,n,i){"string"==typeof n&&(n=h.parseFormat(n));var r={d:e.getUTCDate(),D:c[i].daysShort[e.getUTCDay()],DD:c[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:c[i].monthsShort[e.getUTCMonth()],MM:c[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;for(var e=[],a=t.extend([],n.separators),o=0,s=n.parts.length;s>=o;o++)a.length&&e.push(a.shift()),e.push(r[n.parts[o]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};h.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+h.headTemplate+"<tbody></tbody>"+h.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+h.headTemplate+h.contTemplate+h.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+h.headTemplate+h.contTemplate+h.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=h,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=o,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),s.call(n,"show"))}),t(function(){s.call(t('[data-provide="datepicker-inline"]'))})}(t),function(t){"use strict";t.fn.bdatepicker=t.fn.datepicker.noConflict(),t.fn.datepicker||(t.fn.datepicker=t.fn.bdatepicker);var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,n){this.options.viewformat||(this.options.viewformat=this.options.format),e.datepicker=t.fn.editableutils.tryParseJson(e.datepicker,!0),this.options.datepicker=t.extend({},n.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,n){var i=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,i,n)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!t(e.currentTarget).is(".old")&&!t(e.currentTarget).is(".new")){var n=t(this).closest("form");setTimeout(function(){n.submit()},200)}})},parseDate:function(t,e){var n,i=null;return t&&(i=this.dpg.parseDate(t,e,this.options.datepicker.language),"string"==typeof t&&(n=this.dpg.formatDate(i,e,this.options.datepicker.language),t!==n&&(i=null))),i}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(t),function(t){"use strict";var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(t),function(t){"use strict";var e=function(t){this.init("datetime",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,n){this.options.viewformat||(this.options.viewformat=this.options.format),e.datetimepicker=t.fn.editableutils.tryParseJson(e.datetimepicker,!0),this.options.datetimepicker=t.extend({},n.datetimepicker,e.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=t.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(e){var n=t(this).closest("form").parent();setTimeout(function(){n.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,n){var i=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return n?void e.superclass.value2html.call(this,i,n):i},html2value:function(t){var e=this.parseDate(t,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var e=this.parseDate(t,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(e){var n=t(this).closest("form");setTimeout(function(){n.submit()},200)})},toUTC:function(t){return t?new Date(t.valueOf()-6e4*t.getTimezoneOffset()):t},fromUTC:function(t){return t?new Date(t.valueOf()+6e4*t.getTimezoneOffset()):t},parseDate:function(t,e){var n,i=null;return t&&(i=this.dpg.parseDate(t,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof t&&(n=this.dpg.formatDate(i,e,this.options.datetimepicker.language,this.options.formatType),t!==n&&(i=null))),i}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.datetime=e}(t),function(t){"use strict";var e=function(t){this.init("datetimefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.datetime),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),t.fn.editabletypes.datetimefield=e}(t)}).call(e,n(1),n(1))},function(t,e,n){(function(e){function i(t){return function(){r(),t()}}function r(){e('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var n=e(t.target).attr("data-tabname");switch(n){case"Quality of Services":break;case"Employee Compensation":s.initAll();break;case"Financial Health":u.initAll();break;case"Financial Statements":l.initAll()}})}function a(){s.initAll(),u.initAll(),l.initAll()}function o(t){google.load("visualization","1.0",{packages:["treemap","corechart"],callback:i(t)})}var s=n(29),u=n(31),l=n(32);t.exports={init:o,forceInit:a}}).call(e,n(1))},function(t,e,n){function i(){r(),a()}function r(){function t(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}var e,n,i,r,a;o.median_salary_per_full_time_emp||(o.median_salary_per_full_time_emp=o.median_salary_for_full_time_employees),o.median_benefits_per_ft_emp||(o.median_benefits_per_ft_emp=o.median_benefits_for_full_time_employees),0===o.median_wages_general_public&&(o.median_wages_general_public=void 0),0===o.median_benefits_general_public&&(o.median_benefits_general_public=void 0),o.median_salary_per_full_time_emp&&o.median_benefits_per_ft_emp&&o.median_wages_general_public&&o.median_benefits_general_public&&(a=new google.visualization.DataTable,a.addColumn("string","Median Compensation"),a.addColumn("number","Wages"),a.addColumn("number","Bens."),a.addRows([[t(o.name+"\n Employees"),+o.median_salary_per_full_time_emp,+o.median_benefits_per_ft_emp],["All \n"+t(o.name+" \n Residents"),+o.median_wages_general_public,+o.median_benefits_general_public]]),n=new google.visualization.NumberFormat({groupingSymbol:",",fractionDigits:"0"}),n.format(a,1),n.format(a,2),r="median-comp-graph",i={title:"Median Total Compensation - Full Time Workers: \n Government vs. Private Sector",titleTextStyle:{fontSize:12},tooltip:{textStyle:{fontSize:12}},width:340,height:300,isStacked:!0,colors:["#005ce6","#009933"]},e=new google.visualization.ColumnChart(document.getElementById(r)),e.draw(a,i))}function a(){var t,e,n,i,r;o.median_pension30_year_retiree||(o.median_pension30_year_retiree=o.median_pension_for_retiree_with_30_years_service),o.median_pension30_year_retiree&&(r=new google.visualization.DataTable,r.addColumn("string","Median Pension"),r.addColumn("number","Wages"),r.addRows([["Pension for \n Retiree w/ 30 Years",+o.median_pension30_year_retiree]]),e=new google.visualization.NumberFormat({groupingSymbol:",",fractionDigits:"0"}),e.format(r,1),i="median-pension-graph",n={title:"Median Total Compensation - Full Time Workers: \n Government vs. Private Sector",titleTextStyle:{fontSize:12},tooltip:{textStyle:{fontSize:12}},width:340,height:300,isStacked:"true",colors:["#005ce6","#009933"]},t=new google.visualization.ColumnChart(document.getElementById(i)),t.draw(r,n))}var o=n(30).data;t.exports={init:i,initAll:i}},function(t,e){var n=JSON.parse(window.gw.government);t.exports={data:n}},function(t,e,n){function i(){r(),a(),o()}function r(){var t,e,n,i,r;s.public_safety_exp_over_tot_gov_fund_revenue||(s.public_safety_exp_over_tot_gov_fund_revenue=s.public_safety_expense_total_governmental_fund_revenue),s.public_safety_exp_over_tot_gov_fund_revenue&&(n=new google.visualization.DataTable,n.addColumn("string","Public Safety Expense"),n.addColumn("number","Total"),n.addRows([["Public Safety Exp",1-s.public_safety_exp_over_tot_gov_fund_revenue],["Other",+s.public_safety_exp_over_tot_gov_fund_revenue]]),i="public-safety-pie",e={title:"Public safety expense",titleTextStyle:{fontSize:12},tooltip:{textStyle:{fontSize:12}},width:340,height:300,is3D:"true",colors:["#005ce6","#009933"],slices:{1:{offset:.2}},pieStartAngle:45},r=document.getElementById(i),r&&(t=new google.visualization.PieChart(r),t.draw(n,e)))}function a(){var t,e,n,i;s.total_revenue_per_capita&&(n=new google.visualization.DataTable,n.addColumn("string","Per Capita"),n.addColumn("number","Rev."),n.addRows([["Total Revenue \n Per Capita",+s.total_revenue_per_capita],["Median Total \n Revenue Per \n Capita For All Cities",420]]),i="fin-health-revenue-graph",e={title:"Total Revenue",titleTextStyle:{fontSize:12},tooltip:{textStyle:{fontSize:12}},width:340,height:300,isStacked:!0,colors:["#005ce6","#009933"],"chartArea.width":"100%"},t=new google.visualization.ColumnChart(document.getElementById(i)),t.draw(n,e))}function o(){var t,e,n,i;s.total_expenditures_per_capita&&(n=new google.visualization.DataTable,n.addColumn("string","Per Capita"),n.addColumn("number","Exp."),n.addRows([["Total Expenditures \n Per Capita",+s.total_expenditures_per_capita],["Median Total \n Expenditures \n Per Capita \n For All Cities",420]]),i="fin-health-expenditures-graph",e={title:"Total Expenditures",titleTextStyle:{fontSize:12},tooltip:{textStyle:{fontSize:12}},width:340,height:300,isStacked:"true",colors:["#005ce6","#009933"],"chartArea.width":"100%"},t=new google.visualization.ColumnChart(document.getElementById(i)),t.draw(n,e))}var s=n(30).data;t.exports={init:i,initAll:i}},function(t,e,n){(function(e){function i(){l(),s(),u()}function r(t,e,n){var i=100*e/n;return i=i.toFixed(2),""+t+": "+numeral(e).format("$0,0")+" ("+i+"%)"}function a(){var t,e,n,i,a,o,s,u,l,h,p,v,m,g=f.financialStatements.Revenues,y=0;v=new google.visualization.DataTable,v.addColumn("string","Total Gov. Revenues"),v.addColumn("number","Total"),v.addColumn({type:"string",role:"tooltip"}),p=[];for(n in g)if(g.hasOwnProperty(n)&&"Total Revenues"!==g[n].caption){if(e=g[n],t=c(e),!t)continue;y+=parseInt(t,10)}for(m in g)g.hasOwnProperty(m)&&"Total Revenues"!==g[m].caption&&(o=g[m].translatedCaption,a=parseInt(g[m].totalfunds,10),i=r(o,a,y),l=[o,a,i],p.push(l));p.sort(d),v.addRows(p),h="total-revenue-pie",u={title:f.translations.total_revenue,titleTextStyle:{fontSize:16},tooltip:{textStyle:{fontSize:12}},width:470,height:350,sliceVisibilityThreshold:0,forceIFrame:!0,chartArea:{width:"90%",height:"75%"}},s=new google.visualization.PieChart(document.getElementById(h)),s.draw(v,u)}function o(){var t,e,n,i,a,o,s,u,l,h,p,v,m,g=f.financialStatements.Expenditures,y=0;p=new google.visualization.DataTable,p.addColumn("string","Total Gov. Expenditures"),p.addColumn("number","Total"),p.addColumn({type:"string",role:"tooltip"}),h=[];for(v in g)if(g.hasOwnProperty(v)&&"Total Expenditures"!==g[v].caption){if(e=g[v],t=c(e),!t)continue;y+=parseInt(t,10)}for(m in g)g.hasOwnProperty(m)&&"Total Expenditures"!==g[m].caption&&(a=g[m].translatedCaption,i=parseInt(g[m].totalfunds,10),n=r(a,i,y),u=[a,i,n],h.push(u));h.sort(d),p.addRows(h),l="total-expenditures-pie",s={title:f.translations.total_expenditure,titleTextStyle:{fontSize:16},tooltip:{textStyle:{fontSize:12}},width:470,height:350,sliceVisibilityThreshold:0,forceIFrame:!0,chartArea:{width:"90%",height:"75%"}},o=new google.visualization.PieChart(document.getElementById(l)),o.draw(p,s)}function s(){var t,n,i,r="#total-revenue-tree",a=0,o=Number.MAX_VALUE,s=0,u=0,l=f.financialStatements.Revenues,p={name:f.translations.total_revenue,children:[]};e("#total-revenue-tree-title").text(f.translations.total_revenue);for(t in l)if(l.hasOwnProperty(t)&&"Total Revenues"!==l[t].caption){if(n=l[t],i=parseInt(c(n),10),!i)continue;p.children.push({name:n.translatedCaption,index:u++,amount:i}),o>i&&(o=i),i>s&&(s=i),a+=i}h(p,{selector:r,width:e(r).width()-50,height:e(r).width()-150,minAmount:o,maxAmount:s,totalAmount:a})}function u(){var t,n,i,r="#total-expenditures-tree",a=0,o=Number.MAX_VALUE,s=0,u=0,l=f.financialStatements.Expenditures,p={name:f.translations.total_expenditure,children:[]};e("#total-expenditures-tree-title").text(f.translations.total_expenditure);for(i in l)if(l.hasOwnProperty(i)&&"Total Expenditures"!==l[i].caption){if(n=l[i],t=parseInt(c(n),10),!t)continue;p.children.push({name:n.translatedCaption,index:u++,amount:t}),o>t&&(o=t),t>s&&(s=t),a+=t}h(p,{selector:r,width:e(r).width()-50,height:e(r).width()-150,minAmount:o,maxAmount:s,totalAmount:a})}function l(){function t(t,n){var i=n?{display:"none"}:{display:"table"};"financialTable"===t?(e(".compare-first-table").css(i),e(".compare-second-table").css(i)):"compareTables"===t&&e(".financial-table").css(i)}function n(t,n){var i,r,a,o=n?{display:"none"}:{display:"block"};"pie-charts"===t?(e("#total-expenditures-pie").css(o),e("#total-revenue-pie").css(o)):"compare-charts"===t?n?(e("#total-compare-pie").css(o),e("#total-compare-first-pie").css(o),e("#total-compare-second-pie").css(o),e("#total-compare-column").css(o)):(a=e(".government-categories .selected"),r=a.hasClass("category"),i=a.hasClass("caption"),r?(e("#total-compare-first-pie").css(o),e("#total-compare-second-pie").css(o)):i?e("#total-compare-column").css(o):(e("#total-compare-first-pie").css(o),e("#total-compare-second-pie").css(o)),e("#total-compare-pie").css(o)):"tree-charts"===t&&(e("#total-expenditures-tree").css(o),e("#total-revenue-tree").css(o))}n("tree-charts",!1),n("pie-charts",!0),n("compare-charts",!0),e("#Financial_Statements").on("click",".chart-controls .btn",function(){var i=this.getElementsByTagName("input")[0].id;"chart"===i?(t("financialTable",!0),t("compareTables",!1),n("pie-charts",!1),n("compare-charts",!0),n("tree-charts",!0),p.revenuePie.init&&p.expendituresPie.init||(a(),o()),e("#charts-row").css("margin-bottom","0")):"tree-charts"===i?(t("financialTable",!0),t("compareTables",!1),n("pie-charts",!0),n("compare-charts",!0),n("tree-charts",!1),p.expendituresTree.init&&p.revenuesTree.init||(u(),s()),e("#charts-row").css("margin-bottom","52px")):"compare-charts"===i&&(t("financialTable",!1),t("compareTables",!0),n("pie-charts",!0),n("compare-charts",!1),n("tree-charts",!0),p.expendituresTree.init&&p.revenuesTree.init||(u(),s()),e("#charts-row").css("margin-bottom","0"))})}function c(t){var n=e.extend({},t);return n.totalfunds&&n.totalfunds<0&&(n.totalfunds=-t.totalfunds),n.totalfunds||!1}function h(t,n){function i(t){var e=100*t.data.amount/n.totalAmount;return e=e.toFixed(2),t.data.name+": "+numeral(t.data.amount).format("$0,0")+" ("+e+"%)"}var r,a,o,s,u,l;r=v.select("body").append("div").attr("class","treemap-tooltip").style("opacity",0),a=v.treemap().size([n.width,n.height]).padding(1),o=v.hierarchy(t).sum(function(t){return t.amount}),s=v.scaleOrdinal().range(v.schemeCategory10.map(function(t){var e=v.rgb(t);return e.opacity=.6,e})),u=v.scaleLinear().domain([n.minAmount,n.maxAmount]).rangeRound([10,20]),a(o),e(n.selector).html(""),l=v.select(n.selector).append("div").style("width",n.width+"px").style("height",n.height+"px").style("position","relative"),l.selectAll("div").data(o.leaves()).enter().append("div").attr("id",function(t){return"rect-"+t.data.key}).style("overflow","hidden").style("text-align","center").style("left",function(t){return t.x0+"px"}).style("top",function(t){return t.y0+"px"}).style("width",function(t){return t.x1-t.x0+"px"}).style("height",function(t){return t.y1-t.y0+"px"}).style("position","absolute").style("background-color",function(t){return s(t.data.index)}).on("mouseover",function(t){r.transition().duration(200).style("opacity",.9),r.html(i(t)).style("left",v.event.pageX+28+"px").style("top",v.event.pageY-52+"px")}).on("mousemove",function(){return r.style("left",event.pageX+28+"px").style("top",event.pageY-52+"px")}).on("mouseout",function(){r.transition().duration(500).style("opacity",0)}).append("p").style("font-weight","bold").style("overflow-wrap","break-word").style("position","absolute").style("vertical-align","middle").style("padding","3px").style("margin",0).style("width","100%").style("top","50%").style("transform","translate(0, -50%)").style("font-size",function(t){return u(t.data.amount)+"px"}).html(function(t){return 100*t.data.amount/n.totalAmount<1?"":t.data.name})}var f=n(30).data,p=n(33).chart,d=n(34).rowSortFunction,v=n(35);t.exports={init:i,initAll:i,handlerSwitchChart:l}}).call(e,n(1))},function(t,e){var n={employeeCompensation_one:{init:!1},employeeCompensation_two:{init:!1},financialHealth_one:{init:!1},financialHealth_two:{init:!1},financialHealth_three:{init:!1},expendituresPie:{init:!1},revenuePie:{init:!1},expendituresTree:{init:!1},revenuesTree:{init:!1}};t.exports={chart:n}},function(t,e){function n(t,e){return t[1]>e[1]?-1:t[1]<e[1]?1:0}t.exports={rowSortFunction:n}},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t){return function(e,n){return kl(t(e),n)}}function n(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=Ul?r*=10:a>=jl?r*=5:a>=Ll&&(r*=2),t>e?-r:r}function i(t){return t.length}function r(){}function a(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,a=-1,o=t.length;if(null==e)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e(i=t[a],a,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}function o(){return{}}function s(t,e,n){t[e]=n}function u(){return a()}function l(t,e,n){t.set(e,n)}function c(){}function h(t,e){var n=new c;if(t instanceof c)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}function f(t){return+t}function p(t){return t*t}function d(t){return t*(2-t)}function v(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function m(t){return t*t*t}function g(t){return--t*t*t+1}function y(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function _(t){return 1-Math.cos(t*kc)}function b(t){return Math.sin(t*kc)}function x(t){return(1-Math.cos(wc*t))/2}function w(t){return Math.pow(2,10*t-10)}function k(t){return 1-Math.pow(2,-10*t)}function M(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function C(t){return 1-Math.sqrt(1-t*t)}function T(t){return Math.sqrt(1- --t*t)}function S(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function D(t){return 1-A(1-t)}function A(t){return(t=+t)<Mc?Pc*t*t:Tc>t?Pc*(t-=Cc)*t+Sc:Ac>t?Pc*(t-=Dc)*t+Ec:Pc*(t-=$c)*t+Nc}function E(t){return((t*=2)<=1?1-A(1-t):A(t-1)+1)/2}function $(t,e){return t[0]-e[0]||t[1]-e[1]}function N(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;++r){for(;i>1&&Yc(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function P(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function O(){return new P}function F(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a,o,s,u,l,c,h,f,p=t._root,d={data:i},v=t._x0,m=t._y0,g=t._x1,y=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((l=e>=(a=(v+g)/2))?v=a:g=a,(c=n>=(o=(m+y)/2))?m=o:y=o,r=p,!(p=p[h=c<<1|l]))return r[h]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,r?r[h]=d:t._root=d,t;do r=r?r[h]=new Array(4):t._root=new Array(4),(l=e>=(a=(v+g)/2))?v=a:g=a,(c=n>=(o=(m+y)/2))?m=o:y=o;while((h=c<<1|l)===(f=(u>=o)<<1|s>=a));return r[f]=p,r[h]=d,t}function I(t){var e,n,i,r,a=t.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-(1/0),h=-(1/0);for(n=0;a>n;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(o[n]=i,s[n]=r,u>i&&(u=i),i>c&&(c=i),l>r&&(l=r),r>h&&(h=r));for(u>c&&(u=this._x0,c=this._x1),l>h&&(l=this._y0,h=this._y1),this.cover(u,l).cover(c,h),n=0;a>n;++n)F(this,o[n],s[n],t[n]);return this}function z(t){for(var e=0,n=t.length;n>e;++e)this.remove(t[e]);return this}function R(t){return t[0]}function U(t){return t[1]}function j(t,e,n){var i=new L(null==e?R:e,null==n?U:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function L(t,e,n,i,r,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function q(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function H(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function V(t){if(!t._start)try{B(t)}catch(e){if(t._tasks[t._ended+t._active-1])W(t,e);else if(!t._data)throw e}}function B(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,r=n[i];n[i]=Y(t,e),--t._waiting,++t._active,n=r.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||vh)}}function Y(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?W(t,n):(t._data[e]=i,t._waiting?V(t):K(t))))}}function W(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,K(t)}function K(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function G(t){return new H(arguments.length?+t:1/0)}function X(t){return t.innerRadius}function J(t){return t.outerRadius}function Q(t){return t.startAngle}function Z(t){return t.endAngle}function tt(t){return t&&t.padAngle}function et(t){return t>=1?_h:-1>=t?-_h:Math.asin(t)}function nt(t,e,n,i,r,a,o,s){var u=n-t,l=i-e,c=o-r,h=s-a,f=(c*(e-a)-h*(t-r))/(h*u-c*l);return[t+f*u,e+f*l]}function it(t,e,n,i,r,a,o){var s=t-n,u=e-i,l=(o?a:-a)/Math.sqrt(s*s+u*u),c=l*u,h=-l*s,f=t+c,p=e+h,d=n+c,v=i+h,m=(f+d)/2,g=(p+v)/2,y=d-f,_=v-p,b=y*y+_*_,x=r-a,w=f*v-d*p,k=(0>_?-1:1)*Math.sqrt(Math.max(0,x*x*b-w*w)),M=(w*_-y*k)/b,C=(-w*y-_*k)/b,T=(w*_+y*k)/b,S=(-w*y+_*k)/b,D=M-m,A=C-g,E=T-m,$=S-g;return D*D+A*A>E*E+$*$&&(M=T,C=S),{cx:M,cy:C,x01:-c,y01:-h,x11:M*(r/x-1),y11:C*(r/x-1)}}function rt(t){this._context=t}function at(t){return t[0]}function ot(t){return t[1]}function st(t){this._curve=t}function ut(t){function e(e){return new st(t(e))}return e._curve=t,e}function lt(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(ut(t)):e()._curve},t}function ct(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ht(t){this._context=t}function ft(t){this._context=t}function pt(t){this._context=t}function dt(t,e){this._basis=new ht(t),this._beta=e}function vt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function mt(t,e){this._context=t,this._k=(1-e)/6}function gt(t,e){this._context=t,this._k=(1-e)/6}function yt(t,e){this._context=t,this._k=(1-e)/6}function _t(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>gh){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>gh){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}function bt(t,e){this._context=t,this._alpha=e}function xt(t,e){this._context=t,this._alpha=e}function wt(t,e){this._context=t,this._alpha=e}function kt(t){this._context=t}function Mt(t){return 0>t?-1:1}function Ct(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||0>r&&-0),o=(n-t._y1)/(r||0>i&&-0),s=(a*r+o*i)/(i+r);return(Mt(a)+Mt(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Tt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function St(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function Dt(t){this._context=t}function At(t){this._context=new Et(t)}function Et(t){this._context=t}function $t(t){return new Dt(t)}function Nt(t){return new At(t)}function Pt(t){this._context=t}function Ot(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(r[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;i-1>e;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;i>e;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;e>=0;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;i-1>e;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function Ft(t,e){this._context=t,this._t=e}function It(t){return new Ft(t,0)}function zt(t){return new Ft(t,1)}function Rt(t,e){return t[e]}function Ut(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}function jt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Lt(){}function qt(t){var e;return t=(t+"").trim().toLowerCase(),(e=Af.exec(t))?(e=parseInt(e[1],16),new Wt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=Ef.exec(t))?Ht(parseInt(e[1],16)):(e=$f.exec(t))?new Wt(e[1],e[2],e[3],1):(e=Nf.exec(t))?new Wt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pf.exec(t))?Vt(e[1],e[2],e[3],e[4]):(e=Of.exec(t))?Vt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ff.exec(t))?Kt(e[1],e[2]/100,e[3]/100,1):(e=If.exec(t))?Kt(e[1],e[2]/100,e[3]/100,e[4]):zf.hasOwnProperty(t)?Ht(zf[t]):"transparent"===t?new Wt(NaN,NaN,NaN,0):null;
}function Ht(t){return new Wt(t>>16&255,t>>8&255,255&t,1)}function Vt(t,e,n,i){return 0>=i&&(t=e=n=NaN),new Wt(t,e,n,i)}function Bt(t){return t instanceof Lt||(t=qt(t)),t?(t=t.rgb(),new Wt(t.r,t.g,t.b,t.opacity)):new Wt}function Yt(t,e,n,i){return 1===arguments.length?Bt(t):new Wt(t,e,n,null==i?1:i)}function Wt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Kt(t,e,n,i){return 0>=i?t=e=n=NaN:0>=n||n>=1?t=e=NaN:0>=e&&(t=NaN),new Jt(t,e,n,i)}function Gt(t){if(t instanceof Jt)return new Jt(t.h,t.s,t.l,t.opacity);if(t instanceof Lt||(t=qt(t)),!t)return new Jt;if(t instanceof Jt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(i>n):n===a?(i-e)/s+2:(e-n)/s+4,s/=.5>u?a+r:2-a-r,o*=60):s=u>0&&1>u?0:o,new Jt(o,s,u,t.opacity)}function Xt(t,e,n,i){return 1===arguments.length?Gt(t):new Jt(t,e,n,null==i?1:i)}function Jt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Qt(t,e,n){return 255*(60>t?e+(n-e)*t/60:180>t?n:240>t?e+(n-e)*(240-t)/60:e)}function Zt(t){if(t instanceof ee)return new ee(t.l,t.a,t.b,t.opacity);if(t instanceof ue){var e=t.h*Rf;return new ee(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Wt||(t=Bt(t));var n=ae(t.r),i=ae(t.g),r=ae(t.b),a=ne((.4124564*n+.3575761*i+.1804375*r)/Lf),o=ne((.2126729*n+.7151522*i+.072175*r)/qf),s=ne((.0193339*n+.119192*i+.9503041*r)/Hf);return new ee(116*o-16,500*(a-o),200*(o-s),t.opacity)}function te(t,e,n,i){return 1===arguments.length?Zt(t):new ee(t,e,n,null==i?1:i)}function ee(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function ne(t){return t>Wf?Math.pow(t,1/3):t/Yf+Vf}function ie(t){return t>Bf?t*t*t:Yf*(t-Vf)}function re(t){return 255*(.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ae(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function oe(t){if(t instanceof ue)return new ue(t.h,t.c,t.l,t.opacity);t instanceof ee||(t=Zt(t));var e=Math.atan2(t.b,t.a)*Uf;return new ue(0>e?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function se(t,e,n,i){return 1===arguments.length?oe(t):new ue(t,e,n,null==i?1:i)}function ue(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function le(t){if(t instanceof he)return new he(t.h,t.s,t.l,t.opacity);t instanceof Wt||(t=Bt(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(ep*i+Zf*e-tp*n)/(ep+Zf-tp),a=i-r,o=(Qf*(n-r)-Xf*a)/Jf,s=Math.sqrt(o*o+a*a)/(Qf*r*(1-r)),u=s?Math.atan2(o,a)*Uf-120:NaN;return new he(0>u?u+360:u,s,r,t.opacity)}function ce(t,e,n,i){return 1===arguments.length?le(t):new he(t,e,n,null==i?1:i)}function he(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function fe(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}function pe(t,e){return function(n){return t+n*e}}function de(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function ve(t,e){var n=e-t;return n?pe(t,n>180||-180>n?n-360*Math.round(n/360):n):up(isNaN(t)?e:t)}function me(t){return 1===(t=+t)?ge:function(e,n){return n-e?de(e,n,t):up(isNaN(e)?n:e)}}function ge(t,e){var n=e-t;return n?pe(t,n):up(isNaN(t)?e:t)}function ye(t){return function(e){var n,i,r=e.length,a=new Array(r),o=new Array(r),s=new Array(r);for(n=0;r>n;++n)i=Yt(e[n]),a[n]=i.r||0,o[n]=i.g||0,s[n]=i.b||0;return a=t(a),o=t(o),s=t(s),i.opacity=1,function(t){return i.r=a(t),i.g=o(t),i.b=s(t),i+""}}}function _e(t){return function(){return t}}function be(t){return function(e){return t(e)+""}}function xe(t){return"none"===t?wp:(np||(np=document.createElement("DIV"),ip=document.documentElement,rp=document.defaultView),np.style.transform=t,t=rp.getComputedStyle(ip.appendChild(np),null).getPropertyValue("transform"),ip.removeChild(np),t=t.slice(7,-1).split(","),kp(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function we(t){return null==t?wp:(ap||(ap=document.createElementNS("http://www.w3.org/2000/svg","g")),ap.setAttribute("transform",t),(t=ap.transform.baseVal.consolidate())?(t=t.matrix,kp(t.a,t.b,t.c,t.d,t.e,t.f)):wp)}function ke(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}function a(t,i,r,a,o,s){if(t!==r||i!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:dp(t,r)},{i:u-2,x:dp(i,a)})}else(r||a)&&o.push("translate("+r+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:dp(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}function s(t,e,n,a){t!==e?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:dp(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}function u(t,e,n,i,a,o){if(t!==n||e!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:dp(t,n)},{i:s-2,x:dp(e,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}return function(e,n){var i=[],r=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,i,r),o(e.rotate,n.rotate,i,r),s(e.skewX,n.skewX,i,r),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,i,r),e=n=null,function(t){for(var e,n=-1,a=r.length;++n<a;)i[(e=r[n]).i]=e.x(t);return i.join("")}}}function Me(t){return((t=Math.exp(t))+1/t)/2}function Ce(t){return((t=Math.exp(t))-1/t)/2}function Te(t){return((t=Math.exp(2*t))-1)/(t+1)}function Se(t){return function(e,n){var i=t((e=Xt(e)).h,(n=Xt(n)).h),r=ge(e.s,n.s),a=ge(e.l,n.l),o=ge(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=a(t),e.opacity=o(t),e+""}}}function De(t,e){var n=ge((t=te(t)).l,(e=te(e)).l),i=ge(t.a,e.a),r=ge(t.b,e.b),a=ge(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=a(e),t+""}}function Ae(t){return function(e,n){var i=t((e=se(e)).h,(n=se(n)).h),r=ge(e.c,n.c),a=ge(e.l,n.l),o=ge(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=a(t),e.opacity=o(t),e+""}}}function Ee(t){return function e(n){function i(e,i){var r=t((e=ce(e)).h,(i=ce(i)).h),a=ge(e.s,i.s),o=ge(e.l,i.l),s=ge(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}function $e(){for(var t,e=0,n=arguments.length,i={};n>e;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new Ne(i)}function Ne(t){this._=t}function Pe(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function Oe(t,e){for(var n,i=0,r=t.length;r>i;++i)if((n=t[i]).name===e)return n.value}function Fe(t,e,n){for(var i=0,r=t.length;r>i;++i)if(t[i].name===e){t[i]=Rp,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}function Ie(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function ze(t,e){var n=Ie(t);return function(i,r){return e(n(i),r,t)}}function Re(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}function Ue(t){return function(e,n){t(null==e?n:null)}}function je(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Le(t,e){return function(n){return t(n.responseText,e)}}function qe(){return fd||(vd(He),fd=dd.now()+pd)}function He(){fd=0}function Ve(){this._call=this._time=this._next=null}function Be(t,e,n){var i=new Ve;return i.restart(t,e,n),i}function Ye(){qe(),++sd;for(var t,e=Up;e;)(t=fd-e._time)>=0&&e._call.call(null,t),e=e._next;--sd}function We(){fd=(hd=dd.now())+pd,sd=ud=0;try{Ye()}finally{sd=0,Ge(),fd=0}}function Ke(){var t=dd.now(),e=t-hd;e>cd&&(pd-=e,hd=t)}function Ge(){for(var t,e,n=Up,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Up=e);jp=t,Xe(i)}function Xe(t){if(!sd){ud&&(ud=clearTimeout(ud));var e=t-fd;e>24?(1/0>t&&(ud=setTimeout(We,e)),ld&&(ld=clearInterval(ld))):(ld||(ld=setInterval(Ke,cd)),sd=1,vd(We))}}function Je(t,e,n,i){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return n-t>t-e?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,a){var o=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(i>n&&a>0))return o;do o.push(new Date(+n));while(e(n,a),t(n),i>n);return o},r.filter=function(n){return Je(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return yd.setTime(+e),_d.setTime(+i),t(yd),t(_d),Math.floor(n(yd,_d))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t===0}:function(e){return r.count(0,e)%t===0}):r:null}),r}function Qe(t){return Je(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*kd)/Td})}function Ze(t){return Je(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Td})}function tn(t){if(!(e=$v.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",a=e[4]||"",o=!!e[5],s=e[6]&&+e[6],u=!!e[7],l=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(u=!0,c="g"):Ev[c]||(c=""),(o||"0"===n&&"="===i)&&(o=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=a,this.zero=o,this.width=s,this.comma=u,this.precision=l,this.type=c}function en(t){return t}function nn(e){return Pv=Fv(e),t.format=Pv.format,t.formatPrefix=Pv.formatPrefix,Pv}function rn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function an(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function on(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function sn(t){function e(t,e){return function(n){var i,r,a,o=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(r=jv[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(a=e[i])&&(i=a(n,r)),o.push(i),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function n(t,e){return function(n){var r=on(1900),a=i(r,t,n+="",0);if(a!=n.length)return null;if("p"in r&&(r.H=r.H%12+12*r.p),"W"in r||"U"in r){"w"in r||(r.w="W"in r?1:0);var o="Z"in r?an(on(r.y)).getUTCDay():e(on(r.y)).getDay();r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(o+5)%7:r.w+7*r.U-(o+6)%7}return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,an(r)):e(r)}}function i(t,e,n,i){for(var r,a,o=0,s=e.length,u=n.length;s>o;){if(i>=u)return-1;if(r=e.charCodeAt(o++),37===r){if(r=e.charAt(o++),a=q[r in jv?e.charAt(o++):r],!a||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function r(t,e,n){var i=E.exec(e.slice(n));return i?(t.p=$[i[0].toLowerCase()],n+i[0].length):-1}function a(t,e,n){var i=O.exec(e.slice(n));return i?(t.w=F[i[0].toLowerCase()],n+i[0].length):-1}function o(t,e,n){var i=N.exec(e.slice(n));return i?(t.w=P[i[0].toLowerCase()],n+i[0].length):-1}function s(t,e,n){var i=R.exec(e.slice(n));return i?(t.m=U[i[0].toLowerCase()],n+i[0].length):-1}function u(t,e,n){var i=I.exec(e.slice(n));return i?(t.m=z[i[0].toLowerCase()],n+i[0].length):-1}function l(t,e,n){return i(t,w,e,n)}function c(t,e,n){return i(t,k,e,n)}function h(t,e,n){return i(t,M,e,n)}function f(t){return S[t.getDay()]}function p(t){return T[t.getDay()]}function d(t){return A[t.getMonth()]}function v(t){return D[t.getMonth()]}function m(t){return C[+(t.getHours()>=12)]}function g(t){return S[t.getUTCDay()]}function y(t){return T[t.getUTCDay()]}function _(t){return A[t.getUTCMonth()]}function b(t){return D[t.getUTCMonth()]}function x(t){return C[+(t.getUTCHours()>=12)]}var w=t.dateTime,k=t.date,M=t.time,C=t.periods,T=t.days,S=t.shortDays,D=t.months,A=t.shortMonths,E=cn(C),$=hn(C),N=cn(T),P=hn(T),O=cn(S),F=hn(S),I=cn(D),z=hn(D),R=cn(A),U=hn(A),j={a:f,A:p,b:d,B:v,c:null,d:Tn,e:Tn,H:Sn,I:Dn,j:An,L:En,m:$n,M:Nn,p:m,S:Pn,U:On,w:Fn,W:In,x:null,X:null,y:zn,Y:Rn,Z:Un,"%":ti},L={a:g,A:y,b:_,B:b,c:null,d:jn,e:jn,H:Ln,I:qn,j:Hn,L:Vn,m:Bn,M:Yn,p:x,S:Wn,U:Kn,w:Gn,W:Xn,x:null,X:null,y:Jn,Y:Qn,Z:Zn,"%":ti},q={a:a,A:o,b:s,B:u,c:l,d:_n,e:_n,H:xn,I:xn,j:bn,L:Mn,m:yn,M:wn,p:r,S:kn,U:pn,w:fn,W:dn,x:c,X:h,y:mn,Y:vn,Z:gn,"%":Cn};return j.x=e(k,j),j.X=e(M,j),j.c=e(w,j),L.x=e(k,L),L.X=e(M,L),L.c=e(w,L),{format:function(t){var n=e(t+="",j);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",rn);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",L);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,an);return e.toString=function(){return t},e}}}function un(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",a=r.length;return i+(n>a?new Array(n-a+1).join(e)+r:r)}function ln(t){return t.replace(Hv,"\\$&")}function cn(t){return new RegExp("^(?:"+t.map(ln).join("|")+")","i")}function hn(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function fn(t,e,n){var i=Lv.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function pn(t,e,n){var i=Lv.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function dn(t,e,n){var i=Lv.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function vn(t,e,n){var i=Lv.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function mn(t,e,n){var i=Lv.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function gn(t,e,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function yn(t,e,n){var i=Lv.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function _n(t,e,n){var i=Lv.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function bn(t,e,n){var i=Lv.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function xn(t,e,n){var i=Lv.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function wn(t,e,n){var i=Lv.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function kn(t,e,n){var i=Lv.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Mn(t,e,n){var i=Lv.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Cn(t,e,n){var i=qv.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Tn(t,e){return un(t.getDate(),e,2)}function Sn(t,e){return un(t.getHours(),e,2)}function Dn(t,e){return un(t.getHours()%12||12,e,2)}function An(t,e){return un(1+Pd.count(Jd(t),t),e,3)}function En(t,e){return un(t.getMilliseconds(),e,3)}function $n(t,e){return un(t.getMonth()+1,e,2)}function Nn(t,e){return un(t.getMinutes(),e,2)}function Pn(t,e){return un(t.getSeconds(),e,2)}function On(t,e){return un(Fd.count(Jd(t),t),e,2)}function Fn(t){return t.getDay()}function In(t,e){return un(Id.count(Jd(t),t),e,2)}function zn(t,e){return un(t.getFullYear()%100,e,2)}function Rn(t,e){return un(t.getFullYear()%1e4,e,4)}function Un(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+un(e/60|0,"0",2)+un(e%60,"0",2)}function jn(t,e){return un(t.getUTCDate(),e,2)}function Ln(t,e){return un(t.getUTCHours(),e,2)}function qn(t,e){return un(t.getUTCHours()%12||12,e,2)}function Hn(t,e){return un(1+iv.count(xv(t),t),e,3)}function Vn(t,e){return un(t.getUTCMilliseconds(),e,3)}function Bn(t,e){return un(t.getUTCMonth()+1,e,2)}function Yn(t,e){return un(t.getUTCMinutes(),e,2)}function Wn(t,e){return un(t.getUTCSeconds(),e,2)}function Kn(t,e){return un(av.count(xv(t),t),e,2)}function Gn(t){return t.getUTCDay()}function Xn(t,e){return un(ov.count(xv(t),t),e,2)}function Jn(t,e){return un(t.getUTCFullYear()%100,e,2)}function Qn(t,e){return un(t.getUTCFullYear()%1e4,e,4)}function Zn(){return"+0000"}function ti(){return"%"}function ei(e){return Iv=sn(e),t.timeFormat=Iv.format,t.timeParse=Iv.parse,t.utcFormat=Iv.utcFormat,t.utcParse=Iv.utcParse,Iv}function ni(t){return t.toISOString()}function ii(t){var e=new Date(t);return isNaN(e)?null:e}function ri(t){function e(e){var a=e+"",o=n.get(a);if(!o){if(r!==Xv)return r;n.set(a,o=i.push(e))}return t[(o-1)%t.length]}var n=a(),i=[],r=Xv;return t=null==t?[]:Gv.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],n=a();for(var r,o,s=-1,u=t.length;++s<u;)n.has(o=(r=t[s])+"")||n.set(o,i.push(r));return e},e.range=function(n){return arguments.length?(t=Gv.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(r=t,e):r},e.copy=function(){return ri().domain(i).range(t).unknown(r)},e}function ai(){function t(){var t=r().length,i=o[1]<o[0],h=o[i-0],f=o[1-i];e=(f-h)/Math.max(1,t-u+2*l),s&&(e=Math.floor(e)),h+=(f-h-e*(t-u))*c,n=e*(1-u),s&&(h=Math.round(h),n=Math.round(n));var p=Rl(t).map(function(t){return h+e*t});return a(i?p.reverse():p)}var e,n,i=ri().unknown(void 0),r=i.domain,a=i.range,o=[0,1],s=!1,u=0,l=0,c=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(r(e),t()):r()},i.range=function(e){return arguments.length?(o=[+e[0],+e[1]],t()):o.slice()},i.rangeRound=function(e){return o=[+e[0],+e[1]],s=!0,t()},i.bandwidth=function(){return n},i.step=function(){return e},i.round=function(e){return arguments.length?(s=!!e,t()):s},i.padding=function(e){return arguments.length?(u=l=Math.max(0,Math.min(1,e)),t()):u},i.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},i.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},i.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},i.copy=function(){return ai().domain(r()).range(o).round(s).paddingInner(u).paddingOuter(l).align(c)},t()}function oi(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return oi(e())},t}function si(){return oi(ai().paddingInner(1))}function ui(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Jv(e)}function li(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return e>=t?0:t>=n?1:i(t)}}}function ci(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return 0>=t?e:t>=1?n:i(t)}}}function hi(t,e,n,i){var r=t[0],a=t[1],o=e[0],s=e[1];return r>a?(r=n(a,r),o=i(s,o)):(r=n(r,a),o=i(o,s)),function(t){return o(r(t))}}function fi(t,e,n,i){var r=Math.min(t.length,e.length)-1,a=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)a[s]=n(t[s],t[s+1]),o[s]=i(e[s],e[s+1]);return function(e){var n=Tl(t,e,1,r)-1;return o[n](a[n](e))}}function pi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function di(t,e){function n(){return r=Math.min(s.length,u.length)>2?fi:hi,a=o=null,i}function i(e){return(a||(a=r(s,u,c?li(t):t,l)))(+e)}var r,a,o,s=Zv,u=Zv,l=_p,c=!1;return i.invert=function(t){return(o||(o=r(u,s,ui,c?ci(e):e)))(+t)},i.domain=function(t){return arguments.length?(s=Kv.call(t,Qv),n()):s.slice()},i.range=function(t){return arguments.length?(u=Gv.call(t),n()):u.slice()},i.rangeRound=function(t){return u=Gv.call(t),l=bp,n()},i.clamp=function(t){return arguments.length?(c=!!t,n()):c},i.interpolate=function(t){return arguments.length?(l=t,n()):l},n()}function vi(t){var e=t.domain;return t.ticks=function(t){var n=e();return ql(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return tm(e(),t,n)},t.nice=function(i){var r=e(),a=r.length-1,o=null==i?10:i,s=r[0],u=r[a],l=n(s,u,o);return l&&(l=n(Math.floor(s/l)*l,Math.ceil(u/l)*l,o),r[0]=Math.floor(s/l)*l,r[a]=Math.ceil(u/l)*l,e(r)),t},t}function mi(){var t=di(ui,dp);return t.copy=function(){return pi(t,mi())},vi(t)}function gi(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Kv.call(n,Qv),t):e.slice()},t.copy=function(){return gi().domain(e)},vi(t)}function yi(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Jv(e)}function _i(t,e){return 0>t?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function bi(t){return isFinite(t)?+("1e"+t):0>t?0:t}function xi(t){return 10===t?bi:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function wi(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function ki(t){return function(e){return-t(-e)}}function Mi(){function e(){return a=wi(r),o=xi(r),i()[0]<0&&(a=ki(a),o=ki(o)),n}var n=di(yi,_i).domain([1,10]),i=n.domain,r=10,a=wi(10),o=xi(10);return n.base=function(t){return arguments.length?(r=+t,e()):r},n.domain=function(t){return arguments.length?(i(t),e()):i()},n.ticks=function(t){var e,n=i(),s=n[0],u=n[n.length-1];(e=s>u)&&(f=s,s=u,u=f);var l,c,h,f=a(s),p=a(u),d=null==t?10:+t,v=[];if(!(r%1)&&d>p-f){if(f=Math.round(f)-1,p=Math.round(p)+1,s>0){for(;p>f;++f)for(c=1,l=o(f);r>c;++c)if(h=l*c,!(s>h)){if(h>u)break;v.push(h)}}else for(;p>f;++f)for(c=r-1,l=o(f);c>=1;--c)if(h=l*c,!(s>h)){if(h>u)break;v.push(h)}}else v=ql(f,p,Math.min(p-f,d)).map(o);return e?v.reverse():v},n.tickFormat=function(e,i){if(null==i&&(i=10===r?".0e":","),"function"!=typeof i&&(i=t.format(i)),e===1/0)return i;null==e&&(e=10);var s=Math.max(1,r*e/n.ticks().length);return function(t){var e=t/o(Math.round(a(t)));return r-.5>e*r&&(e*=r),s>=e?i(t):""}},n.nice=function(){return i(em(i(),{floor:function(t){return o(Math.floor(a(t)))},ceil:function(t){return o(Math.ceil(a(t)))}}))},n.copy=function(){return pi(n,Mi().base(r))},n}function Ci(t,e){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}function Ti(){function t(t,e){return(e=Ci(e,n)-(t=Ci(t,n)))?function(i){return(Ci(i,n)-t)/e}:Jv(e)}function e(t,e){return e=Ci(e,n)-(t=Ci(t,n)),function(i){return Ci(t+e*i,1/n)}}var n=1,i=di(t,e),r=i.domain;return i.exponent=function(t){return arguments.length?(n=+t,r(r())):n},i.copy=function(){return pi(i,Ti().exponent(n))},vi(i)}function Si(){return Ti().exponent(.5)}function Di(){function t(){var t=0,a=Math.max(1,i.length);for(r=new Array(a-1);++t<a;)r[t-1]=Bl(n,t/a);return e}function e(t){return isNaN(t=+t)?void 0:i[Tl(r,t)]}var n=[],i=[],r=[];return e.invertExtent=function(t){var e=i.indexOf(t);return 0>e?[NaN,NaN]:[e>0?r[e-1]:n[0],e<r.length?r[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var i,r=0,a=e.length;a>r;++r)i=e[r],null==i||isNaN(i=+i)||n.push(i);return n.sort(kl),t()},e.range=function(e){return arguments.length?(i=Gv.call(e),t()):i.slice()},e.quantiles=function(){return r.slice()},e.copy=function(){return Di().domain(n).range(i)},e}function Ai(){function t(t){return t>=t?o[Tl(a,t,0,r)]:void 0}function e(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*i-(e-r)*n)/(r+1);return t}var n=0,i=1,r=1,a=[.5],o=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e()):[n,i]},t.range=function(t){return arguments.length?(r=(o=Gv.call(t)).length-1,e()):o.slice()},t.invertExtent=function(t){var e=o.indexOf(t);return 0>e?[NaN,NaN]:1>e?[n,a[0]]:e>=r?[a[r-1],i]:[a[e-1],a[e]]},t.copy=function(){return Ai().domain([n,i]).range(o)},vi(t)}function Ei(){function t(t){return t>=t?n[Tl(e,t,0,i)]:void 0}var e=[.5],n=[0,1],i=1;return t.domain=function(r){return arguments.length?(e=Gv.call(r),i=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(r){return arguments.length?(n=Gv.call(r),i=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},t.copy=function(){return Ei().domain(e).range(n)},t}function $i(t){return new Date(t)}function Ni(t){return t instanceof Date?+t:+new Date(+t)}function Pi(t,e,i,r,a,o,s,u,l){function c(n){return(s(n)<n?v:o(n)<n?m:a(n)<n?g:r(n)<n?y:e(n)<n?i(n)<n?_:b:t(n)<n?x:w)(n)}function h(e,i,r,a){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(r-i)/e,s=Ml(function(t){return t[2]}).right(k,o);s===k.length?(a=n(i/um,r/um,e),e=t):s?(s=k[o/k[s-1][2]<k[s][2]/o?s-1:s],a=s[1],e=s[0]):(a=n(i,r,e),e=u)}return null==a?e:e.every(a)}var f=di(ui,dp),p=f.invert,d=f.domain,v=l(".%L"),m=l(":%S"),g=l("%I:%M"),y=l("%I %p"),_=l("%a %d"),b=l("%b %d"),x=l("%B"),w=l("%Y"),k=[[s,1,nm],[s,5,5*nm],[s,15,15*nm],[s,30,30*nm],[o,1,im],[o,5,5*im],[o,15,15*im],[o,30,30*im],[a,1,rm],[a,3,3*rm],[a,6,6*rm],[a,12,12*rm],[r,1,am],[r,2,2*am],[i,1,om],[e,1,sm],[e,3,3*sm],[t,1,um]];return f.invert=function(t){return new Date(p(t))},f.domain=function(t){return arguments.length?d(Kv.call(t,Ni)):d().map($i)},f.ticks=function(t,e){var n,i=d(),r=i[0],a=i[i.length-1],o=r>a;return o&&(n=r,r=a,a=n),n=h(t,r,a,e),n=n?n.range(r,a+1):[],o?n.reverse():n},f.tickFormat=function(t,e){return null==e?c:l(e)},f.nice=function(t,e){var n=d();return(t=h(t,n[0],n[n.length-1],e))?d(em(n,t)):f},f.copy=function(){return pi(f,Pi(t,e,i,r,a,o,s,u,l))},f}function Oi(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Fi(t){function e(e){var a=(e-n)/(i-n);return t(r?Math.max(0,Math.min(1,a)):a)}var n=0,i=1,r=!1;return e.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.clamp=function(t){return arguments.length?(r=!!t,e):r},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return Fi(t).domain([n,i]).clamp(r)},vi(e)}function Ii(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Cm&&e.documentElement.namespaceURI===Cm?e.createElement(t):e.createElementNS(n,t)}}function zi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ri(){return new Ui}function Ui(){this._="@"+(++Am).toString(36)}function ji(t,e,n){return t=Li(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Li(e,n,i){return function(r){var a=t.event;t.event=r;try{e.call(this,this.__data__,n,i)}finally{t.event=a}}}function qi(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function Hi(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,a=e.length;a>i;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Vi(t,e,n){var i=Om.hasOwnProperty(t.type)?ji:Li;return function(r,a,o){var s,u=this.__on,l=i(e,a,o);if(u)for(var c=0,h=u.length;h>c;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function Bi(e,n,i,r){var a=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,r)}finally{t.event=a}}function Yi(){}function Wi(){return[]}function Ki(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Gi(t,e,n,i,r,a){for(var o,s=0,u=e.length,l=a.length;l>s;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Ki(t,a[s]);for(;u>s;++s)(o=e[s])&&(r[s]=o)}function Xi(t,e,n,i,r,a,o){var s,u,l,c={},h=e.length,f=a.length,p=new Array(h);for(s=0;h>s;++s)(u=e[s])&&(p[s]=l=Km+o.call(u,u.__data__,s,e),l in c?r[s]=u:c[l]=u);for(s=0;f>s;++s)l=Km+o.call(t,a[s],s,a),(u=c[l])?(i[s]=u,u.__data__=a[s],c[l]=null):n[s]=new Ki(t,a[s]);for(s=0;h>s;++s)(u=e[s])&&c[p[s]]===u&&(r[s]=u)}function Ji(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function Qi(t){return function(){this.removeAttribute(t)}}function Zi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tr(t,e){return function(){this.setAttribute(t,e)}}function er(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ir(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function rr(t){return function(){this.style.removeProperty(t)}}function ar(t,e,n){return function(){this.style.setProperty(t,e,n)}}function or(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function sr(t){return function(){delete this[t]}}function ur(t,e){return function(){this[t]=e}}function lr(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function cr(t){return t.trim().split(/^|\s+/)}function hr(t){return t.classList||new fr(t)}function fr(t){this._node=t,this._names=cr(t.getAttribute("class")||"")}function pr(t,e){for(var n=hr(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function dr(t,e){for(var n=hr(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function vr(t){return function(){pr(this,t)}}function mr(t){return function(){dr(this,t)}}function gr(t,e){return function(){(e.apply(this,arguments)?pr:dr)(this,t)}}function yr(){this.textContent=""}function _r(t){return function(){this.textContent=t}}function br(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function xr(){this.innerHTML=""}function wr(t){return function(){this.innerHTML=t}}function kr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Mr(){this.nextSibling&&this.parentNode.appendChild(this)}function Cr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tr(){return null}function Sr(){var t=this.parentNode;t&&t.removeChild(this)}function Dr(t,e,n){var i=sg(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ar(t,e){return function(){return Dr(this,t,e)}}function Er(t,e){return function(){return Dr(this,t,e.apply(this,arguments))}}function $r(t,e){this._groups=t,this._parents=e}function Nr(){return new $r([[document.documentElement]],bg)}function Pr(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Sg)throw new Error("too late");return n}function Or(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>Ag)throw new Error("too late");return n}function Fr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function Ir(t,e,n){function i(t){n.state=Dg,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)}function r(i){var l,c,h,f;if(n.state!==Dg)return o();for(l in u)if(f=u[l],f.name===n.name){if(f.state===Eg)return md(r);f.state===$g?(f.state=Pg,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete u[l]):e>+l&&(f.state=Pg,f.timer.stop(),delete u[l])}if(md(function(){n.state===Eg&&(n.state=$g,n.timer.restart(a,n.delay,n.time),a(i))}),n.state=Ag,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ag){for(n.state=Eg,s=new Array(h=n.tween.length),l=0,c=-1;h>l;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=Ng,1),r=-1,a=s.length;++r<a;)s[r].call(null,i);n.state===Ng&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=Pg,n.timer.stop(),delete u[e];for(var i in u)return;delete t.__transition}var s,u=t.__transition;u[e]=n,n.timer=Be(i,0,n.time)}function zr(t,e){var n,i;return function(){var r=Or(this,t),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;s>o;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function Rr(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var a=Or(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},u=0,l=r.length;l>u;++u)if(r[u].name===e){r[u]=s;break}u===l&&r.push(s)}a.tween=r}}function Ur(t,e,n){var i=t._id;return t.each(function(){var t=Or(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Fr(t,i).value[e]}}function jr(t){return function(){this.removeAttribute(t)}}function Lr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qr(t,e,n){var i,r;return function(){var a=this.getAttribute(t);
return a===n?null:a===i?r:r=e(i=a,n)}}function Hr(t,e,n){var i,r;return function(){var a=this.getAttributeNS(t.space,t.local);return a===n?null:a===i?r:r=e(i=a,n)}}function Vr(t,e,n){var i,r,a;return function(){var o,s=n(this);return null==s?void this.removeAttribute(t):(o=this.getAttribute(t),o===s?null:o===i&&s===r?a:a=e(i=o,r=s))}}function Br(t,e,n){var i,r,a;return function(){var o,s=n(this);return null==s?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),o===s?null:o===i&&s===r?a:a=e(i=o,r=s))}}function Yr(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}function Wr(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n}function Kr(t,e){return function(){Pr(this,t).delay=+e.apply(this,arguments)}}function Gr(t,e){return e=+e,function(){Pr(this,t).delay=e}}function Xr(t,e){return function(){Or(this,t).duration=+e.apply(this,arguments)}}function Jr(t,e){return e=+e,function(){Or(this,t).duration=e}}function Qr(t,e){if("function"!=typeof e)throw new Error;return function(){Or(this,t).ease=e}}function Zr(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function ta(t,e,n){var i,r,a=Zr(e)?Pr:Or;return function(){var o=a(this,t),s=o.on;s!==i&&(r=(i=s).copy()).on(e,n),o.on=r}}function ea(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function na(t,e){var n,i,r;return function(){var a=sg(this).getComputedStyle(this,null),o=a.getPropertyValue(t),s=(this.style.removeProperty(t),a.getPropertyValue(t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function ia(t){return function(){this.style.removeProperty(t)}}function ra(t,e,n){var i,r;return function(){var a=sg(this).getComputedStyle(this,null).getPropertyValue(t);return a===n?null:a===i?r:r=e(i=a,n)}}function aa(t,e,n){var i,r,a;return function(){var o=sg(this).getComputedStyle(this,null),s=o.getPropertyValue(t),u=n(this);return null==u&&(this.style.removeProperty(t),u=o.getPropertyValue(t)),s===u?null:s===i&&u===r?a:a=e(i=s,r=u)}}function oa(t,e,n){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.style.setProperty(t,r(e),n)}}return i._value=e,i}function sa(t){return function(){this.textContent=t}}function ua(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function la(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ca(t){return Nr().transition(t)}function ha(){return++ny}function fa(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ry.time=qe(),ry;return n}function pa(t,e,n){var i=t(n);return"translate("+(isFinite(i)?i:e(n))+",0)"}function da(t,e,n){var i=t(n);return"translate(0,"+(isFinite(i)?i:e(n))+")"}function va(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function ma(){return!this.__axis}function ga(t,e){function n(n){var l,c=null==r?e.ticks?e.ticks.apply(e,i):e.domain():r,h=null==a?e.tickFormat?e.tickFormat.apply(e,i):ly:a,f=Math.max(o,0)+u,p=t===cy||t===fy?pa:da,d=e.range(),v=d[0]+.5,m=d[d.length-1]+.5,g=(e.bandwidth?va:ly)(e.copy()),y=n.selection?n.selection():n,_=y.selectAll(".domain").data([null]),b=y.selectAll(".tick").data(c,e).order(),x=b.exit(),w=b.enter().append("g").attr("class","tick"),k=b.select("line"),M=b.select("text"),C=t===cy||t===py?-1:1,T=t===py||t===hy?(l="x","y"):(l="y","x");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),b=b.merge(w),k=k.merge(w.append("line").attr("stroke","#000").attr(l+"2",C*o).attr(T+"1",.5).attr(T+"2",.5)),M=M.merge(w.append("text").attr("fill","#000").attr(l,C*f).attr(T,.5).attr("dy",t===cy?"0em":t===fy?"0.71em":"0.32em")),n!==y&&(_=_.transition(n),b=b.transition(n),k=k.transition(n),M=M.transition(n),x=x.transition(n).attr("opacity",dy).attr("transform",function(t){return p(g,this.parentNode.__axis||g,t)}),w.attr("opacity",dy).attr("transform",function(t){return p(this.parentNode.__axis||g,g,t)})),x.remove(),_.attr("d",t===py||t==hy?"M"+C*s+","+v+"H0.5V"+m+"H"+C*s:"M"+v+","+C*s+"V0.5H"+m+"V"+C*s),b.attr("opacity",1).attr("transform",function(t){return p(g,g,t)}),k.attr(l+"2",C*o),M.attr(l,C*f).text(h),y.filter(ma).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===hy?"start":t===py?"end":"middle"),y.each(function(){this.__axis=g})}var i=[],r=null,a=null,o=6,s=6,u=3;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return i=uy.call(arguments),n},n.tickArguments=function(t){return arguments.length?(i=null==t?[]:uy.call(t),n):i.slice()},n.tickValues=function(t){return arguments.length?(r=null==t?null:uy.call(t),n):r&&r.slice()},n.tickFormat=function(t){return arguments.length?(a=t,n):a},n.tickSize=function(t){return arguments.length?(o=s=+t,n):o},n.tickSizeInner=function(t){return arguments.length?(o=+t,n):o},n.tickSizeOuter=function(t){return arguments.length?(s=+t,n):s},n.tickPadding=function(t){return arguments.length?(u=+t,n):u},n}function ya(t){return ga(cy,t)}function _a(t){return ga(hy,t)}function ba(t){return ga(fy,t)}function xa(t){return ga(py,t)}function wa(t,e){return t.parent===e.parent?1:2}function ka(t){return t.reduce(Ma,0)/t.length}function Ma(t,e){return t+e.x}function Ca(t){return 1+t.reduce(Ta,0)}function Ta(t,e){return Math.max(t,e.y)}function Sa(t){for(var e;e=t.children;)t=e[0];return t}function Da(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Aa(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function Ea(t,e){var n,i,r,a,o,s=new Fa(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=Na);n=l.pop();)if(u&&(n.value=+n.data.value),(r=e(n.data))&&(o=r.length))for(n.children=new Array(o),a=o-1;a>=0;--a)l.push(i=n.children[a]=new Fa(r[a])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(Oa)}function $a(){return Ea(this).eachBefore(Pa)}function Na(t){return t.children}function Pa(t){t.data=t.data.data}function Oa(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Fa(t){this.data=t,this.depth=this.height=0,this.parent=null}function Ia(t){this._=t,this.next=null}function za(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r-e.r;return r*r+1e-6>n*n+i*i}function Ra(t,e){var n,i,r,a=null,o=t.head;switch(e.length){case 1:n=Ua(e[0]);break;case 2:n=ja(e[0],e[1]);break;case 3:n=La(e[0],e[1],e[2])}for(;o;)r=o._,i=o.next,n&&za(n,r)?a=o:(a?(t.tail=a,a.next=null):t.head=t.tail=null,e.push(r),n=Ra(t,e),e.pop(),t.head?(o.next=t.head,t.head=o):(o.next=null,t.head=t.tail=o),a=t.tail,a.next=i),o=i;return t.tail=a,n}function Ua(t){return{x:t.x,y:t.y,r:t.r}}function ja(t,e){var n=t.x,i=t.y,r=t.r,a=e.x,o=e.y,s=e.r,u=a-n,l=o-i,c=s-r,h=Math.sqrt(u*u+l*l);return{x:(n+a+u/h*c)/2,y:(i+o+l/h*c)/2,r:(h+r+s)/2}}function La(t,e,n){var i=t.x,r=t.y,a=t.r,o=e.x,s=e.y,u=e.r,l=n.x,c=n.y,h=n.r,f=2*(i-o),p=2*(r-s),d=2*(u-a),v=i*i+r*r-a*a-o*o-s*s+u*u,m=2*(i-l),g=2*(r-c),y=2*(h-a),_=i*i+r*r-a*a-l*l-c*c+h*h,b=m*p-f*g,x=(p*_-g*v)/b-i,w=(g*d-p*y)/b,k=(m*v-f*_)/b-r,M=(f*y-m*d)/b,C=w*w+M*M-1,T=2*(x*w+k*M+a),S=x*x+k*k-a*a,D=(-T-Math.sqrt(T*T-4*C*S))/(2*C);return{x:x+w*D+i,y:k+M*D+r,r:D}}function qa(t,e,n){var i=t.x,r=t.y,a=e.r+n.r,o=t.r+n.r,s=e.x-i,u=e.y-r,l=s*s+u*u;if(l){var c=.5+((o*=o)-(a*=a))/(2*l),h=Math.sqrt(Math.max(0,2*a*(o+l)-(o-=l)*o-a*a))/(2*l);n.x=i+c*s+h*u,n.y=r+c*u-h*s}else n.x=i+o,n.y=r}function Ha(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r>n*n+i*i}function Va(t,e,n){var i=t.x-e,r=t.y-n;return i*i+r*r}function Ba(t){this._=t,this.next=null,this.previous=null}function Ya(t){if(!(r=t.length))return 0;var e,n,i,r;if(e=t[0],e.x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;qa(n,e,i=t[2]);var a,o,s,u,l,c,h,f=e.r*e.r,p=n.r*n.r,d=i.r*i.r,v=f+p+d,m=f*e.x+p*n.x+d*i.x,g=f*e.y+p*n.y+d*i.y;e=new Ba(e),n=new Ba(n),i=new Ba(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;r>s;++s){if(qa(e._,n._,i=t[s]),i=new Ba(i),(l=e.previous)===(u=n.next)){if(Ha(u._,i._)){e=n,n=u,--s;continue t}}else{c=u._.r,h=l._.r;do if(h>=c){if(Ha(u._,i._)){n=u,e.next=n,n.previous=e,--s;continue t}u=u.next,c+=u._.r}else{if(Ha(l._,i._)){e=l,e.next=n,n.previous=e,--s;continue t}l=l.previous,h+=l._.r}while(u!==l.next)}for(i.previous=e,i.next=n,e.next=n.previous=n=i,v+=d=i._.r*i._.r,m+=d*i._.x,g+=d*i._.y,f=Va(e._,a=m/v,o=g/v);(i=i.next)!==n;)(d=Va(i._,a,o))<f&&(e=i,f=d);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Sy(e),s=0;r>s;++s)e=t[s],e.x-=i.x,e.y-=i.y;return i.r}function Wa(t){return null==t?null:Ka(t)}function Ka(t){if("function"!=typeof t)throw new Error;return t}function Ga(){return 0}function Xa(t){return Math.sqrt(t.value)}function Ja(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Qa(t,e){return function(n){if(i=n.children){var i,r,a,o=i.length,s=t(n)*e||0;if(s)for(r=0;o>r;++r)i[r].r+=s;if(a=Ya(i),s)for(r=0;o>r;++r)i[r].r-=s;n.r=a+s}}}function Za(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function to(t){return t.id}function eo(t){return t.parentId}function no(t,e){return t.parent===e.parent?1:2}function io(t){var e=t.children;return e?e[0]:t.t}function ro(t){var e=t.children;return e?e[e.length-1]:t.t}function ao(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function oo(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)e=r[a],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function so(t,e,n){return t.a.parent===e.parent?t.a:n}function uo(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function lo(t){for(var e,n,i,r,a,o=new uo(t,0),s=[o];e=s.pop();)if(i=e._.children)for(e.children=new Array(a=i.length),r=a-1;r>=0;--r)s.push(n=e.children[r]=new uo(i[r],r)),n.parent=e;return(o.parent=new uo(null,0)).children=[o],o}function co(t,e,n,i,r,a){for(var o,s,u,l,c,h,f,p,d,v,m,g=[],y=e.children,_=0,b=0,x=y.length,w=e.value;x>_;){u=r-n,l=a-i;do c=y[b++].value;while(!c&&x>b);for(h=f=c,v=Math.max(l/u,u/l)/(w*t),m=c*c*v,d=Math.max(f/m,m/h);x>b;++b){if(c+=s=y[b].value,h>s&&(h=s),s>f&&(f=s),m=c*c*v,p=Math.max(f/m,m/h),p>d){c-=s;break}d=p}g.push(o={value:c,dice:l>u,children:y.slice(_,b)}),o.dice?Ny(o,n,i,r,w?i+=l*c/w:a):Uy(o,n,i,w?n+=u*c/w:r,a),w-=c,_=b}return g}function ho(t){return t.x+t.vx}function fo(t){return t.y+t.vy}function po(t){return t.index}function vo(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function mo(t){return t.x}function go(t){return t.y}function yo(){t.event.stopImmediatePropagation()}function _o(t,e){var n=t.document.documentElement,i=xg(t).on("dragstart.drag",null);e&&(i.on("click.drag",i_,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function bo(t,e,n,i,r,a,o,s,u,l){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=a,this.y=o,this.dx=s,this.dy=u,this._=l}function xo(){return!t.event.button}function wo(){return this.parentNode}function ko(e){return null==e?{x:t.event.x,y:t.event.y}:e}function Mo(t){return t[0]}function Co(t){return t[1]}function To(){this._=null}function So(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Do(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ao(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Eo(t){for(;t.L;)t=t.L;return t}function $o(t,e,n,i){var r=[null,null],a=f_.push(r)-1;return r.left=t,r.right=e,n&&Po(r,t,e,n),i&&Po(r,e,t,i),c_[t.index].halfedges.push(a),c_[e.index].halfedges.push(a),r}function No(t,e,n){var i=[e,n];return i.left=t,i}function Po(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Oo(t,e,n,i,r){var a,o=t[0],s=t[1],u=o[0],l=o[1],c=s[0],h=s[1],f=0,p=1,d=c-u,v=h-l;if(a=e-u,d||!(a>0)){if(a/=d,0>d){if(f>a)return;p>a&&(p=a)}else if(d>0){if(a>p)return;a>f&&(f=a)}if(a=i-u,d||!(0>a)){if(a/=d,0>d){if(a>p)return;a>f&&(f=a)}else if(d>0){if(f>a)return;p>a&&(p=a)}if(a=n-l,v||!(a>0)){if(a/=v,0>v){if(f>a)return;p>a&&(p=a)}else if(v>0){if(a>p)return;a>f&&(f=a)}if(a=r-l,v||!(0>a)){if(a/=v,0>v){if(a>p)return;a>f&&(f=a)}else if(v>0){if(f>a)return;p>a&&(p=a)}return f>0||1>p?(f>0&&(t[0]=[u+f*d,l+f*v]),1>p&&(t[1]=[u+p*d,l+p*v]),!0):!0}}}}}function Fo(t,e,n,i,r){var a=t[1];if(a)return!0;var o,s,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],v=(h+p)/2,m=(f+d)/2;if(d===f){if(e>v||v>=i)return;if(h>p){if(u){if(u[1]>=r)return}else u=[v,n];a=[v,r]}else{if(u){if(u[1]<n)return}else u=[v,r];a=[v,n]}}else if(o=(h-p)/(d-f),s=m-o*v,-1>o||o>1)if(h>p){if(u){if(u[1]>=r)return}else u=[(n-s)/o,n];a=[(r-s)/o,r]}else{if(u){if(u[1]<n)return}else u=[(r-s)/o,r];a=[(n-s)/o,n]}else if(d>f){if(u){if(u[0]>=i)return}else u=[e,o*e+s];a=[i,o*i+s]}else{if(u){if(u[0]<e)return}else u=[i,o*i+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}function Io(t,e,n,i){for(var r,a=f_.length;a--;)Fo(r=f_[a],t,e,n,i)&&Oo(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>v_||Math.abs(r[0][1]-r[1][1])>v_)||delete f_[a]}function zo(t){return c_[t.index]={site:t,halfedges:[]}}function Ro(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Uo(t,e){return e[+(e.left!==t.site)]}function jo(t,e){return e[+(e.left===t.site)]}function Lo(){for(var t,e,n,i,r=0,a=c_.length;a>r;++r)if((t=c_[r])&&(i=(e=t.halfedges).length)){var o=new Array(i),s=new Array(i);for(n=0;i>n;++n)o[n]=n,s[n]=Ro(t,f_[e[n]]);for(o.sort(function(t,e){return s[e]-s[t]}),n=0;i>n;++n)s[n]=e[o[n]];for(n=0;i>n;++n)e[n]=s[n]}}function qo(t,e,n,i){var r,a,o,s,u,l,c,h,f,p,d,v,m=c_.length,g=!0;for(r=0;m>r;++r)if(a=c_[r]){for(o=a.site,u=a.halfedges,s=u.length;s--;)f_[u[s]]||u.splice(s,1);for(s=0,l=u.length;l>s;)p=jo(a,f_[u[s]]),d=p[0],v=p[1],c=Uo(a,f_[u[++s%l]]),h=c[0],f=c[1],(Math.abs(d-h)>v_||Math.abs(v-f)>v_)&&(u.splice(s,0,f_.push(No(o,p,Math.abs(d-t)<v_&&i-v>v_?[t,Math.abs(h-t)<v_?f:i]:Math.abs(v-i)<v_&&n-d>v_?[Math.abs(f-i)<v_?h:n,i]:Math.abs(d-n)<v_&&v-e>v_?[n,Math.abs(h-n)<v_?f:e]:Math.abs(v-e)<v_&&d-t>v_?[Math.abs(f-e)<v_?h:t,e]:null))-1),++l);l&&(g=!1)}if(g){var y,_,b,x=1/0;for(r=0,g=null;m>r;++r)(a=c_[r])&&(o=a.site,y=o[0]-t,_=o[1]-e,b=y*y+_*_,x>b&&(x=b,g=a));if(g){var w=[t,e],k=[t,i],M=[n,i],C=[n,e];g.halfedges.push(f_.push(No(o=g.site,w,k))-1,f_.push(No(o,k,M))-1,f_.push(No(o,M,C))-1,f_.push(No(o,C,w))-1)}}for(r=0;m>r;++r)(a=c_[r])&&(a.halfedges.length||delete c_[r])}function Ho(){So(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vo(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r[0],s=r[1],u=i[0]-o,l=i[1]-s,c=a[0]-o,h=a[1]-s,f=2*(u*h-l*c);if(!(f>=-m_)){var p=u*u+l*l,d=c*c+h*h,v=(h*p-l*d)/f,m=(u*d-c*p)/f,g=p_.pop()||new Ho;g.arc=t,g.site=r,g.x=v+o,g.y=(g.cy=m+s)+Math.sqrt(v*v+m*m),t.circle=g;for(var y=null,_=h_._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}h_.insert(y,g),y||(u_=g)}}}}function Bo(t){var e=t.circle;e&&(e.P||(u_=e.N),h_.remove(e),p_.push(e),So(e),t.circle=null)}function Yo(){So(this),this.edge=this.site=this.circle=null}function Wo(t){var e=d_.pop()||new Yo;return e.site=t,e}function Ko(t){Bo(t),l_.remove(t),d_.push(t),So(t)}function Go(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],a=t.P,o=t.N,s=[t];Ko(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<v_&&Math.abs(i-u.circle.cy)<v_;)a=u.P,s.unshift(u),Ko(u),u=a;s.unshift(u),Bo(u);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<v_&&Math.abs(i-l.circle.cy)<v_;)o=l.N,s.push(l),Ko(l),l=o;s.push(l),Bo(l);var c,h=s.length;for(c=1;h>c;++c)l=s[c],u=s[c-1],Po(l.edge,u.site,l.site,r);u=s[0],l=s[h-1],l.edge=$o(u.site,l.site,null,r),Vo(u),Vo(l)}function Xo(t){for(var e,n,i,r,a=t[0],o=t[1],s=l_._;s;)if(i=Jo(s,o)-a,i>v_)s=s.L;else{if(r=a-Qo(s,o),!(r>v_)){i>-v_?(e=s.P,n=s):r>-v_?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}zo(t);var u=Wo(t);if(l_.insert(e,u),e||n){if(e===n)return Bo(e),n=Wo(e.site),l_.insert(u,n),u.edge=n.edge=$o(e.site,u.site),Vo(e),void Vo(n);if(!n)return void(u.edge=$o(e.site,u.site));Bo(e),Bo(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=n.site,v=d[0]-c,m=d[1]-h,g=2*(f*m-p*v),y=f*f+p*p,_=v*v+m*m,b=[(m*y-p*_)/g+c,(f*_-v*y)/g+h];Po(n.edge,l,d,b),u.edge=$o(l,t,null,b),n.edge=$o(t,d,null,b),Vo(e),Vo(n)}}function Jo(t,e){var n=t.site,i=n[0],r=n[1],a=r-e;if(!a)return i;var o=t.P;if(!o)return-(1/0);n=o.site;var s=n[0],u=n[1],l=u-e;if(!l)return s;var c=s-i,h=1/a-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+r-a/2)))/h+i:(i+s)/2}function Qo(t,e){var n=t.N;if(n)return Jo(n,e);var i=t.site;return i[1]===e?i[0]:1/0}function Zo(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ts(t,e){return e[1]-t[1]||e[0]-t[0]}function es(t,e){var n,i,r,a=t.sort(ts).pop();for(f_=[],c_=new Array(t.length),l_=new To,h_=new To;;)if(r=u_,a&&(!r||a[1]<r.y||a[1]===r.y&&a[0]<r.x))a[0]===n&&a[1]===i||(Xo(a),n=a[0],i=a[1]),a=t.pop();else{if(!r)break;Go(r.arc)}if(Lo(),e){var o=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];Io(o,s,u,l),qo(o,s,u,l)}this.edges=f_,this.cells=c_,l_=h_=f_=c_=null}function ns(t,e,n){this.target=t,this.type=e,this.transform=n}function is(t,e,n){this.k=t,this.x=e,this.y=n}function rs(t){return t.__zoom||__}function as(){t.event.stopImmediatePropagation()}function os(){return!t.event.button}function ss(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function us(){return this.__zoom||__}function ls(){t.event.stopImmediatePropagation()}function cs(t){return{type:t}}function hs(){return!t.event.button}function fs(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ps(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ds(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function vs(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function ms(){return ys(A_)}function gs(){return ys(E_)}function ys(e){function n(t){var n=t.property("__brush",s).selectAll(".overlay").data([cs("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",N_.overlay).merge(n).each(function(){var t=ps(this).extent;xg(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([cs("selection")]).enter().append("rect").attr("class","selection").attr("cursor",N_.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return N_[t.type]}),t.each(i).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",o)}function i(){var t=xg(this),e=ps(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-f/2:e[0][0]-f/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-f/2:e[0][1]-f/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+f:f}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+f:f})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function r(t,e){return t.__brush.emitter||new a(t,e)}function a(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function o(){function n(){var t=Um(M);!I||w||k||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?k=!0:w=!0),R=t,x=!0,M_(),a()}function a(){var t;switch(_=R[0]-z[0],b=R[1]-z[1],T){case T_:case C_:S&&(_=Math.max(N-h,Math.min(O-v,_)),f=h+_,m=v+_),D&&(b=Math.max(P-p,Math.min(F-g,b)),d=p+b,y=g+b);break;case S_:0>S?(_=Math.max(N-h,Math.min(O-h,_)),f=h+_,m=v):S>0&&(_=Math.max(N-v,Math.min(O-v,_)),f=h,m=v+_),0>D?(b=Math.max(P-p,Math.min(F-p,b)),d=p+b,y=g):D>0&&(b=Math.max(P-g,Math.min(F-g,b)),d=p,y=g+b);break;case D_:S&&(f=Math.max(N,Math.min(O,h-_*S)),m=Math.max(N,Math.min(O,v+_*S))),D&&(d=Math.max(P,Math.min(F,p-b*D)),y=Math.max(P,Math.min(F,g+b*D)))}f>m&&(S*=-1,t=h,h=v,v=t,t=f,f=m,m=t,C in P_&&L.attr("cursor",N_[C=P_[C]])),d>y&&(D*=-1,t=p,p=g,g=t,t=d,d=y,y=t,C in O_&&L.attr("cursor",N_[C=O_[C]])),A.selection&&($=A.selection),w&&(f=$[0][0],m=$[1][0]),k&&(d=$[0][1],y=$[1][1]),$[0][0]===f&&$[0][1]===d&&$[1][0]===m&&$[1][1]===y||(A.selection=[[f,d],[m,y]],i.call(M),U.brush())}function o(){if(ls(),t.event.touches){if(t.event.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500),j.on("touchmove.brush touchend.brush touchcancel.brush",null)}else _o(t.event.view,x),q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),L.attr("cursor",N_.overlay),A.selection&&($=A.selection),ds($)&&(A.selection=null,i.call(M)),U.end()}function s(){switch(t.event.keyCode){case 16:I=S&&D;break;case 18:T===S_&&(S&&(v=m-_*S,h=f+_*S),D&&(g=y-b*D,p=d+b*D),T=D_,a());break;case 32:T!==S_&&T!==D_||(0>S?v=m-_:S>0&&(h=f-_),0>D?g=y-b:D>0&&(p=d-b),T=T_,L.attr("cursor",N_.selection),a());break;default:return}M_()}function l(){switch(t.event.keyCode){case 16:I&&(w=k=I=!1,a());break;case 18:T===D_&&(0>S?v=m:S>0&&(h=f),0>D?g=y:D>0&&(p=d),T=S_,a());break;case 32:T===T_&&(t.event.altKey?(S&&(v=m-_*S,h=f+_*S),D&&(g=y-b*D,p=d+b*D),T=D_):(0>S?v=m:S>0&&(h=f),0>D?g=y:D>0&&(p=d),T=S_),L.attr("cursor",N_[C]),a());break;default:return}M_()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return M_()}else if(u)return;if(c.apply(this,arguments)){var h,f,p,d,v,m,g,y,_,b,x,w,k,M=this,C=t.event.target.__data__.type,T="selection"===(t.event.metaKey?C="overlay":C)?C_:t.event.altKey?D_:S_,S=e===E_?null:F_[C],D=e===A_?null:I_[C],A=ps(M),E=A.extent,$=A.selection,N=E[0][0],P=E[0][1],O=E[1][0],F=E[1][1],I=S&&D&&t.event.shiftKey,z=Um(M),R=z,U=r(M,arguments).beforestart();"overlay"===C?A.selection=$=[[h=e===E_?N:z[0],p=e===A_?P:z[1]],[v=e===E_?O:h,g=e===A_?F:p]]:(h=$[0][0],p=$[0][1],v=$[1][0],g=$[1][1]),f=h,d=p,m=v,y=g;var j=xg(M).attr("pointer-events","none"),L=j.selectAll(".overlay").attr("cursor",N_[C]);if(t.event.touches)j.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",o,!0);else{var q=xg(t.event.view).on("keydown.brush",s,!0).on("keyup.brush",l,!0).on("mousemove.brush",n,!0).on("mouseup.brush",o,!0);r_(t.event.view)}ls(),Fg(M),i.call(M),U.start()}}function s(){var t=this.__brush||{selection:null};return t.extent=l.apply(this,arguments),t.dim=e,t}var u,l=fs,c=hs,h=$e(n,"start","brush","end"),f=6;return n.move=function(t,n){t.selection?t.on("start.brush",function(){r(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){r(this,arguments).end()}).tween("brush",function(){function t(t){o.selection=1===t&&ds(l)?null:c(t),i.call(a),s.brush()}var a=this,o=a.__brush,s=r(a,arguments),u=o.selection,l=e.input("function"==typeof n?n.apply(this,arguments):n,o.extent),c=_p(u,l);return u&&l?t:t(1)}):t.each(function(){var t=this,a=arguments,o=t.__brush,s=e.input("function"==typeof n?n.apply(t,a):n,o.extent),u=r(t,a).beforestart();Fg(t),o.selection=null==s||ds(s)?null:s,i.call(t),u.start().brush().end()})},a.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Bi(new k_(n,t,e.output(this.state.selection)),h.apply,h,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(l="function"==typeof t?t:w_([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):l},n.filter=function(t){return arguments.length?(c="function"==typeof t?t:w_(!!t),n):c},n.handleSize=function(t){return arguments.length?(f=+t,n):f},n.on=function(){var t=h.on.apply(h,arguments);return t===h?n:t},n}function _s(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function bs(t){return t.source}function xs(t){return t.target}function ws(t){return t.radius}function ks(t){return t.startAngle}function Ms(t){return t.endAngle}function Cs(){this.reset()}function Ts(t,e,n){var i=t.s=e+n,r=i-e,a=i-r;t.t=e-a+(n-r)}function Ss(t){return t>1?0:-1>t?Ab:Math.acos(t)}function Ds(t){return t>1?Eb:-1>t?-Eb:Math.asin(t)}function As(t){return(t=Hb(t/2))*t}function Es(){}function $s(t,e){t&&Kb.hasOwnProperty(t.type)&&Kb[t.type](t,e)}function Ns(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Ps(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ns(t[n],e,1);e.polygonEnd()}function Os(){Qb.point=Is}function Fs(){zs(G_,X_)}function Is(t,e){Qb.point=zs,G_=t,X_=e,t*=Ob,e*=Ob,J_=t,Q_=Rb(e=e/2+$b),Z_=Hb(e)}function zs(t,e){t*=Ob,e*=Ob,e=e/2+$b;var n=t-J_,i=n>=0?1:-1,r=i*n,a=Rb(e),o=Hb(e),s=Z_*o,u=Q_*a+s*Rb(r),l=s*i*Hb(r);Xb.add(zb(l,u)),J_=t,Q_=a,Z_=o}function Rs(t){return[zb(t[1],t[0]),Ds(t[2])]}function Us(t){var e=t[0],n=t[1],i=Rb(n);return[i*Rb(e),i*Hb(e),Hb(n)]}function js(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ls(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qs(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Hs(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Vs(t){var e=Bb(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Bs(t,e){ub.push(lb=[tb=t,nb=t]),eb>e&&(eb=e),e>ib&&(ib=e)}function Ys(t,e){var n=Us([t*Ob,e*Ob]);if(sb){var i=Ls(sb,n),r=[i[1],-i[0],0],a=Ls(r,i);Vs(a),a=Rs(a);var o,s=t-rb,u=s>0?1:-1,l=a[0]*Pb*u,c=Fb(s)>180;c^(l>u*rb&&u*t>l)?(o=a[1]*Pb,o>ib&&(ib=o)):(l=(l+360)%360-180,c^(l>u*rb&&u*t>l)?(o=-a[1]*Pb,eb>o&&(eb=o)):(eb>e&&(eb=e),e>ib&&(ib=e))),c?rb>t?Qs(tb,t)>Qs(tb,nb)&&(nb=t):Qs(t,nb)>Qs(tb,nb)&&(tb=t):nb>=tb?(tb>t&&(tb=t),t>nb&&(nb=t)):t>rb?Qs(tb,t)>Qs(tb,nb)&&(nb=t):Qs(t,nb)>Qs(tb,nb)&&(tb=t)}else Bs(t,e);sb=n,rb=t}function Ws(){ex.point=Ys}function Ks(){lb[0]=tb,lb[1]=nb,ex.point=Bs,sb=null}function Gs(t,e){if(sb){var n=t-rb;tx.add(Fb(n)>180?n+(n>0?360:-360):n)}else ab=t,ob=e;Qb.point(t,e),Ys(t,e)}function Xs(){Qb.lineStart()}function Js(){Gs(ab,ob),Qb.lineEnd(),Fb(tx)>Sb&&(tb=-(nb=180)),lb[0]=tb,lb[1]=nb,sb=null}function Qs(t,e){return(e-=t)<0?e+360:e}function Zs(t,e){return t[0]-e[0]}function tu(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function eu(t,e){t*=Ob,e*=Ob;var n=Rb(e);nu(n*Rb(t),n*Hb(t),Hb(e))}function nu(t,e,n){++cb,fb+=(t-fb)/cb,pb+=(e-pb)/cb,db+=(n-db)/cb}function iu(){ix.point=ru}function ru(t,e){t*=Ob,e*=Ob;var n=Rb(e);kb=n*Rb(t),Mb=n*Hb(t),Cb=Hb(e),ix.point=au,nu(kb,Mb,Cb)}function au(t,e){t*=Ob,e*=Ob;var n=Rb(e),i=n*Rb(t),r=n*Hb(t),a=Hb(e),o=zb(Bb((o=Mb*a-Cb*r)*o+(o=Cb*i-kb*a)*o+(o=kb*r-Mb*i)*o),kb*i+Mb*r+Cb*a);hb+=o,vb+=o*(kb+(kb=i)),mb+=o*(Mb+(Mb=r)),gb+=o*(Cb+(Cb=a)),nu(kb,Mb,Cb)}function ou(){ix.point=eu}function su(){ix.point=lu}function uu(){cu(xb,wb),ix.point=eu}function lu(t,e){xb=t,wb=e,t*=Ob,e*=Ob,ix.point=cu;var n=Rb(e);kb=n*Rb(t),Mb=n*Hb(t),Cb=Hb(e),nu(kb,Mb,Cb)}function cu(t,e){t*=Ob,e*=Ob;var n=Rb(e),i=n*Rb(t),r=n*Hb(t),a=Hb(e),o=Mb*a-Cb*r,s=Cb*i-kb*a,u=kb*r-Mb*i,l=Bb(o*o+s*s+u*u),c=kb*i+Mb*r+Cb*a,h=l&&-Ss(c)/l,f=zb(l,c);yb+=h*o,_b+=h*s,bb+=h*u,hb+=f,vb+=f*(kb+(kb=i)),mb+=f*(Mb+(Mb=r)),gb+=f*(Cb+(Cb=a)),nu(kb,Mb,Cb)}function hu(t,e){return[t>Ab?t-Nb:-Ab>t?t+Nb:t,e]}function fu(t,e,n){return(t%=Nb)?e||n?ox(du(t),vu(e,n)):du(t):e||n?vu(e,n):hu}function pu(t){return function(e,n){return e+=t,[e>Ab?e-Nb:-Ab>e?e+Nb:e,n]}}function du(t){var e=pu(t);return e.invert=pu(-t),e}function vu(t,e){function n(t,e){var n=Rb(e),s=Rb(t)*n,u=Hb(t)*n,l=Hb(e),c=l*i+s*r;return[zb(u*a-c*o,s*i-l*r),Ds(c*a+u*o)]}var i=Rb(t),r=Hb(t),a=Rb(e),o=Hb(e);return n.invert=function(t,e){var n=Rb(e),s=Rb(t)*n,u=Hb(t)*n,l=Hb(e),c=l*a-u*o;return[zb(u*a+l*o,s*i+c*r),Ds(c*i-s*r)]},n}function mu(t,e,n,i,r,a){if(n){var o=Rb(e),s=Hb(e),u=i*n;null==r?(r=e+i*Nb,a=e-u/2):(r=gu(o,r),a=gu(o,a),(i>0?a>r:r>a)&&(r+=i*Nb));for(var l,c=r;i>0?c>a:a>c;c-=u)l=Rs([o,-s*Rb(c),-s*Hb(c)]),t.point(l[0],l[1])}}function gu(t,e){e=Us(e),e[0]-=t,Vs(e);var n=Ss(-e[1]);return((-e[2]<0?-n:n)+Nb-Sb)%Nb}function yu(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function _u(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function bu(t,e,n,i){function r(r,a){return r>=t&&n>=r&&a>=e&&i>=a}function a(r,a,s,l){var c=0,h=0;if(null==r||(c=o(r,s))!==(h=o(a,s))||u(r,a)<0^s>0){do l.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+s+4)%4)!==h)}else l.point(a[0],a[1])}function o(i,r){return Fb(i[0]-t)<Sb?r>0?0:3:Fb(i[0]-n)<Sb?r>0?2:1:Fb(i[1]-e)<Sb?r>0?1:0:r>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){function u(t,e){r(t,e)&&T.point(t,e)}function l(){for(var e=0,n=0,r=m.length;r>n;++n)for(var a,o,s=m[n],u=1,l=s.length,c=s[0],h=c[0],f=c[1];l>u;++u)a=h,o=f,c=s[u],h=c[0],f=c[1],i>=o?f>i&&(h-a)*(i-o)>(f-o)*(t-a)&&++e:i>=f&&(f-o)*(t-a)>(h-a)*(i-o)&&--e;return e}function c(){T=S,v=[],m=[],C=!0}function h(){var t=l(),e=C&&t,n=(v=Jl(v)).length;(e||n)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&kx(v,s,t,a,o),o.polygonEnd()),T=o,v=m=g=null}function f(){D.point=d,m&&m.push(g=[]),M=!0,k=!1,x=w=NaN}function p(){v&&(d(y,_),b&&k&&S.rejoin(),v.push(S.result())),D.point=u,k&&T.lineEnd()}function d(a,o){var s=r(a,o);if(m&&g.push([a,o]),M)y=a,_=o,b=s,M=!1,s&&(T.lineStart(),T.point(a,o));else if(s&&k)T.point(a,o);else{var u=[x=Math.max(Cx,Math.min(Mx,x)),w=Math.max(Cx,Math.min(Mx,w))],l=[a=Math.max(Cx,Math.min(Mx,a)),o=Math.max(Cx,Math.min(Mx,o))];xx(u,l,t,e,n,i)?(k||(T.lineStart(),T.point(u[0],u[1])),T.point(l[0],l[1]),s||T.lineEnd(),C=!1):s&&(T.lineStart(),T.point(a,o),C=!1)}x=a,w=o,k=s}var v,m,g,y,_,b,x,w,k,M,C,T=o,S=bx(),D={point:u,lineStart:f,lineEnd:p,polygonStart:c,polygonEnd:h};return D}}function xu(){Dx.point=ku,Dx.lineEnd=wu}function wu(){Dx.point=Dx.lineEnd=Es}function ku(t,e){t*=Ob,e*=Ob,sx=t,ux=Hb(e),lx=Rb(e),Dx.point=Mu}function Mu(t,e){t*=Ob,e*=Ob;var n=Hb(e),i=Rb(e),r=Fb(t-sx),a=Rb(r),o=Hb(r),s=i*o,u=lx*n-ux*i*a,l=ux*n+lx*i*a;Sx.add(zb(Bb(s*s+u*u),l)),sx=t,ux=n,lx=i}function Cu(t,e,n){var i=Rl(t,e-Sb,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function Tu(t,e,n){var i=Rl(t,e-Sb,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function Su(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Rl(Ub(a/m)*m,r,m).map(f).concat(Rl(Ub(l/g)*g,u,g).map(p)).concat(Rl(Ub(i/d)*d,n,d).filter(function(t){return Fb(t%m)>Sb}).map(c)).concat(Rl(Ub(s/v)*v,o,v).filter(function(t){return Fb(t%g)>Sb}).map(h))}var n,i,r,a,o,s,u,l,c,h,f,p,d=10,v=d,m=90,g=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(p(u).slice(1),f(r).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],l=+e[0][1],u=+e[1][1],a>r&&(e=a,a=r,r=e),l>u&&(e=l,l=u,u=e),t.precision(y)):[[a,l],[r,u]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],
o=+e[1][1],i>n&&(e=i,i=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(y)):[[i,s],[n,o]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(m=+e[0],g=+e[1],t):[m,g]},t.stepMinor=function(e){return arguments.length?(d=+e[0],v=+e[1],t):[d,v]},t.precision=function(e){return arguments.length?(y=+e,c=Cu(s,o,90),h=Tu(i,n,y),f=Cu(l,u,90),p=Tu(a,r,y),t):y},t.extentMajor([[-180,-90+Sb],[180,90-Sb]]).extentMinor([[-180,-80-Sb],[180,80+Sb]])}function Du(){return Su()()}function Au(){zx.point=Eu}function Eu(t,e){zx.point=$u,cx=fx=t,hx=px=e}function $u(t,e){Ix.add(px*t-fx*e),fx=t,px=e}function Nu(){$u(cx,hx)}function Pu(t,e){Rx>t&&(Rx=t),t>jx&&(jx=t),Ux>e&&(Ux=e),e>Lx&&(Lx=e)}function Ou(t,e){Hx+=t,Vx+=e,++Bx}function Fu(){Qx.point=Iu}function Iu(t,e){Qx.point=zu,Ou(mx=t,gx=e)}function zu(t,e){var n=t-mx,i=e-gx,r=Bb(n*n+i*i);Yx+=r*(mx+t)/2,Wx+=r*(gx+e)/2,Kx+=r,Ou(mx=t,gx=e)}function Ru(){Qx.point=Ou}function Uu(){Qx.point=Lu}function ju(){qu(dx,vx)}function Lu(t,e){Qx.point=qu,Ou(dx=mx=t,vx=gx=e)}function qu(t,e){var n=t-mx,i=e-gx,r=Bb(n*n+i*i);Yx+=r*(mx+t)/2,Wx+=r*(gx+e)/2,Kx+=r,r=gx*t-mx*e,Gx+=r*(mx+t),Xx+=r*(gx+e),Jx+=3*r,Ou(mx=t,gx=e)}function Hu(t){this._context=t}function Vu(){this._string=[]}function Bu(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Yu(t){return t.length>1}function Wu(t,e){return((t=t.x)[0]<0?t[1]-Eb-Sb:Eb-t[1])-((e=e.x)[0]<0?e[1]-Eb-Sb:Eb-e[1])}function Ku(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Ab:-Ab,u=Fb(a-n);Fb(u-Ab)<Sb?(t.point(n,i=(i+o)/2>0?Eb:-Eb),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&u>=Ab&&(Fb(n-r)<Sb&&(n-=r*Sb),Fb(a-s)<Sb&&(a-=s*Sb),i=Gu(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function Gu(t,e,n,i){var r,a,o=Hb(t-n);return Fb(o)>Sb?Ib((Hb(e)*(a=Rb(i))*Hb(n)-Hb(i)*(r=Rb(e))*Hb(t))/(r*a*o)):(e+i)/2}function Xu(t,e,n,i){var r;if(null==t)r=n*Eb,i.point(-Ab,r),i.point(0,r),i.point(Ab,r),i.point(Ab,0),i.point(Ab,-r),i.point(0,-r),i.point(-Ab,-r),i.point(-Ab,0),i.point(-Ab,r);else if(Fb(t[0]-e[0])>Sb){var a=t[0]<e[0]?Ab:-Ab;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}function Ju(t){return function(e){var n=new Qu;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Qu(){}function Zu(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),Gb(n,t.stream(qx));var o=qx.result(),s=Math.min(i/(o[1][0]-o[0][0]),r/(o[1][1]-o[0][1])),u=+e[0][0]+(i-s*(o[1][0]+o[0][0]))/2,l=+e[0][1]+(r-s*(o[1][1]+o[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*s).translate([u,l])}function tl(t,e,n){return Zu(t,[[0,0],e],n)}function el(t){return Ju({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function nl(t,e){function n(i,r,a,o,s,u,l,c,h,f,p,d,v,m){var g=l-i,y=c-r,_=g*g+y*y;if(_>4*e&&v--){var b=o+f,x=s+p,w=u+d,k=Bb(b*b+x*x+w*w),M=Ds(w/=k),C=Fb(Fb(w)-1)<Sb||Fb(a-h)<Sb?(a+h)/2:zb(x,b),T=t(C,M),S=T[0],D=T[1],A=S-i,E=D-r,$=y*A-g*E;($*$/_>e||Fb((g*A+y*E)/_-.5)>.3||sw>o*f+s*p+u*d)&&(n(i,r,a,o,s,u,S,D,C,b/=k,x/=k,w,v,m),m.point(S,D),n(S,D,C,b,x,w,l,c,h,f,p,d,v,m))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){g=NaN,w.point=a,e.lineStart()}function a(i,r){var a=Us([i,r]),o=t(i,r);n(g,y,m,_,b,x,g=o[0],y=o[1],m=i,_=a[0],b=a[1],x=a[2],ow,e),e.point(g,y)}function o(){w.point=i,e.lineEnd()}function s(){r(),w.point=u,w.lineEnd=l}function u(t,e){a(c=t,e),h=g,f=y,p=_,d=b,v=x,w.point=a}function l(){n(g,y,m,_,b,x,h,f,c,p,d,v,ow,e),w.lineEnd=o,o()}var c,h,f,p,d,v,m,g,y,_,b,x,w={point:i,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=r}};return w}}function il(t){return rl(function(){return t})()}function rl(t){function e(t){return t=c(t[0]*Ob,t[1]*Ob),[t[0]*m+s,u-t[1]*m]}function n(t){return t=c.invert((t[0]-s)/m,(u-t[1])/m),t&&[t[0]*Pb,t[1]*Pb]}function i(t,e){return t=o(t,e),[t[0]*m+s,u-t[1]*m]}function r(){c=ox(l=fu(x,w,k),o);var t=o(_,b);return s=g-t[0]*m,u=y+t[1]*m,a()}function a(){return d=v=null,e}var o,s,u,l,c,h,f,p,d,v,m=150,g=480,y=250,_=0,b=0,x=0,w=0,k=0,M=null,C=iw,T=null,S=Ox,D=.5,A=uw(i,D);return e.stream=function(t){return d&&v===t?d:d=lw(C(l,A(S(v=t))))},e.clipAngle=function(t){return arguments.length?(C=+t?rw(M=t*Ob,6*Ob):(M=null,iw),a()):M*Pb},e.clipExtent=function(t){return arguments.length?(S=null==t?(T=h=f=p=null,Ox):bu(T=+t[0][0],h=+t[0][1],f=+t[1][0],p=+t[1][1]),a()):null==T?null:[[T,h],[f,p]]},e.scale=function(t){return arguments.length?(m=+t,r()):m},e.translate=function(t){return arguments.length?(g=+t[0],y=+t[1],r()):[g,y]},e.center=function(t){return arguments.length?(_=t[0]%360*Ob,b=t[1]%360*Ob,r()):[_*Pb,b*Pb]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Ob,w=t[1]%360*Ob,k=t.length>2?t[2]%360*Ob:0,r()):[x*Pb,w*Pb,k*Pb]},e.precision=function(t){return arguments.length?(A=uw(i,D=t*t),a()):Bb(D)},e.fitExtent=function(t,n){return Zu(e,t,n)},e.fitSize=function(t,n){return tl(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function al(t){var e=0,n=Ab/3,i=rl(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ob,n=t[1]*Ob):[e*Pb,n*Pb]},r}function ol(t){function e(t,e){return[t*n,Hb(e)/n]}var n=Rb(t);return e.invert=function(t,e){return[t/n,Ds(e*n)]},e}function sl(t,e){function n(t,e){var n=Bb(a-2*r*Hb(e))/r;return[n*Hb(t*=r),o-n*Rb(t)]}var i=Hb(t),r=(i+Hb(e))/2;if(Fb(r)<Sb)return ol(t);var a=1+i*(2*r-i),o=Bb(a)/r;return n.invert=function(t,e){var n=o-e;return[zb(t,Fb(n))/r*Vb(n),Ds((a-(t*t+n*n)*r*r)/(2*r))]},n}function ul(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function ll(t){return function(e,n){var i=Rb(e),r=Rb(n),a=t(i*r);return[a*r*Hb(e),a*Hb(n)]}}function cl(t){return function(e,n){var i=Bb(e*e+n*n),r=t(i),a=Hb(r),o=Rb(r);return[zb(e*a,i*o),Ds(i&&n*a/i)]}}function hl(t,e){return[t,Lb(Yb((Eb+e)/2))]}function fl(t){var e,n=il(t),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.translate=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.clipExtent=function(t){if(!arguments.length)return e?null:a();if(e=null==t){var o=Ab*i(),s=r();t=[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]}return a(t),n},n.clipExtent(null)}function pl(t){return Yb((Eb+t)/2)}function dl(t,e){function n(t,e){a>0?-Eb+Sb>e&&(e=-Eb+Sb):e>Eb-Sb&&(e=Eb-Sb);var n=a/qb(pl(e),r);return[n*Hb(r*t),a-n*Rb(r*t)]}var i=Rb(t),r=t===e?Hb(t):Lb(i/Rb(e))/Lb(pl(e)/pl(t)),a=i*qb(pl(t),r)/r;return r?(n.invert=function(t,e){var n=a-e,i=Vb(r)*Bb(t*t+n*n);return[zb(t,Fb(n))/r*Vb(n),2*Ib(qb(a/i,1/r))-Eb]},n):hl}function vl(t,e){return[t,e]}function ml(t,e){function n(t,e){var n=a-e,i=r*t;return[n*Hb(i),a-n*Rb(i)]}var i=Rb(t),r=t===e?Hb(t):(i-Rb(e))/(e-t),a=i/r+t;return Fb(r)<Sb?vl:(n.invert=function(t,e){var n=a-e;return[zb(t,Fb(n))/r*Vb(n),a-Vb(r)*Bb(t*t+n*n)]},n)}function gl(t,e){var n=Rb(e),i=Rb(t)*n;return[n*Hb(t)/i,Hb(e)/i]}function yl(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?Ox:Ju({point:function(r,a){this.stream.point(r*t+n,a*e+i)}})}function _l(t,e){return[Rb(e)*Hb(t),Hb(e)]}function bl(t,e){var n=Rb(e),i=1+Rb(t)*n;return[n*Hb(t)/i,Hb(e)/i]}function xl(t,e){return[Lb(Yb((Eb+e)/2)),-t]}var wl="4.4.1",kl=function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN},Ml=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}},Cl=Ml(kl),Tl=Cl.right,Sl=Cl.left,Dl=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},Al=function(t){return null===t?NaN:+t},El=function(t,e){var n,i,r=t.length,a=0,o=0,s=-1,u=0;if(null==e)for(;++s<r;)isNaN(n=Al(t[s]))||(i=n-a,a+=i/++u,o+=i*(n-a));else for(;++s<r;)isNaN(n=Al(e(t[s],s,t)))||(i=n-a,a+=i/++u,o+=i*(n-a));return u>1?o/(u-1):void 0},$l=function(t,e){var n=El(t,e);return n?Math.sqrt(n):n},Nl=function(t,e){var n,i,r,a=-1,o=t.length;if(null==e){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=e(t[a],a,t))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e(t[a],a,t))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},Pl=Array.prototype,Ol=Pl.slice,Fl=Pl.map,Il=function(t){return function(){return t}},zl=function(t){return t},Rl=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):3>r?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a},Ul=Math.sqrt(50),jl=Math.sqrt(10),Ll=Math.sqrt(2),ql=function(t,e,i){var r=n(t,e,i);return Rl(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)},Hl=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},Vl=function(){function t(t){var r,a,o=t.length,s=new Array(o);for(r=0;o>r;++r)s[r]=e(t[r],r,t);var u=n(s),l=u[0],c=u[1],h=i(s,l,c);Array.isArray(h)||(h=ql(l,c,h));for(var f=h.length;h[0]<=l;)h.shift(),--f;for(;h[f-1]>=c;)h.pop(),--f;var p,d=new Array(f+1);for(r=0;f>=r;++r)p=d[r]=[],p.x0=r>0?h[r-1]:l,p.x1=f>r?h[r]:c;for(r=0;o>r;++r)a=s[r],a>=l&&c>=a&&d[Tl(h,a,0,f)].push(t[r]);return d}var e=zl,n=Nl,i=Hl;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Il(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:Il([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:Il(Array.isArray(e)?Ol.call(e):e),t):i},t},Bl=function(t,e,n){if(null==n&&(n=Al),i=t.length){if((e=+e)<=0||2>i)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(r-a)}},Yl=function(t,e,n){return t=Fl.call(t,Al).sort(kl),Math.ceil((n-e)/(2*(Bl(t,.75)-Bl(t,.25))*Math.pow(t.length,-1/3)))},Wl=function(t,e,n){return Math.ceil((n-e)/(3.5*$l(t)*Math.pow(t.length,-1/3)))},Kl=function(t,e){var n,i,r=-1,a=t.length;if(null==e){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=e(t[r],r,t))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e(t[r],r,t))&&i>n&&(n=i)}return n},Gl=function(t,e){var n,i=0,r=t.length,a=-1,o=r;if(null==e)for(;++a<r;)isNaN(n=Al(t[a]))?--o:i+=n;else for(;++a<r;)isNaN(n=Al(e(t[a],a,t)))?--o:i+=n;return o?i/o:void 0},Xl=function(t,e){var n,i=[],r=t.length,a=-1;if(null==e)for(;++a<r;)isNaN(n=Al(t[a]))||i.push(n);else for(;++a<r;)isNaN(n=Al(e(t[a],a,t)))||i.push(n);return Bl(i.sort(kl),.5)},Jl=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--o]=i[e];return n},Ql=function(t,e){var n,i,r=-1,a=t.length;if(null==e){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=e(t[r],r,t))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e(t[r],r,t))&&n>i&&(n=i)}return n},Zl=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(0>n?0:n);n>e;)r[e]=[i,i=t[++e]];return r},tc=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},ec=function(t,e){if(n=t.length){var n,i,r=0,a=0,o=t[a];for(e||(e=kl);++r<n;)(e(i=t[r],o)<0||0!==e(o,o))&&(o=i,a=r);return 0===e(o,o)?a:void 0}},nc=function(t,e,n){for(var i,r,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},ic=function(t,e){var n,i=0,r=t.length,a=-1;if(null==e)for(;++a<r;)(n=+t[a])&&(i+=n);else for(;++a<r;)(n=+e(t[a],a,t))&&(i+=n);return i},rc=function(t){if(!(a=t.length))return[];for(var e=-1,n=Ql(t,i),r=new Array(n);++e<n;)for(var a,o=-1,s=r[e]=new Array(a);++o<a;)s[o]=t[o][e];return r},ac=function(){return rc(arguments)},oc="$";r.prototype=a.prototype={constructor:r,has:function(t){return oc+t in this},get:function(t){return this[oc+t]},set:function(t,e){return this[oc+t]=e,this},remove:function(t){var e=oc+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===oc&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===oc&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===oc&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===oc&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===oc&&++t;return t},empty:function(){for(var t in this)if(t[0]===oc)return!1;return!0},each:function(t){for(var e in this)e[0]===oc&&t(this[e],e.slice(1),this)}};var sc=function(){function t(e,r,o,s){if(r>=c.length)return null!=i?i(e):null!=n?e.sort(n):e;for(var u,l,h,f=-1,p=e.length,d=c[r++],v=a(),m=o();++f<p;)(h=v.get(u=d(l=e[f])+""))?h.push(l):v.set(u,[l]);return v.each(function(e,n){s(m,n,t(e,r,o,s))}),m}function e(t,n){if(++n>c.length)return t;var r,a=h[n-1];return null!=i&&n>=c.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=a?r.sort(function(t,e){return a(t.key,e.key)}):r}var n,i,r,c=[],h=[];return r={object:function(e){return t(e,0,o,s)},map:function(e){return t(e,0,u,l)},entries:function(n){return e(t(n,0,u,l),0)},key:function(t){return c.push(t),r},sortKeys:function(t){return h[c.length-1]=t,r},sortValues:function(t){return n=t,r},rollup:function(t){return i=t,r}}},uc=a.prototype;c.prototype=h.prototype={constructor:c,has:uc.has,add:function(t){return t+="",this[oc+t]=t,this},remove:uc.remove,clear:uc.clear,values:uc.keys,size:uc.size,empty:uc.empty,each:uc.each};var lc=function(t){var e=[];for(var n in t)e.push(n);return e},cc=function(t){var e=[];for(var n in t)e.push(t[n]);return e},hc=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},fc=function(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}},pc=function(t,e){var n,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var r;if(null!=n)r=n,n=null;else do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}},dc=function(){var t=pc.apply(this,arguments);return function(){return Math.exp(t())}},vc=function(t){return function(){for(var e=0,n=0;t>n;++n)e+=Math.random();return e}},mc=function(t){var e=vc(t);return function(){return e()/t}},gc=function(t){return function(){return-Math.log(1-Math.random())/t}},yc=3,_c=function Tw(t){function e(e){return Math.pow(e,t)}return t=+t,e.exponent=Tw,e}(yc),bc=function Sw(t){function e(e){return 1-Math.pow(1-e,t)}return t=+t,e.exponent=Sw,e}(yc),xc=function Dw(t){function e(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,e.exponent=Dw,e}(yc),wc=Math.PI,kc=wc/2,Mc=4/11,Cc=6/11,Tc=8/11,Sc=.75,Dc=9/11,Ac=10/11,Ec=.9375,$c=21/22,Nc=63/64,Pc=1/Mc/Mc,Oc=1.70158,Fc=function Aw(t){function e(e){return e*e*((t+1)*e-t)}return t=+t,e.overshoot=Aw,e}(Oc),Ic=function Ew(t){function e(e){return--e*e*((t+1)*e+t)+1}return t=+t,e.overshoot=Ew,e}(Oc),zc=function $w(t){function e(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,e.overshoot=$w,e}(Oc),Rc=2*Math.PI,Uc=1,jc=.3,Lc=function Nw(t,e){function n(n){return t*Math.pow(2,10*--n)*Math.sin((i-n)/e)}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Rc);return n.amplitude=function(t){return Nw(t,e*Rc)},n.period=function(e){return Nw(t,e)},n}(Uc,jc),qc=function Pw(t,e){function n(n){return 1-t*Math.pow(2,-10*(n=+n))*Math.sin((n+i)/e)}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Rc);return n.amplitude=function(t){return Pw(t,e*Rc)},n.period=function(e){return Pw(t,e)},n}(Uc,jc),Hc=function Ow(t,e){function n(n){return((n=2*n-1)<0?t*Math.pow(2,10*n)*Math.sin((i-n)/e):2-t*Math.pow(2,-10*n)*Math.sin((i+n)/e))/2}var i=Math.asin(1/(t=Math.max(1,t)))*(e/=Rc);return n.amplitude=function(t){return Ow(t,e*Rc)},n.period=function(e){return Ow(t,e)},n}(Uc,jc),Vc=function(t){for(var e,n=-1,i=t.length,r=t[i-1],a=0;++n<i;)e=r,r=t[n],a+=e[1]*r[0]-e[0]*r[1];return a/2},Bc=function(t){for(var e,n,i=-1,r=t.length,a=0,o=0,s=t[r-1],u=0;++i<r;)e=s,s=t[i],u+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return u*=3,[a/u,o/u]},Yc=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])},Wc=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;n>e;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort($),e=0;n>e;++e)r[e]=[i[e][0],-i[e][1]];var a=N(i),o=N(r),s=o[0]===a[0],u=o[o.length-1]===a[a.length-1],l=[];for(e=a.length-1;e>=0;--e)l.push(t[i[a[e]][2]]);for(e=+s;e<o.length-u;++e)l.push(t[i[o[e]][2]]);return l},Kc=function(t,e){for(var n,i,r=t.length,a=t[r-1],o=e[0],s=e[1],u=a[0],l=a[1],c=!1,h=0;r>h;++h)a=t[h],n=a[0],i=a[1],i>s!=l>s&&(u-n)*(s-i)/(l-i)+n>o&&(c=!c),u=n,l=i;return c},Gc=function(t){for(var e,n,i=-1,r=t.length,a=t[r-1],o=a[0],s=a[1],u=0;++i<r;)e=o,n=s,a=t[i],o=a[0],s=a[1],e-=o,n-=s,u+=Math.sqrt(e*e+n*n);return u},Xc=Math.PI,Jc=2*Xc,Qc=1e-6,Zc=Jc-Qc;P.prototype=O.prototype={constructor:P,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,u=i-e,l=a-t,c=o-e,h=l*l+c*c;if(0>r)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Qc)if(Math.abs(c*s-u*l)>Qc&&r){var f=n-a,p=i-o,d=s*s+u*u,v=f*f+p*p,m=Math.sqrt(d),g=Math.sqrt(h),y=r*Math.tan((Xc-Math.acos((d+h-v)/(2*m*g)))/2),_=y/g,b=y/m;Math.abs(_-1)>Qc&&(this._+="L"+(t+_*l)+","+(e+_*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>l*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,a){t=+t,e=+e,n=+n;var o=n*Math.cos(i),s=n*Math.sin(i),u=t+o,l=e+s,c=1^a,h=a?i-r:r-i;if(0>n)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Qc||Math.abs(this._y1-l)>Qc)&&(this._+="L"+u+","+l),n&&(h>Zc?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):(0>h&&(h=h%Jc+Jc),this._+="A"+n+","+n+",0,"+ +(h>=Xc)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var th=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return F(this.cover(e,n),e,n,t)},eh=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{if(!(n>t||t>r||i>e||e>a))return this;var o,s,u=r-n,l=this._root;switch(s=((i+a)/2>e)<<1|(n+r)/2>t){case 0:do o=new Array(4),o[s]=l,l=o;while(u*=2,r=n+u,a=i+u,t>r||e>a);break;case 1:do o=new Array(4),o[s]=l,l=o;while(u*=2,n=r-u,a=i+u,n>t||e>a);break;case 2:do o=new Array(4),o[s]=l,l=o;while(u*=2,r=n+u,i=a-u,t>r||i>e);break;case 3:do o=new Array(4),o[s]=l,l=o;while(u*=2,n=r-u,i=a-u,n>t||i>e)}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this},nh=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},ih=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rh=function(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r},ah=function(t,e,n){var i,r,a,o,s,u,l,c=this._x0,h=this._y0,f=this._x1,p=this._y1,d=[],v=this._root;for(v&&d.push(new rh(v,c,h,f,p)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(v=u.node)||(r=u.x0)>f||(a=u.y0)>p||(o=u.x1)<c||(s=u.y1)<h))if(v.length){var m=(r+o)/2,g=(a+s)/2;d.push(new rh(v[3],m,g,o,s),new rh(v[2],r,g,m,s),new rh(v[1],m,a,o,g),new rh(v[0],r,a,m,g)),(l=(e>=g)<<1|t>=m)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-l],d[d.length-1-l]=u)}else{var y=t-+this._x.call(null,v.data),_=e-+this._y.call(null,v.data),b=y*y+_*_;if(n>b){var x=Math.sqrt(n=b);c=t-x,h=e-x,f=t+x,p=e+x,i=v.data}}return i},oh=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,a,o,s,u,l,c,h,f,p=this._root,d=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((l=a>=(s=(d+m)/2))?d=s:m=s,(c=o>=(u=(v+g)/2))?v=u:g=u,e=p,!(p=p[h=c<<1|l]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(i=p,!(p=p.next))return this;return(r=p.next)&&delete p.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=r,this)},sh=function(){return this._root},uh=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},lh=function(t){var e,n,i,r,a,o,s=[],u=this._root;for(u&&s.push(new rh(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,i=e.x0,r=e.y0,a=e.x1,o=e.y1)&&u.length){var l=(i+a)/2,c=(r+o)/2;(n=u[3])&&s.push(new rh(n,l,c,a,o)),(n=u[2])&&s.push(new rh(n,i,c,l,o)),(n=u[1])&&s.push(new rh(n,l,r,a,c)),(n=u[0])&&s.push(new rh(n,i,r,l,c))}return this},ch=function(t){var e,n=[],i=[];for(this._root&&n.push(new rh(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var a,o=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(o+u)/2,h=(s+l)/2;(a=r[0])&&n.push(new rh(a,o,s,c,h)),(a=r[1])&&n.push(new rh(a,c,s,u,h)),(a=r[2])&&n.push(new rh(a,o,h,c,l)),(a=r[3])&&n.push(new rh(a,c,h,u,l))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},hh=function(t){return arguments.length?(this._x=t,this):this._x},fh=function(t){return arguments.length?(this._y=t,this):this._y},ph=j.prototype=L.prototype;ph.copy=function(){var t,e,n=new L(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=q(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;4>r;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=q(e));return n},ph.add=th,ph.addAll=I,ph.cover=eh,ph.data=nh,ph.extent=ih,ph.find=ah,ph.remove=oh,ph.removeAll=z,ph.root=sh,ph.size=uh,ph.visit=lh,ph.visitAfter=ch,ph.x=hh,ph.y=fh;var dh=[].slice,vh={};H.prototype=G.prototype={constructor:H,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var e=dh.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),V(this),this},abort:function(){return null==this._error&&W(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},K(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,K(this),this}};var mh=function(t){return function(){return t}},gh=1e-12,yh=Math.PI,_h=yh/2,bh=2*yh,xh=function(){function t(){var t,l,c=+e.apply(this,arguments),h=+n.apply(this,arguments),f=a.apply(this,arguments)-_h,p=o.apply(this,arguments)-_h,d=Math.abs(p-f),v=p>f;if(u||(u=t=O()),c>h&&(l=h,h=c,c=l),h>gh)if(d>bh-gh)u.moveTo(h*Math.cos(f),h*Math.sin(f)),u.arc(0,0,h,f,p,!v),c>gh&&(u.moveTo(c*Math.cos(p),c*Math.sin(p)),u.arc(0,0,c,p,f,v));else{var m,g,y=f,_=p,b=f,x=p,w=d,k=d,M=s.apply(this,arguments)/2,C=M>gh&&(r?+r.apply(this,arguments):Math.sqrt(c*c+h*h)),T=Math.min(Math.abs(h-c)/2,+i.apply(this,arguments)),S=T,D=T;if(C>gh){var A=et(C/c*Math.sin(M)),E=et(C/h*Math.sin(M));(w-=2*A)>gh?(A*=v?1:-1,b+=A,x-=A):(w=0,b=x=(f+p)/2),(k-=2*E)>gh?(E*=v?1:-1,y+=E,_-=E):(k=0,y=_=(f+p)/2)}var $=h*Math.cos(y),N=h*Math.sin(y),P=c*Math.cos(x),F=c*Math.sin(x);if(T>gh){var I=h*Math.cos(_),z=h*Math.sin(_),R=c*Math.cos(b),U=c*Math.sin(b);if(yh>d){var j=w>gh?nt($,N,R,U,I,z,P,F):[P,F],L=$-j[0],q=N-j[1],H=I-j[0],V=z-j[1],B=1/Math.sin(Math.acos((L*H+q*V)/(Math.sqrt(L*L+q*q)*Math.sqrt(H*H+V*V)))/2),Y=Math.sqrt(j[0]*j[0]+j[1]*j[1]);S=Math.min(T,(c-Y)/(B-1)),D=Math.min(T,(h-Y)/(B+1))}}k>gh?D>gh?(m=it(R,U,$,N,h,D,v),g=it(I,z,P,F,h,D,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),T>D?u.arc(m.cx,m.cy,D,Math.atan2(m.y01,m.x01),Math.atan2(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,D,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!v),u.arc(0,0,h,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(g.cy+g.y11,g.cx+g.x11),!v),u.arc(g.cx,g.cy,D,Math.atan2(g.y11,g.x11),Math.atan2(g.y01,g.x01),!v))):(u.moveTo($,N),u.arc(0,0,h,y,_,!v)):u.moveTo($,N),c>gh&&w>gh?S>gh?(m=it(P,F,I,z,c,-S,v),g=it($,N,R,U,c,-S,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),T>S?u.arc(m.cx,m.cy,S,Math.atan2(m.y01,m.x01),Math.atan2(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,S,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!v),u.arc(0,0,c,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(g.cy+g.y11,g.cx+g.x11),v),u.arc(g.cx,g.cy,S,Math.atan2(g.y11,g.x11),Math.atan2(g.y01,g.x01),!v))):u.arc(0,0,c,x,b,v):u.lineTo(P,F)}else u.moveTo(0,0);return u.closePath(),t?(u=null,t+""||null):void 0}var e=X,n=J,i=mh(0),r=null,a=Q,o=Z,s=tt,u=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-yh/2;return[Math.cos(i)*t,Math.sin(i)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:mh(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:mh(+e),t):n},t.cornerRadius=function(e){return arguments.length?(i="function"==typeof e?e:mh(+e),t):i},t.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:mh(+e),t):r},t.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:mh(+e),t):a},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:mh(+e),t):o},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:mh(+e),t):s},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t};rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var wh=function(t){return new rt(t)},kh=function(){function t(t){var s,u,l,c=t.length,h=!1;for(null==r&&(o=a(l=O())),s=0;c>=s;++s)!(c>s&&i(u=t[s],s,t))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(u,s,t),+n(u,s,t));return l?(o=null,l+""||null):void 0}var e=at,n=ot,i=mh(!0),r=null,a=wh,o=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:mh(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:mh(+e),t):n},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:mh(!!e),t):i},t.curve=function(e){return arguments.length?(a=e,null!=r&&(o=a(r)),t):a},t.context=function(e){return arguments.length?(null==e?r=o=null:o=a(r=e),t):r},t},Mh=function(){function t(t){var e,c,h,f,p,d=t.length,v=!1,m=new Array(d),g=new Array(d);for(null==s&&(l=u(p=O())),e=0;d>=e;++e){if(!(d>e&&o(f=t[e],e,t))===v)if(v=!v)c=e,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=e-1;h>=c;--h)l.point(m[h],g[h]);l.lineEnd(),l.areaEnd()}v&&(m[e]=+n(f,e,t),g[e]=+r(f,e,t),l.point(i?+i(f,e,t):m[e],a?+a(f,e,t):g[e]))}return p?(l=null,p+""||null):void 0}function e(){return kh().defined(o).curve(u).context(s)}var n=at,i=null,r=mh(0),a=ot,o=mh(!0),s=null,u=wh,l=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:mh(+e),i=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:mh(+e),t):n},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:mh(+e),t):i},t.y=function(e){return arguments.length?(r="function"==typeof e?e:mh(+e),a=null,t):r},t.y0=function(e){return arguments.length?(r="function"==typeof e?e:mh(+e),t):r},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:mh(+e),t):a},t.lineX0=t.lineY0=function(){return e().x(n).y(r)},t.lineY1=function(){return e().x(n).y(a)},t.lineX1=function(){return e().x(i).y(r)},t.defined=function(e){return arguments.length?(o="function"==typeof e?e:mh(!!e),t):o},t.curve=function(e){return arguments.length?(u=e,null!=s&&(l=u(s)),t):u},t.context=function(e){return arguments.length?(null==e?s=l=null:l=u(s=e),t):s},t},Ch=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},Th=function(t){return t},Sh=function(){function t(t){var s,u,l,c,h,f=t.length,p=0,d=new Array(f),v=new Array(f),m=+r.apply(this,arguments),g=Math.min(bh,Math.max(-bh,a.apply(this,arguments)-m)),y=Math.min(Math.abs(g)/f,o.apply(this,arguments)),_=y*(0>g?-1:1);for(s=0;f>s;++s)(h=v[d[s]=s]=+e(t[s],s,t))>0&&(p+=h);for(null!=n?d.sort(function(t,e){return n(v[t],v[e])}):null!=i&&d.sort(function(e,n){return i(t[e],t[n])}),s=0,l=p?(g-f*_)/p:0;f>s;++s,m=c)u=d[s],h=v[u],c=m+(h>0?h*l:0)+_,v[u]={data:t[u],index:s,value:h,startAngle:m,endAngle:c,padAngle:y};return v}var e=Th,n=Ch,i=null,r=mh(0),a=mh(bh),o=mh(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:mh(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,i=null,t):n},t.sort=function(e){return arguments.length?(i=e,n=null,t):i},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:mh(+e),t):r},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:mh(+e),t):a},t.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:mh(+e),t):o},t},Dh=ut(wh);st.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Ah=function(){return lt(kh().curve(Dh))},Eh=function(){var t=Mh().curve(Dh),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return lt(n())},delete t.lineX0,t.lineEndAngle=function(){return lt(i())},delete t.lineX1,t.lineInnerRadius=function(){return lt(r())},delete t.lineY0,t.lineOuterRadius=function(){return lt(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(ut(t)):e()._curve},t},$h={draw:function(t,e){var n=Math.sqrt(e/yh);t.moveTo(n,0),t.arc(0,0,n,0,bh)}},Nh={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Ph=Math.sqrt(1/3),Oh=2*Ph,Fh={draw:function(t,e){var n=Math.sqrt(e/Oh),i=n*Ph;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Ih=.8908130915292852,zh=Math.sin(yh/10)/Math.sin(7*yh/10),Rh=Math.sin(bh/10)*zh,Uh=-Math.cos(bh/10)*zh,jh={draw:function(t,e){var n=Math.sqrt(e*Ih),i=Rh*n,r=Uh*n;t.moveTo(0,-n),t.lineTo(i,r);for(var a=1;5>a;++a){var o=bh*a/5,s=Math.cos(o),u=Math.sin(o);t.lineTo(u*n,-s*n),t.lineTo(s*i-u*r,u*i+s*r)}t.closePath()}},Lh={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;
t.rect(i,i,n,n)}},qh=Math.sqrt(3),Hh={draw:function(t,e){var n=-Math.sqrt(e/(3*qh));t.moveTo(0,2*n),t.lineTo(-qh*n,-n),t.lineTo(qh*n,-n),t.closePath()}},Vh=-.5,Bh=Math.sqrt(3)/2,Yh=1/Math.sqrt(12),Wh=3*(Yh/2+1),Kh={draw:function(t,e){var n=Math.sqrt(e/Wh),i=n/2,r=n*Yh,a=i,o=n*Yh+n,s=-a,u=o;t.moveTo(i,r),t.lineTo(a,o),t.lineTo(s,u),t.lineTo(Vh*i-Bh*r,Bh*i+Vh*r),t.lineTo(Vh*a-Bh*o,Bh*a+Vh*o),t.lineTo(Vh*s-Bh*u,Bh*s+Vh*u),t.lineTo(Vh*i+Bh*r,Vh*r-Bh*i),t.lineTo(Vh*a+Bh*o,Vh*o-Bh*a),t.lineTo(Vh*s+Bh*u,Vh*u-Bh*s),t.closePath()}},Gh=[$h,Nh,Fh,Lh,jh,Hh,Kh],Xh=function(){function t(){var t;return i||(i=t=O()),e.apply(this,arguments).draw(i,+n.apply(this,arguments)),t?(i=null,t+""||null):void 0}var e=mh($h),n=mh(64),i=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:mh(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:mh(+e),t):n},t.context=function(e){return arguments.length?(i=null==e?null:e,t):i},t},Jh=function(){};ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ct(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Qh=function(t){return new ht(t)};ft.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Zh=function(t){return new ft(t)};pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ct(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var tf=function(t){return new pt(t)};dt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],a=e[0],o=t[n]-r,s=e[n]-a,u=-1;++u<=n;)i=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(r+i*o),this._beta*e[u]+(1-this._beta)*(a+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ef=function Fw(t){function e(e){return 1===t?new ht(e):new dt(e,t)}return e.beta=function(t){return Fw(+t)},e}(.85);mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:vt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var nf=function Iw(t){function e(e){return new mt(e,t)}return e.tension=function(t){return Iw(+t)},e}(0);gt.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:vt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var rf=function zw(t){function e(e){return new gt(e,t)}return e.tension=function(t){return zw(+t)},e}(0);yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var af=function Rw(t){function e(e){return new yt(e,t)}return e.tension=function(t){return Rw(+t)},e}(0);bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:_t(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var of=function Uw(t){function e(e){return t?new bt(e,t):new mt(e,0)}return e.alpha=function(t){return Uw(+t)},e}(.5);xt.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_t(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var sf=function jw(t){function e(e){return t?new xt(e,t):new gt(e,0)}return e.alpha=function(t){return jw(+t)},e}(.5);wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_t(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var uf=function Lw(t){function e(e){return t?new wt(e,t):new yt(e,0)}return e.alpha=function(t){return Lw(+t)},e}(.5);kt.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var lf=function(t){return new kt(t)};Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:St(this,this._t0,Tt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,St(this,Tt(this,n=Ct(this,t,e)),n);break;default:St(this,this._t0,n=Ct(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(At.prototype=Object.create(Dt.prototype)).point=function(t,e){Dt.prototype.point.call(this,e,t)},Et.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Ot(t),r=Ot(e),a=0,o=1;n>o;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var cf=function(t){return new Pt(t)};Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var hf=function(t){return new Ft(t,.5)},ff=Array.prototype.slice,pf=function(t,e){if((i=t.length)>1)for(var n,i,r=1,a=t[e[0]],o=a.length;i>r;++r){n=a,a=t[e[r]];for(var s=0;o>s;++s)a[s][1]+=a[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}},df=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},vf=function(){function t(t){var a,o,s=e.apply(this,arguments),u=t.length,l=s.length,c=new Array(l);for(a=0;l>a;++a){for(var h,f=s[a],p=c[a]=new Array(u),d=0;u>d;++d)p[d]=h=[0,+r(t[d],f,d,t)],h.data=t[d];p.key=f}for(a=0,o=n(c);l>a;++a)c[o[a]].index=a;return i(c,o),c}var e=mh([]),n=df,i=pf,r=Rt;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:mh(ff.call(n)),t):e},t.value=function(e){return arguments.length?(r="function"==typeof e?e:mh(+e),t):r},t.order=function(e){return arguments.length?(n=null==e?df:"function"==typeof e?e:mh(ff.call(e)),t):n},t.offset=function(e){return arguments.length?(i=null==e?pf:e,t):i},t},mf=function(t,e){if((i=t.length)>0){for(var n,i,r,a=0,o=t[0].length;o>a;++a){for(r=n=0;i>n;++n)r+=t[n][a][1]||0;if(r)for(n=0;i>n;++n)t[n][a][1]/=r}pf(t,e)}},gf=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],a=r.length;a>i;++i){for(var o=0,s=0;n>o;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}pf(t,e)}},yf=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,a=0,o=1;i>o;++o){for(var s=0,u=0,l=0;r>s;++s){for(var c=t[e[s]],h=c[o][1]||0,f=c[o-1][1]||0,p=(h-f)/2,d=0;s>d;++d){var v=t[e[d]],m=v[o][1]||0,g=v[o-1][1]||0;p+=m-g}u+=h,l+=p*h}n[o-1][1]+=n[o-1][0]=a,u&&(a-=l/u)}n[o-1][1]+=n[o-1][0]=a,pf(t,e)}},_f=function(t){var e=t.map(Ut);return df(t).sort(function(t,n){return e[t]-e[n]})},bf=function(t){return _f(t).reverse()},xf=function(t){var e,n,i=t.length,r=t.map(Ut),a=df(t).sort(function(t,e){return r[e]-r[t]}),o=0,s=0,u=[],l=[];for(e=0;i>e;++e)n=a[e],s>o?(o+=r[n],u.push(n)):(s+=r[n],l.push(n));return l.reverse().concat(u)},wf=function(t){return df(t).reverse()},kf=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},Mf=.7,Cf=1/Mf,Tf="\\s*([+-]?\\d+)\\s*",Sf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Df="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Af=/^#([0-9a-f]{3})$/,Ef=/^#([0-9a-f]{6})$/,$f=new RegExp("^rgb\\("+[Tf,Tf,Tf]+"\\)$"),Nf=new RegExp("^rgb\\("+[Df,Df,Df]+"\\)$"),Pf=new RegExp("^rgba\\("+[Tf,Tf,Tf,Sf]+"\\)$"),Of=new RegExp("^rgba\\("+[Df,Df,Df,Sf]+"\\)$"),Ff=new RegExp("^hsl\\("+[Sf,Df,Df]+"\\)$"),If=new RegExp("^hsla\\("+[Sf,Df,Df,Sf]+"\\)$"),zf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kf(Lt,qt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),kf(Wt,Yt,jt(Lt,{brighter:function(t){return t=null==t?Cf:Math.pow(Cf,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Mf:Math.pow(Mf,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),kf(Jt,Xt,jt(Lt,{brighter:function(t){return t=null==t?Cf:Math.pow(Cf,t),new Jt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Mf:Math.pow(Mf,t),new Jt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(.5>n?n:1-n)*e,r=2*n-i;return new Wt(Qt(t>=240?t-240:t+120,r,i),Qt(t,r,i),Qt(120>t?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Rf=Math.PI/180,Uf=180/Math.PI,jf=18,Lf=.95047,qf=1,Hf=1.08883,Vf=4/29,Bf=6/29,Yf=3*Bf*Bf,Wf=Bf*Bf*Bf;kf(ee,te,jt(Lt,{brighter:function(t){return new ee(this.l+jf*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ee(this.l-jf*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=qf*ie(t),e=Lf*ie(e),n=Hf*ie(n),new Wt(re(3.2404542*e-1.5371385*t-.4985314*n),re(-.969266*e+1.8760108*t+.041556*n),re(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),kf(ue,se,jt(Lt,{brighter:function(t){return new ue(this.h,this.c,this.l+jf*(null==t?1:t),this.opacity)},darker:function(t){return new ue(this.h,this.c,this.l-jf*(null==t?1:t),this.opacity)},rgb:function(){return Zt(this).rgb()}}));var Kf=-.14861,Gf=1.78277,Xf=-.29227,Jf=-.90649,Qf=1.97294,Zf=Qf*Jf,tp=Qf*Gf,ep=Gf*Xf-Jf*Kf;kf(he,ce,jt(Lt,{brighter:function(t){return t=null==t?Cf:Math.pow(Cf,t),new he(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Mf:Math.pow(Mf,t),new he(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Rf,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Wt(255*(e+n*(Kf*i+Gf*r)),255*(e+n*(Xf*i+Jf*r)),255*(e+n*(Qf*i)),this.opacity)}}));var np,ip,rp,ap,op=function(t){var e=t.length-1;return function(n){var i=0>=n?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],a=t[i+1],o=i>0?t[i-1]:2*r-a,s=e-1>i?t[i+2]:2*a-r;return fe((n-i/e)*e,o,r,a,s)}},sp=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],a=t[i%e],o=t[(i+1)%e],s=t[(i+2)%e];return fe((n-i/e)*e,r,a,o,s)}},up=function(t){return function(){return t}},lp=function qw(t){function e(t,e){var i=n((t=Yt(t)).r,(e=Yt(e)).r),r=n(t.g,e.g),a=n(t.b,e.b),o=n(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}var n=me(t);return e.gamma=qw,e}(1),cp=ye(op),hp=ye(sp),fp=function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(i),o=new Array(i);for(n=0;r>n;++n)a[n]=_p(t[n],e[n]);for(;i>n;++n)o[n]=e[n];return function(t){for(n=0;r>n;++n)o[n]=a[n](t);return o}},pp=function(t,e){var n=new Date;return t=+t,e-=t,function(i){return n.setTime(t+e*i),n}},dp=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},vp=function(t,e){var n,i={},r={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?i[n]=_p(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},mp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gp=new RegExp(mp.source,"g"),yp=function(t,e){var n,i,r,a=mp.lastIndex=gp.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=mp.exec(t))&&(i=gp.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:dp(n,i)})),a=gp.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?u[0]?be(u[0].x):_e(e):(e=u.length,function(t){for(var n,i=0;e>i;++i)s[(n=u[i]).i]=n.x(t);return s.join("")})},_p=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?up(e):("number"===i?dp:"string"===i?(n=qt(e))?(e=n,lp):yp:e instanceof qt?lp:e instanceof Date?pp:Array.isArray(e)?fp:isNaN(e)?vp:dp)(t,e)},bp=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},xp=180/Math.PI,wp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},kp=function(t,e,n,i,r,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),e*n>t*i&&(t=-t,e=-e,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*xp,skewX:Math.atan(u)*xp,scaleX:o,scaleY:s}},Mp=ke(xe,"px, ","px)","deg)"),Cp=ke(we,", ",")",")"),Tp=Math.SQRT2,Sp=2,Dp=4,Ap=1e-12,Ep=function(t,e){var n,i,r=t[0],a=t[1],o=t[2],s=e[0],u=e[1],l=e[2],c=s-r,h=u-a,f=c*c+h*h;if(Ap>f)i=Math.log(l/o)/Tp,n=function(t){return[r+t*c,a+t*h,o*Math.exp(Tp*t*i)]};else{var p=Math.sqrt(f),d=(l*l-o*o+Dp*f)/(2*o*Sp*p),v=(l*l-o*o-Dp*f)/(2*l*Sp*p),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);i=(g-m)/Tp,n=function(t){var e=t*i,n=Me(m),s=o/(Sp*p)*(n*Te(Tp*e+m)-Ce(m));return[r+s*c,a+s*h,o*n/Me(Tp*e+m)]}}return n.duration=1e3*i,n},$p=Se(ve),Np=Se(ge),Pp=Ae(ve),Op=Ae(ge),Fp=Ee(ve),Ip=Ee(ge),zp=function(t,e){for(var n=new Array(e),i=0;e>i;++i)n[i]=t(i/(e-1));return n},Rp={value:function(){}};Ne.prototype=$e.prototype={constructor:Ne,on:function(t,e){var n,i=this._,r=Pe(t+"",i),a=-1,o=r.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=r[a]).type)i[n]=Fe(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Fe(i[n],t.name,null);return this}for(;++a<o;)if((n=(t=r[a]).type)&&(n=Oe(i[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ne(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),a=0;n>a;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],a=0,n=i.length;n>a;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;a>r;++r)i[r].value.apply(e,n)}};var Up,jp,Lp=function(t){function e(t,e){var i,r,a=n(t,function(t,n){return i?i(t,n-1):(r=t,void(i=e?ze(t,e):Ie(t)))});return a.columns=r,a}function n(t,e){function n(){if(c>=l)return o;if(r)return r=!1,a;var e,n=c;if(34===t.charCodeAt(n)){for(var i=n;i++<l;)if(34===t.charCodeAt(i)){if(34!==t.charCodeAt(i+1))break;++i}return c=i+2,e=t.charCodeAt(i+1),13===e?(r=!0,10===t.charCodeAt(i+2)&&++c):10===e&&(r=!0),t.slice(n+1,i).replace(/""/g,'"')}for(;l>c;){var s=1;if(e=t.charCodeAt(c++),10===e)r=!0;else if(13===e)r=!0,10===t.charCodeAt(c)&&(++c,++s);else if(e!==u)continue;return t.slice(n,c-s)}return t.slice(n)}for(var i,r,a={},o={},s=[],l=t.length,c=0,h=0;(i=n())!==o;){for(var f=[];i!==a&&i!==o;)f.push(i),i=n();e&&null==(f=e(f,h++))||s.push(f)}return s}function i(e,n){return null==n&&(n=Re(e)),[n.map(o).join(t)].concat(e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})).join("\n")}function r(t){return t.map(a).join("\n")}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":s.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return{parse:e,parseRows:n,format:i,formatRows:r}},qp=Lp(","),Hp=qp.parse,Vp=qp.parseRows,Bp=qp.format,Yp=qp.formatRows,Wp=Lp("	"),Kp=Wp.parse,Gp=Wp.parseRows,Xp=Wp.format,Jp=Wp.formatRows,Qp=function(t,e){function n(t){var e,n=c.status;if(!n&&je(c)||n>=200&&300>n||304===n){if(o)try{e=o.call(i,c)}catch(r){return void u.call("error",i,r)}else e=c;u.call("load",i,e)}else u.call("error",i,t)}var i,r,o,s,u=$e("beforesend","progress","load","error"),l=a(),c=new XMLHttpRequest,h=null,f=null,p=0;if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=n:c.onreadystatechange=function(t){c.readyState>3&&n(t)},c.onprogress=function(t){u.call("progress",i,t)},i={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),i)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",i):r},responseType:function(t){return arguments.length?(s=t,i):s},timeout:function(t){return arguments.length?(p=+t,i):p},user:function(t){return arguments.length<1?h:(h=null==t?null:t+"",i)},password:function(t){return arguments.length<1?f:(f=null==t?null:t+"",i)},response:function(t){return o=t,i},get:function(t,e){return i.send("GET",t,e)},post:function(t,e){return i.send("POST",t,e)},send:function(e,n,a){return c.open(e,t,!0,h,f),null==r||l.has("accept")||l.set("accept",r+",*/*"),c.setRequestHeader&&l.each(function(t,e){c.setRequestHeader(e,t)}),null!=r&&c.overrideMimeType&&c.overrideMimeType(r),null!=s&&(c.responseType=s),p>0&&(c.timeout=p),null==a&&"function"==typeof n&&(a=n,n=null),null!=a&&1===a.length&&(a=Ue(a)),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),u.call("beforesend",i,c),c.send(null==n?null:n),i},abort:function(){return c.abort(),i},on:function(){var t=u.on.apply(u,arguments);return t===u?i:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return i.get(e)}return i},Zp=function(t,e){return function(n,i){var r=Qp(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return r.get(i)}return r}},td=Zp("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),ed=Zp("application/json",function(t){return JSON.parse(t.responseText)}),nd=Zp("text/plain",function(t){return t.responseText}),id=Zp("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),rd=function(t,e){return function(n,i,r){arguments.length<3&&(r=i,i=null);var a=Qp(n).mimeType(t);return a.row=function(t){return arguments.length?a.response(Le(e,i=t)):i},a.row(i),r?a.get(r):a}},ad=rd("text/csv",Hp),od=rd("text/tab-separated-values",Kp),sd=0,ud=0,ld=0,cd=1e3,hd=0,fd=0,pd=0,dd="object"==typeof performance&&performance.now?performance:Date,vd="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};Ve.prototype=Be.prototype={constructor:Ve,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?qe():+n)+(null==e?0:+e),this._next||jp===this||(jp?jp._next=this:Up=this,jp=this),this._call=t,this._time=n,Xe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xe())}};var md=function(t,e,n){var i=new Ve;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i},gd=function(t,e,n){var i=new Ve,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?qe():+n,i.restart(function a(o){o+=r,i.restart(a,r+=e,n),t(o)},e,n),i)},yd=new Date,_d=new Date,bd=Je(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});bd.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Je(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):bd:null};var xd=bd.range,wd=1e3,kd=6e4,Md=36e5,Cd=864e5,Td=6048e5,Sd=Je(function(t){t.setTime(Math.floor(t/wd)*wd)},function(t,e){t.setTime(+t+e*wd)},function(t,e){return(e-t)/wd},function(t){return t.getUTCSeconds()}),Dd=Sd.range,Ad=Je(function(t){t.setTime(Math.floor(t/kd)*kd)},function(t,e){t.setTime(+t+e*kd)},function(t,e){return(e-t)/kd},function(t){return t.getMinutes()}),Ed=Ad.range,$d=Je(function(t){var e=t.getTimezoneOffset()*kd%Md;0>e&&(e+=Md),t.setTime(Math.floor((+t-e)/Md)*Md+e)},function(t,e){t.setTime(+t+e*Md)},function(t,e){return(e-t)/Md},function(t){return t.getHours()}),Nd=$d.range,Pd=Je(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*kd)/Cd},function(t){return t.getDate()-1}),Od=Pd.range,Fd=Qe(0),Id=Qe(1),zd=Qe(2),Rd=Qe(3),Ud=Qe(4),jd=Qe(5),Ld=Qe(6),qd=Fd.range,Hd=Id.range,Vd=zd.range,Bd=Rd.range,Yd=Ud.range,Wd=jd.range,Kd=Ld.range,Gd=Je(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Xd=Gd.range,Jd=Je(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Jd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Je(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Qd=Jd.range,Zd=Je(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*kd)},function(t,e){return(e-t)/kd},function(t){return t.getUTCMinutes()}),tv=Zd.range,ev=Je(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Md)},function(t,e){return(e-t)/Md},function(t){return t.getUTCHours()}),nv=ev.range,iv=Je(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Cd},function(t){return t.getUTCDate()-1}),rv=iv.range,av=Ze(0),ov=Ze(1),sv=Ze(2),uv=Ze(3),lv=Ze(4),cv=Ze(5),hv=Ze(6),fv=av.range,pv=ov.range,dv=sv.range,vv=uv.range,mv=lv.range,gv=cv.range,yv=hv.range,_v=Je(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),bv=_v.range,xv=Je(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});xv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Je(function(e){
e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var wv,kv=xv.range,Mv=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},Cv=function(t){return t=Mv(Math.abs(t)),t?t[1]:NaN},Tv=function(t,e){return function(n,i){for(var r=n.length,a=[],o=0,s=t[0],u=0;r>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),a.push(n.substring(r-=s,r+s)),!((u+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}},Sv=function(t,e){t=t.toPrecision(e);t:for(var n,i=t.length,r=1,a=-1;i>r;++r)switch(t[r]){case".":a=n=r;break;case"0":0===a&&(a=r),n=r;break;case"e":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t},Dv=function(t,e){var n=Mv(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(wv=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Mv(t,Math.max(0,e+a-1))[0]},Av=function(t,e){var n=Mv(t,e);if(!n)return t+"";var i=n[0],r=n[1];return 0>r?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},Ev={"":Sv,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Av(100*t,e)},r:Av,s:Dv,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},$v=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,Nv=function(t){return new tn(t)};tn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Pv,Ov=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],Fv=function(t){function e(t){function e(t){var e,r,u,y=d,_=v;if("c"===p)_=m(t)+_,t="";else{t=+t;var b=(0>t||0>1/t)&&(t*=-1,!0);if(t=m(t,f),b)for(e=-1,r=t.length,b=!1;++e<r;)if(u=t.charCodeAt(e),u>48&&58>u||"x"===p&&u>96&&103>u||"X"===p&&u>64&&71>u){b=!0;break}if(y=(b?"("===s?s:"-":"-"===s||"("===s?"":s)+y,_=_+("s"===p?Ov[8+wv/3]:"")+(b&&"("===s?")":""),g)for(e=-1,r=t.length;++e<r;)if(u=t.charCodeAt(e),48>u||u>57){_=(46===u?a+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}h&&!l&&(t=i(t,1/0));var x=y.length+t.length+_.length,w=c>x?new Array(c-x+1).join(n):"";switch(h&&l&&(t=i(w+t,w.length?c-_.length:1/0),w=""),o){case"<":return y+t+_+w;case"=":return y+w+t+_;case"^":return w.slice(0,x=w.length>>1)+y+t+_+w.slice(x)}return w+y+t+_}t=Nv(t);var n=t.fill,o=t.align,s=t.sign,u=t.symbol,l=t.zero,c=t.width,h=t.comma,f=t.precision,p=t.type,d="$"===u?r[0]:"#"===u&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",v="$"===u?r[1]:/[%p]/.test(p)?"%":"",m=Ev[p],g=!p||/[defgprs%]/.test(p);return f=null==f?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),e.toString=function(){return t+""},e}function n(t,n){var i=e((t=Nv(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Cv(n)/3))),a=Math.pow(10,-r),o=Ov[8+r/3];return function(t){return i(a*t)+o}}var i=t.grouping&&t.thousands?Tv(t.grouping,t.thousands):en,r=t.currency,a=t.decimal;return{format:e,formatPrefix:n}};nn({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Iv,zv=function(t){return Math.max(0,-Cv(Math.abs(t)))},Rv=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Cv(e)/3)))-Cv(Math.abs(t)))},Uv=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Cv(e)-Cv(t))+1},jv={"-":"",_:" ",0:"0"},Lv=/^\s*\d+/,qv=/^%/,Hv=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;ei({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Vv="%Y-%m-%dT%H:%M:%S.%LZ",Bv=Date.prototype.toISOString?ni:t.utcFormat(Vv),Yv=+new Date("2000-01-01T00:00:00.000Z")?ii:t.utcParse(Vv),Wv=Array.prototype,Kv=Wv.map,Gv=Wv.slice,Xv={name:"implicit"},Jv=function(t){return function(){return t}},Qv=function(t){return+t},Zv=[0,1],tm=function(e,i,r){var a,o=e[0],s=e[e.length-1],u=n(o,s,null==i?10:i);switch(r=Nv(null==r?",f":r),r.type){case"s":var l=Math.max(Math.abs(o),Math.abs(s));return null!=r.precision||isNaN(a=Rv(u,l))||(r.precision=a),t.formatPrefix(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=Uv(u,Math.max(Math.abs(o),Math.abs(s))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=zv(u))||(r.precision=a-2*("%"===r.type))}return t.format(r)},em=function(t,e){t=t.slice();var n,i=0,r=t.length-1,a=t[i],o=t[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t},nm=1e3,im=60*nm,rm=60*im,am=24*rm,om=7*am,sm=30*am,um=365*am,lm=function(){return Pi(Jd,Gd,Fd,Pd,$d,Ad,Sd,bd,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},cm=function(){return Pi(xv,_v,av,iv,ev,Zd,Sd,bd,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},hm=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},fm=hm("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),pm=hm("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),dm=hm("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),vm=hm("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),mm=Ip(ce(300,.5,0),ce(-240,.5,1)),gm=Ip(ce(-100,.75,.35),ce(80,1.5,.8)),ym=Ip(ce(260,.75,.35),ce(80,1.5,.8)),_m=ce(),bm=function(t){(0>t||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return _m.h=360*t-100,_m.s=1.5-1.5*e,_m.l=.8-.9*e,_m+""},xm=Oi(hm("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),wm=Oi(hm("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),km=Oi(hm("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Mm=Oi(hm("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Cm="http://www.w3.org/1999/xhtml",Tm={svg:"http://www.w3.org/2000/svg",xhtml:Cm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sm=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Tm.hasOwnProperty(e)?{space:Tm[e],local:t}:t},Dm=function(t){var e=Sm(t);return(e.local?zi:Ii)(e)},Am=0;Ui.prototype=Ri.prototype={constructor:Ui,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Em=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var $m=document.documentElement;if(!$m.matches){var Nm=$m.webkitMatchesSelector||$m.msMatchesSelector||$m.mozMatchesSelector||$m.oMatchesSelector;Em=function(t){return function(){return Nm.call(this,t)}}}}var Pm=Em,Om={};if(t.event=null,"undefined"!=typeof document){var Fm=document.documentElement;"onmouseenter"in Fm||(Om={mouseenter:"mouseover",mouseleave:"mouseout"})}var Im=function(t,e,n){var i,r,a=qi(t+""),o=a.length;{if(!(arguments.length<2)){for(s=e?Vi:Hi,null==n&&(n=!1),i=0;o>i;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;c>l;++l)for(i=0,u=s[l];o>i;++i)if((r=a[i]).type===u.type&&r.name===u.name)return u.value}},zm=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},Rm=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]},Um=function(t){var e=zm();return e.changedTouches&&(e=e.changedTouches[0]),Rm(t,e)},jm=function(t){return null==t?Yi:function(){return this.querySelector(t)}},Lm=function(t){"function"!=typeof t&&(t=jm(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;n>r;++r)for(var a,o,s=e[r],u=s.length,l=i[r]=new Array(u),c=0;u>c;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new $r(i,this._parents)},qm=function(t){return null==t?Wi:function(){return this.querySelectorAll(t)}},Hm=function(t){"function"!=typeof t&&(t=qm(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;n>a;++a)for(var o,s=e[a],u=s.length,l=0;u>l;++l)(o=s[l])&&(i.push(t.call(o,o.__data__,l,s)),r.push(o));return new $r(i,r)},Vm=function(t){"function"!=typeof t&&(t=Pm(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;n>r;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],l=0;s>l;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new $r(i,this._parents)},Bm=function(t){return new Array(t.length)},Ym=function(){return new $r(this._enter||this._groups.map(Bm),this._parents)};Ki.prototype={constructor:Ki,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Wm=function(t){return function(){return t}},Km="$",Gm=function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n=e?Xi:Gi,i=this._parents,r=this._groups;"function"!=typeof t&&(t=Wm(t));for(var a=r.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;a>l;++l){var c=i[l],h=r[l],f=h.length,p=t.call(c,c&&c.__data__,l,i),d=p.length,v=s[l]=new Array(d),m=o[l]=new Array(d),g=u[l]=new Array(f);n(c,h,v,m,g,p,e);for(var y,_,b=0,x=0;d>b;++b)if(y=v[b]){for(b>=x&&(x=b+1);!(_=m[x])&&++x<d;);y._next=_||null}}return o=new $r(o,i),o._enter=s,o._exit=u,o},Xm=function(){return new $r(this._exit||this._groups.map(Bm),this._parents)},Jm=function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;a>s;++s)for(var u,l=e[s],c=n[s],h=l.length,f=o[s]=new Array(h),p=0;h>p;++p)(u=l[p]||c[p])&&(f[p]=u);for(;i>s;++s)o[s]=e[s];return new $r(o,this._parents)},Qm=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];--a>=0;)(i=r[a])&&(o&&o!==i.nextSibling&&o.parentNode.insertBefore(i,o),o=i);return this},Zm=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ji);for(var n=this._groups,i=n.length,r=new Array(i),a=0;i>a;++a){for(var o,s=n[a],u=s.length,l=r[a]=new Array(u),c=0;u>c;++c)(o=s[c])&&(l[c]=o);l.sort(e)}return new $r(r,this._parents).order()},tg=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},eg=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},ng=function(){for(var t=this._groups,e=0,n=t.length;n>e;++e)for(var i=t[e],r=0,a=i.length;a>r;++r){var o=i[r];if(o)return o}return null},ig=function(){var t=0;return this.each(function(){++t}),t},rg=function(){return!this.node()},ag=function(t){for(var e=this._groups,n=0,i=e.length;i>n;++n)for(var r,a=e[n],o=0,s=a.length;s>o;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},og=function(t,e){var n=Sm(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Zi:Qi:"function"==typeof e?n.local?ir:nr:n.local?er:tr)(n,e))},sg=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},ug=function(t,e,n){var i;return arguments.length>1?this.each((null==e?rr:"function"==typeof e?or:ar)(t,e,null==n?"":n)):sg(i=this.node()).getComputedStyle(i,null).getPropertyValue(t)},lg=function(t,e){return arguments.length>1?this.each((null==e?sr:"function"==typeof e?lr:ur)(t,e)):this.node()[t]};fr.prototype={add:function(t){var e=this._names.indexOf(t);0>e&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var cg=function(t,e){var n=cr(t+"");if(arguments.length<2){for(var i=hr(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?gr:e?vr:mr)(n,e))},hg=function(t){return arguments.length?this.each(null==t?yr:("function"==typeof t?br:_r)(t)):this.node().textContent},fg=function(t){return arguments.length?this.each(null==t?xr:("function"==typeof t?kr:wr)(t)):this.node().innerHTML},pg=function(){return this.each(Mr)},dg=function(){return this.each(Cr)},vg=function(t){var e="function"==typeof t?t:Dm(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},mg=function(t,e){var n="function"==typeof t?t:Dm(t),i=null==e?Tr:"function"==typeof e?e:jm(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},gg=function(){return this.each(Sr)},yg=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},_g=function(t,e){return this.each(("function"==typeof e?Er:Ar)(t,e))},bg=[null];$r.prototype=Nr.prototype={constructor:$r,select:Lm,selectAll:Hm,filter:Vm,data:Gm,enter:Ym,exit:Xm,merge:Jm,order:Qm,sort:Zm,call:tg,nodes:eg,node:ng,size:ig,empty:rg,each:ag,attr:og,style:ug,property:lg,classed:cg,text:hg,html:fg,raise:pg,lower:dg,append:vg,insert:mg,remove:gg,datum:yg,on:Im,dispatch:_g};var xg=function(t){return"string"==typeof t?new $r([[document.querySelector(t)]],[document.documentElement]):new $r([[t]],bg)},wg=function(t){return"string"==typeof t?new $r([document.querySelectorAll(t)],[document.documentElement]):new $r([null==t?[]:t],bg)},kg=function(t,e,n){arguments.length<3&&(n=e,e=zm().changedTouches);for(var i,r=0,a=e?e.length:0;a>r;++r)if((i=e[r]).identifier===n)return Rm(t,i);return null},Mg=function(t,e){null==e&&(e=zm().touches);for(var n=0,i=e?e.length:0,r=new Array(i);i>n;++n)r[n]=Rm(t,e[n]);return r},Cg=$e("start","end","interrupt"),Tg=[],Sg=0,Dg=1,Ag=2,Eg=3,$g=4,Ng=5,Pg=6,Og=function(t,e,n,i,r,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};Ir(t,n,{name:e,index:i,group:r,on:Cg,tween:Tg,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Sg})},Fg=function(t,e){var n,i,r,a=t.__transition,o=!0;if(a){e=null==e?null:e+"";for(r in a)(n=a[r]).name===e?(i=n.state>Ag&&n.state<Ng,n.state=Pg,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}},Ig=function(t){return this.each(function(){Fg(this,t)})},zg=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Fr(this.node(),n).tween,a=0,o=r.length;o>a;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?zr:Rr)(n,t,e))},Rg=function(t,e){var n;return("number"==typeof e?dp:e instanceof qt?lp:(n=qt(e))?(e=n,lp):yp)(t,e)},Ug=function(t,e){var n=Sm(t),i="transform"===n?Cp:Rg;return this.attrTween(t,"function"==typeof e?(n.local?Br:Vr)(n,i,Ur(this,"attr."+t,e)):null==e?(n.local?Lr:jr)(n):(n.local?Hr:qr)(n,i,e))},jg=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Sm(t);return this.tween(n,(i.local?Yr:Wr)(i,e))},Lg=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Kr:Gr)(e,t)):Fr(this.node(),e).delay},qg=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Xr:Jr)(e,t)):Fr(this.node(),e).duration},Hg=function(t){var e=this._id;return arguments.length?this.each(Qr(e,t)):Fr(this.node(),e).ease},Vg=function(t){"function"!=typeof t&&(t=Pm(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;n>r;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],l=0;s>l;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new la(i,this._parents,this._name,this._id)},Bg=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;a>s;++s)for(var u,l=e[s],c=n[s],h=l.length,f=o[s]=new Array(h),p=0;h>p;++p)(u=l[p]||c[p])&&(f[p]=u);for(;i>s;++s)o[s]=e[s];return new la(o,this._parents,this._name,this._id)},Yg=function(t,e){var n=this._id;return arguments.length<2?Fr(this.node(),n).on.on(t):this.each(ta(n,t,e))},Wg=function(){return this.on("end.remove",ea(this._id))},Kg=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=jm(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;r>o;++o)for(var s,u,l=i[o],c=l.length,h=a[o]=new Array(c),f=0;c>f;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,Og(h[f],e,n,f,h,Fr(s,n)));return new la(a,this._parents,e,n)},Gg=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=qm(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;r>s;++s)for(var u,l=i[s],c=l.length,h=0;c>h;++h)if(u=l[h]){for(var f,p=t.call(u,u.__data__,h,l),d=Fr(u,n),v=0,m=p.length;m>v;++v)(f=p[v])&&Og(f,e,n,v,p,d);a.push(p),o.push(u)}return new la(a,o,e,n)},Xg=Nr.prototype.constructor,Jg=function(){return new Xg(this._groups,this._parents)},Qg=function(t,e,n){var i="transform"==(t+="")?Mp:Rg;return null==e?this.styleTween(t,na(t,i)).on("end.style."+t,ia(t)):this.styleTween(t,"function"==typeof e?aa(t,i,Ur(this,"style."+t,e)):ra(t,i,e),n)},Zg=function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,oa(t,e,null==n?"":n))},ty=function(t){return this.tween("text","function"==typeof t?ua(Ur(this,"text",t)):sa(null==t?"":t+""))},ey=function(){for(var t=this._name,e=this._id,n=ha(),i=this._groups,r=i.length,a=0;r>a;++a)for(var o,s=i[a],u=s.length,l=0;u>l;++l)if(o=s[l]){var c=Fr(o,e);Og(o,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new la(i,this._parents,t,n)},ny=0,iy=Nr.prototype;la.prototype=ca.prototype={constructor:la,select:Kg,selectAll:Gg,filter:Vg,merge:Bg,selection:Jg,transition:ey,call:iy.call,nodes:iy.nodes,node:iy.node,size:iy.size,empty:iy.empty,each:iy.each,on:Yg,attr:Ug,attrTween:jg,style:Qg,styleTween:Zg,text:ty,remove:Wg,tween:zg,delay:Lg,duration:qg,ease:Hg};var ry={time:null,delay:0,duration:250,ease:y},ay=function(t){var e,n;t instanceof la?(e=t._id,t=t._name):(e=ha(),(n=ry).time=qe(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;r>a;++a)for(var o,s=i[a],u=s.length,l=0;u>l;++l)(o=s[l])&&Og(o,t,e,l,s,n||fa(o,e));return new la(i,this._parents,t,e)};Nr.prototype.interrupt=Ig,Nr.prototype.transition=ay;var oy=[null],sy=function(t,e){var n,i,r=t.__transition;if(r){e=null==e?null:e+"";for(i in r)if((n=r[i]).state>Dg&&n.name===e)return new la([[t]],oy,e,+i)}return null},uy=Array.prototype.slice,ly=function(t){return t},cy=1,hy=2,fy=3,py=4,dy=1e-6,vy=function(){function t(t){var a,o=0;t.eachAfter(function(t){var n=t.children;n?(t.x=ka(n),t.y=Ca(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)});var s=Sa(t),u=Da(t),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return t.eachAfter(r?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*i}:function(e){e.x=(e.x-l)/(c-l)*n,e.y=(1-(t.y?e.y/t.y:1))*i})}var e=wa,n=1,i=1,r=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(r=!1,n=+e[0],i=+e[1],t):r?null:[n,i]},t.nodeSize=function(e){return arguments.length?(r=!0,n=+e[0],i=+e[1],t):r?[n,i]:null},t},my=function(t){var e,n,i,r,a=this,o=[a];do for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(i=0,r=n.length;r>i;++i)o.push(n[i]);while(o.length);return this},gy=function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},yy=function(t){for(var e,n,i,r=this,a=[r],o=[];r=a.pop();)if(o.push(r),e=r.children)for(n=0,i=e.length;i>n;++n)a.push(e[n]);for(;r=o.pop();)t(r);return this},_y=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})},by=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},xy=function(t){for(var e=this,n=Aa(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},wy=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},ky=function(){var t=[];return this.each(function(e){t.push(e)}),t},My=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},Cy=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e};Fa.prototype=Ea.prototype={constructor:Fa,each:my,eachAfter:yy,eachBefore:gy,sum:_y,sort:by,path:xy,ancestors:wy,descendants:ky,leaves:My,links:Cy,copy:$a};var Ty=function(t){for(var e,n=(t=t.slice()).length,i=null,r=i;n;){var a=new Ia(t[n-1]);r=r?r.next=a:i=a,t[e]=t[--n]}return{head:i,tail:r}},Sy=function(t){return Ra(Ty(t),[])},Dy=function(t){return Ya(t),t},Ay=function(t){return function(){return t}},Ey=function(){function t(t){return t.x=n/2,t.y=i/2,e?t.eachBefore(Ja(e)).eachAfter(Qa(r,.5)).eachBefore(Za(1)):t.eachBefore(Ja(Xa)).eachAfter(Qa(Ga,1)).eachAfter(Qa(r,t.r/Math.min(n,i))).eachBefore(Za(Math.min(n,i)/(2*t.r))),t}var e=null,n=1,i=1,r=Ga;return t.radius=function(n){return arguments.length?(e=Wa(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.padding=function(e){return arguments.length?(r="function"==typeof e?e:Ay(+e),t):r},t},$y=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Ny=function(t,e,n,i,r){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(i-e)/t.value;++s<u;)a=o[s],a.y0=n,a.y1=r,a.x0=e,a.x1=e+=a.value*l},Py=function(){function t(t){var o=t.height+1;return t.x0=t.y0=r,t.x1=n,t.y1=i/o,t.eachBefore(e(i,o)),a&&t.eachBefore($y),t}function e(t,e){return function(n){n.children&&Ny(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var i=n.x0,a=n.y0,o=n.x1-r,s=n.y1-r;i>o&&(i=o=(i+o)/2),a>s&&(a=s=(a+s)/2),n.x0=i,n.y0=a,n.x1=o,n.y1=s}}var n=1,i=1,r=0,a=!1;return t.round=function(e){return arguments.length?(a=!!e,t):a},t.size=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.padding=function(e){return arguments.length?(r=+e,t):r},t},Oy="$",Fy={depth:-1},Iy={},zy=function(){function t(t){var i,r,a,o,s,u,l,c=t.length,h=new Array(c),f={};for(r=0;c>r;++r)i=t[r],s=h[r]=new Fa(i),null!=(u=e(i,r,t))&&(u+="")&&(l=Oy+(s.id=u),f[l]=l in f?Iy:s);for(r=0;c>r;++r)if(s=h[r],u=n(t[r],r,t),null!=u&&(u+="")){if(o=f[Oy+u],!o)throw new Error("missing: "+u);if(o===Iy)throw new Error("ambiguous: "+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=Fy,a.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(Oa),a.parent=null,c>0)throw new Error("cycle");return a}var e=to,n=eo;return t.id=function(n){return arguments.length?(e=Ka(n),t):e},t.parentId=function(e){return arguments.length?(n=Ka(e),t):n},t};uo.prototype=Object.create(Fa.prototype);var Ry=function(){function t(t){var i=lo(t);if(i.eachAfter(e),i.parent.m=-i.z,i.eachBefore(n),u)t.eachBefore(r);else{var l=t,c=t,h=t;t.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)});var f=l===c?1:a(l,c)/2,p=f-l.x,d=o/(c.x+f+p),v=s/(h.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return t}function e(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e){oo(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+a(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+a(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var i,r=t,o=t,s=e,u=r.parent.children[0],l=r.m,c=o.m,h=s.m,f=u.m;s=ro(s),r=io(r),s&&r;)u=io(u),o=ro(o),o.a=t,i=s.z+h-r.z-l+a(s._,r._),i>0&&(ao(so(s,t,n),t,i),l+=i,c+=i),h+=s.m,l+=r.m,f+=u.m,c+=o.m;s&&!ro(o)&&(o.t=s,o.m+=h-c),r&&!io(u)&&(u.t=r,u.m+=l-f,n=t)}return n}function r(t){t.x*=o,t.y=t.depth*s}var a=no,o=1,s=1,u=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(u=!1,o=+e[0],s=+e[1],t):u?null:[o,s]},t.nodeSize=function(e){return arguments.length?(u=!0,o=+e[0],s=+e[1],t):u?[o,s]:null},t},Uy=function(t,e,n,i,r){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(r-n)/t.value;++s<u;)a=o[s],a.x0=e,a.x1=i,a.y0=n,a.y1=n+=a.value*l},jy=(1+Math.sqrt(5))/2,Ly=function Hw(t){function e(e,n,i,r,a){co(t,e,n,i,r,a)}return e.ratio=function(t){return Hw((t=+t)>1?t:1)},e}(jy),qy=function(){function t(t){return t.x0=t.y0=0,t.x1=r,t.y1=a,t.eachBefore(e),o=[0],i&&t.eachBefore($y),t}function e(t){var e=o[t.depth],i=t.x0+e,r=t.y0+e,a=t.x1-e,f=t.y1-e;i>a&&(i=a=(i+a)/2),r>f&&(r=f=(r+f)/2),t.x0=i,t.y0=r,t.x1=a,t.y1=f,t.children&&(e=o[t.depth+1]=s(t)/2,i+=h(t)-e,r+=u(t)-e,a-=l(t)-e,f-=c(t)-e,i>a&&(i=a=(i+a)/2),r>f&&(r=f=(r+f)/2),n(t,i,r,a,f))}var n=Ly,i=!1,r=1,a=1,o=[0],s=Ga,u=Ga,l=Ga,c=Ga,h=Ga;return t.round=function(e){return arguments.length?(i=!!e,t):i},t.size=function(e){return arguments.length?(r=+e[0],a=+e[1],t):[r,a]},t.tile=function(e){return arguments.length?(n=Ka(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:Ay(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop();
},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:Ay(+e),t):u},t.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:Ay(+e),t):l},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:Ay(+e),t):c},t.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:Ay(+e),t):h},t},Hy=function(t,e,n,i,r){function a(t,e,n,i,r,o,s){if(t>=e-1){var l=u[t];return l.x0=i,l.y0=r,l.x1=o,l.y1=s,void 0}for(var h=c[t],f=n/2+h,p=t+1,d=e-1;d>p;){var v=p+d>>>1;c[v]<f?p=v+1:d=v}var m=c[p]-h,g=n-m;if(s-r>o-i){var y=(r*g+s*m)/n;a(t,p,m,i,r,o,y),a(p,e,g,i,y,o,s)}else{var _=(i*g+o*m)/n;a(t,p,m,i,r,_,s),a(p,e,g,_,r,o,s)}}var o,s,u=t.children,l=u.length,c=new Array(l+1);for(c[0]=s=o=0;l>o;++o)c[o+1]=s+=u[o].value;a(0,l,t.value,e,n,i,r)},Vy=function(t,e,n,i,r){(1&t.depth?Uy:Ny)(t,e,n,i,r)},By=function Vw(t){function e(e,n,i,r,a){if((o=e._squarify)&&o.ratio===t)for(var o,s,u,l,c,h=-1,f=o.length,p=e.value;++h<f;){for(s=o[h],u=s.children,l=s.value=0,c=u.length;c>l;++l)s.value+=u[l].value;s.dice?Ny(s,n,i,r,i+=(a-i)*s.value/p):Uy(s,n,i,n+=(r-n)*s.value/p,a),p-=s.value}else e._squarify=o=co(t,e,n,i,r,a),o.ratio=t}return e.ratio=function(t){return Vw((t=+t)>1?t:1)},e}(jy),Yy=function(t,e){function n(){var n,r,a=i.length,o=0,s=0;for(n=0;a>n;++n)r=i[n],o+=r.x,s+=r.y;for(o=o/a-t,s=s/a-e,n=0;a>n;++n)r=i[n],r.x-=o,r.y-=s}var i;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){i=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},Wy=function(t){return function(){return t}},Ky=function(){return 1e-6*(Math.random()-.5)},Gy=function(t){function e(){function t(t,e,n,i,r){var a=t.data,s=t.r,p=h+s;{if(!a)return e>l+p||l-p>i||n>c+p||c-p>r;if(a.index>u.index){var d=l-a.x-a.vx,v=c-a.y-a.vy,m=d*d+v*v;p*p>m&&(0===d&&(d=Ky(),m+=d*d),0===v&&(v=Ky(),m+=v*v),m=(p-(m=Math.sqrt(m)))/m*o,u.vx+=(d*=m)*(p=(s*=s)/(f+s)),u.vy+=(v*=m)*p,a.vx-=d*(p=1-p),a.vy-=v*p)}}}for(var e,i,u,l,c,h,f,p=r.length,d=0;s>d;++d)for(i=j(r,ho,fo).visitAfter(n),e=0;p>e;++e)u=r[e],h=a[u.index],f=h*h,l=u.x+u.vx,c=u.y+u.vy,i.visit(t)}function n(t){if(t.data)return t.r=a[t.data.index];for(var e=t.r=0;4>e;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function i(){if(r){var e,n,i=r.length;for(a=new Array(i),e=0;i>e;++e)n=r[e],a[n.index]=+t(n,e,r)}}var r,a,o=1,s=1;return"function"!=typeof t&&(t=Wy(null==t?1:+t)),e.initialize=function(t){r=t,i()},e.iterations=function(t){return arguments.length?(s=+t,e):s},e.strength=function(t){return arguments.length?(o=+t,e):o},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:Wy(+n),i(),e):t},e},Xy=function(t){function e(t){return 1/Math.min(c[t.source.index],c[t.target.index])}function n(e){for(var n=0,i=t.length;v>n;++n)for(var r,a,o,l,c,f,p,d=0;i>d;++d)r=t[d],a=r.source,o=r.target,l=o.x+o.vx-a.x-a.vx||Ky(),c=o.y+o.vy-a.y-a.vy||Ky(),f=Math.sqrt(l*l+c*c),f=(f-u[d])/f*e*s[d],l*=f,c*=f,o.vx-=l*(p=h[d]),o.vy-=c*p,a.vx+=l*(p=1-p),a.vy+=c*p}function i(){if(l){var e,n,i=l.length,p=t.length,d=a(l,f);for(e=0,c=new Array(i);p>e;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=vo(d,n.source)),"object"!=typeof n.target&&(n.target=vo(d,n.target)),c[n.source.index]=(c[n.source.index]||0)+1,c[n.target.index]=(c[n.target.index]||0)+1;for(e=0,h=new Array(p);p>e;++e)n=t[e],h[e]=c[n.source.index]/(c[n.source.index]+c[n.target.index]);s=new Array(p),r(),u=new Array(p),o()}}function r(){if(l)for(var e=0,n=t.length;n>e;++e)s[e]=+p(t[e],e,t)}function o(){if(l)for(var e=0,n=t.length;n>e;++e)u[e]=+d(t[e],e,t)}var s,u,l,c,h,f=po,p=e,d=Wy(30),v=1;return null==t&&(t=[]),n.initialize=function(t){l=t,i()},n.links=function(e){return arguments.length?(t=e,i(),n):t},n.id=function(t){return arguments.length?(f=t,n):f},n.iterations=function(t){return arguments.length?(v=+t,n):v},n.strength=function(t){return arguments.length?(p="function"==typeof t?t:Wy(+t),r(),n):p},n.distance=function(t){return arguments.length?(d="function"==typeof t?t:Wy(+t),o(),n):d},n},Jy=10,Qy=Math.PI*(3-Math.sqrt(5)),Zy=function(t){function e(){n(),d.call("tick",o),u>s&&(p.stop(),d.call("end",o))}function n(){var e,n,i=t.length;for(s+=(c-s)*l,f.each(function(t){t(s)}),e=0;i>e;++e)n=t[e],null==n.fx?n.x+=n.vx*=h:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=h:(n.y=n.fy,n.vy=0)}function i(){for(var e,n=0,i=t.length;i>n;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var r=Jy*Math.sqrt(n),a=n*Qy;e.x=r*Math.cos(a),e.y=r*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function r(e){return e.initialize&&e.initialize(t),e}var o,s=1,u=.001,l=1-Math.pow(u,1/300),c=0,h=.6,f=a(),p=Be(e),d=$e("tick","end");return null==t&&(t=[]),i(),o={tick:n,restart:function(){return p.restart(e),o},stop:function(){return p.stop(),o},nodes:function(e){return arguments.length?(t=e,i(),f.each(r),o):t},alpha:function(t){return arguments.length?(s=+t,o):s},alphaMin:function(t){return arguments.length?(u=+t,o):u},alphaDecay:function(t){return arguments.length?(l=+t,o):+l},alphaTarget:function(t){return arguments.length?(c=+t,o):c},velocityDecay:function(t){return arguments.length?(h=1-t,o):1-h},force:function(t,e){return arguments.length>1?(null==e?f.remove(t):f.set(t,r(e)),o):f.get(t)},find:function(e,n,i){var r,a,o,s,u,l=0,c=t.length;for(null==i?i=1/0:i*=i,l=0;c>l;++l)s=t[l],r=e-s.x,a=n-s.y,o=r*r+a*a,i>o&&(u=s,i=o);return u},on:function(t,e){return arguments.length>1?(d.on(t,e),o):d.on(t)}}},t_=function(){function t(t){var e,s=r.length,u=j(r,mo,go).visitAfter(n);for(o=t,e=0;s>e;++e)a=r[e],u.visit(i)}function e(){if(r){var t,e,n=r.length;for(s=new Array(n),t=0;n>t;++t)e=r[t],s[e.index]=+u(e,t,r)}}function n(t){var e,n,i,r,a,o=0;if(t.length){for(i=r=a=0;4>a;++a)(e=t[a])&&(n=e.value)&&(o+=n,i+=n*e.x,r+=n*e.y);t.x=i/o,t.y=r/o}else{e=t,e.x=e.data.x,e.y=e.data.y;do o+=s[e.data.index];while(e=e.next)}t.value=o}function i(t,e,n,i){if(!t.value)return!0;var r=t.x-a.x,u=t.y-a.y,f=i-e,p=r*r+u*u;if(p>f*f/h)return c>p&&(0===r&&(r=Ky(),p+=r*r),0===u&&(u=Ky(),p+=u*u),l>p&&(p=Math.sqrt(l*p)),a.vx+=r*t.value*o/p,a.vy+=u*t.value*o/p),!0;if(!(t.length||p>=c)){(t.data!==a||t.next)&&(0===r&&(r=Ky(),p+=r*r),0===u&&(u=Ky(),p+=u*u),l>p&&(p=Math.sqrt(l*p)));do t.data!==a&&(f=s[t.data.index]*o/p,a.vx+=r*f,a.vy+=u*f);while(t=t.next)}}var r,a,o,s,u=Wy(-30),l=1,c=1/0,h=.81;return t.initialize=function(t){r=t,e()},t.strength=function(n){return arguments.length?(u="function"==typeof n?n:Wy(+n),e(),t):u},t.distanceMin=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t.distanceMax=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.theta=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t},e_=function(t){function e(t){for(var e,n=0,o=i.length;o>n;++n)e=i[n],e.vx+=(a[n]-e.x)*r[n]*t}function n(){if(i){var e,n=i.length;for(r=new Array(n),a=new Array(n),e=0;n>e;++e)r[e]=isNaN(a[e]=+t(i[e],e,i))?0:+o(i[e],e,i)}}var i,r,a,o=Wy(.1);return"function"!=typeof t&&(t=Wy(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(o="function"==typeof t?t:Wy(+t),n(),e):o},e.x=function(i){return arguments.length?(t="function"==typeof i?i:Wy(+i),n(),e):t},e},n_=function(t){function e(t){for(var e,n=0,o=i.length;o>n;++n)e=i[n],e.vy+=(a[n]-e.y)*r[n]*t}function n(){if(i){var e,n=i.length;for(r=new Array(n),a=new Array(n),e=0;n>e;++e)r[e]=isNaN(a[e]=+t(i[e],e,i))?0:+o(i[e],e,i)}}var i,r,a,o=Wy(.1);return"function"!=typeof t&&(t=Wy(null==t?0:+t)),e.initialize=function(t){i=t,n()},e.strength=function(t){return arguments.length?(o="function"==typeof t?t:Wy(+t),n(),e):o},e.y=function(i){return arguments.length?(t="function"==typeof i?i:Wy(+i),n(),e):t},e},i_=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},r_=function(t){var e=t.document.documentElement,n=xg(t).on("dragstart.drag",i_,!0);"onselectstart"in e?n.on("selectstart.drag",i_,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},a_=function(t){return function(){return t}};bo.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var o_=function(){function e(t){t.on("mousedown.drag",n).on("touchstart.drag",a).on("touchmove.drag",o).on("touchend.drag touchcancel.drag",s).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!c&&h.apply(this,arguments)){var e=u("mouse",f.apply(this,arguments),Um,this,arguments);e&&(xg(t.event.view).on("mousemove.drag",i,!0).on("mouseup.drag",r,!0),r_(t.event.view),yo(),l=!1,e("start"))}}function i(){i_(),l=!0,d.mouse("drag")}function r(){xg(t.event.view).on("mousemove.drag mouseup.drag",null),_o(t.event.view,l),i_(),d.mouse("end")}function a(){if(h.apply(this,arguments)){var e,n,i=t.event.changedTouches,r=f.apply(this,arguments),a=i.length;for(e=0;a>e;++e)(n=u(i[e].identifier,r,kg,this,arguments))&&(yo(),n("start"))}}function o(){var e,n,i=t.event.changedTouches,r=i.length;for(e=0;r>e;++e)(n=d[i[e].identifier])&&(i_(),n("drag"))}function s(){var e,n,i=t.event.changedTouches,r=i.length;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),e=0;r>e;++e)(n=d[i[e].identifier])&&(yo(),n("end"))}function u(n,i,r,a,o){var s,u,l,c=r(i,n),h=v.copy();if(Bi(new bo(e,"beforestart",s,n,m,c[0],c[1],0,0,h),function(){return null==(t.event.subject=s=p.apply(a,o))?!1:(u=s.x-c[0]||0,l=s.y-c[1]||0,!0)}))return function f(t){var p,v=c;switch(t){case"start":d[n]=f,p=m++;break;case"end":delete d[n],--m;case"drag":c=r(i,n),p=m}Bi(new bo(e,t,s,n,p,c[0]+u,c[1]+l,c[0]-v[0],c[1]-v[1],h),h.apply,h,[t,a,o])}}var l,c,h=xo,f=wo,p=ko,d={},v=$e("start","drag","end"),m=0;return e.filter=function(t){return arguments.length?(h="function"==typeof t?t:a_(!!t),e):h},e.container=function(t){return arguments.length?(f="function"==typeof t?t:a_(t),e):f},e.subject=function(t){return arguments.length?(p="function"==typeof t?t:a_(t),e):p},e.on=function(){var t=v.on.apply(v,arguments);return t===v?e:t},e},s_=function(t){return function(){return t}};To.prototype={constructor:To,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Eo(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Do(this,n),t=n,n=t.U),n.C=!1,i.C=!0,Ao(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Ao(this,n),t=n,n=t.U),n.C=!1,i.C=!0,Do(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?Eo(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,Do(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ao(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Do(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,Ao(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Do(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Ao(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var u_,l_,c_,h_,f_,p_=[],d_=[],v_=1e-6,m_=1e-12;es.prototype={constructor:es,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Uo(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(a=(r=n.halfedges).length)for(var r,a,o,s=n.site,u=-1,l=e[r[a-1]],c=l.left===s?l.right:l.left;++u<a;)o=c,l=e[r[u]],c=l.left===s?l.right:l.left,o&&c&&i<o.index&&i<c.index&&Zo(s,o,c)<0&&t.push([s.data,o.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,a=this,o=a._found||0,s=a.cells.length;!(r=a.cells[o]);)if(++o>=s)return null;var u=t-r.site[0],l=e-r.site[1],c=u*u+l*l;do r=a.cells[i=o],o=null,r.halfedges.forEach(function(n){var i=a.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var u=t-s[0],l=e-s[1],h=u*u+l*l;c>h&&(c=h,o=s.index)}});while(null!==o);return a._found=i,null==n||n*n>=c?r.site:null}};var g_=function(){function t(t){return new es(t.map(function(i,r){var a=[Math.round(e(i,r,t)/v_)*v_,Math.round(n(i,r,t)/v_)*v_];return a.index=r,a.data=i,a}),i)}var e=Mo,n=Co,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:s_(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:s_(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t},y_=function(t){return function(){return t}};is.prototype={constructor:is,scale:function(t){return 1===t?this:new is(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new is(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var __=new is(1,0,0);rs.prototype=is.prototype;var b_=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},x_=function(){function e(t){t.on("wheel.zoom",l).on("mousedown.zoom",c).on("dblclick.zoom",h).on("touchstart.zoom",f).on("touchmove.zoom",p).on("touchend.zoom touchcancel.zoom",d).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",us)}function n(t,e){return e=Math.max(_,Math.min(b,e)),e===t.k?t:new is(e,t.x,t.y)}function i(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new is(t.k,i,r)}function r(t,e){var n=t.invertX(e[0][0])-x,i=t.invertX(e[1][0])-w,r=t.invertY(e[0][1])-k,a=t.invertY(e[1][1])-M;return t.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function a(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,e,n){t.on("start.zoom",function(){s(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){s(this,arguments).end()}).tween("zoom",function(){var t=this,i=arguments,r=s(t,i),o=y.apply(t,i),u=n||a(o),l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,i):e,f=T(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=l/e[2];t=new is(n,u[0]-e[0]*n,u[1]-e[1]*n)}r.zoom(null,t)}})}function s(t,e){for(var n,i=0,r=S.length;r>i;++i)if((n=S[i]).that===t)return n;return new u(t,e)}function u(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=y.apply(t,e)}function l(){function e(){a.wheel=null,a.end()}if(g.apply(this,arguments)){var a=s(this,arguments),o=this.__zoom,u=Math.max(_,Math.min(b,o.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),l=Um(this);if(a.wheel)a.mouse[0][0]===l[0]&&a.mouse[0][1]===l[1]||(a.mouse[1]=o.invert(a.mouse[0]=l)),clearTimeout(a.wheel);else{if(o.k===u)return;a.mouse=[l,o.invert(l)],Fg(this),a.start()}b_(),a.wheel=setTimeout(e,E),a.zoom("mouse",r(i(n(o,u),a.mouse[0],a.mouse[1]),a.extent))}}function c(){function e(){b_(),a.moved=!0,a.zoom("mouse",r(i(a.that.__zoom,a.mouse[0]=Um(a.that),a.mouse[1]),a.extent))}function n(){o.on("mousemove.zoom mouseup.zoom",null),_o(t.event.view,a.moved),b_(),a.end()}if(!m&&g.apply(this,arguments)){var a=s(this,arguments),o=xg(t.event.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",n,!0),u=Um(this);r_(t.event.view),as(),a.mouse=[u,this.__zoom.invert(u)],Fg(this),a.start()}}function h(){if(g.apply(this,arguments)){var a=this.__zoom,s=Um(this),u=a.invert(s),l=a.k*(t.event.shiftKey?.5:2),c=r(i(n(a,l),s,u),y.apply(this,arguments));b_(),C>0?xg(this).transition().duration(C).call(o,c,s):xg(this).call(e.transform,c)}}function f(){if(g.apply(this,arguments)){var e,n,i,r,a=s(this,arguments),o=t.event.changedTouches,u=o.length;for(as(),n=0;u>n;++n)i=o[n],r=kg(this,o,i.identifier),r=[r,this.__zoom.invert(r),i.identifier],a.touch0?a.touch1||(a.touch1=r):(a.touch0=r,e=!0);return v&&(v=clearTimeout(v),!a.touch1)?(a.end(),r=xg(this).on("dblclick.zoom"),void(r&&r.apply(this,arguments))):void(e&&(v=setTimeout(function(){v=null},A),Fg(this),a.start()))}}function p(){var e,a,o,u,l=s(this,arguments),c=t.event.changedTouches,h=c.length;for(b_(),v&&(v=clearTimeout(v)),e=0;h>e;++e)a=c[e],o=kg(this,c,a.identifier),l.touch0&&l.touch0[2]===a.identifier?l.touch0[0]=o:l.touch1&&l.touch1[2]===a.identifier&&(l.touch1[0]=o);if(a=l.that.__zoom,l.touch1){var f=l.touch0[0],p=l.touch0[1],d=l.touch1[0],m=l.touch1[1],g=(g=d[0]-f[0])*g+(g=d[1]-f[1])*g,y=(y=m[0]-p[0])*y+(y=m[1]-p[1])*y;a=n(a,Math.sqrt(g/y)),o=[(f[0]+d[0])/2,(f[1]+d[1])/2],u=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!l.touch0)return;o=l.touch0[0],u=l.touch0[1]}l.zoom("touch",r(i(a,o,u),l.extent))}function d(){var e,n,i=s(this,arguments),r=t.event.changedTouches,a=r.length;for(as(),m&&clearTimeout(m),m=setTimeout(function(){m=null},A),e=0;a>e;++e)n=r[e],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0||i.end()}var v,m,g=os,y=ss,_=0,b=1/0,x=-b,w=b,k=x,M=w,C=250,T=Ep,S=[],D=$e("start","zoom","end"),A=500,E=150;return e.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",us),t!==n?o(t,e):n.interrupt().each(function(){s(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){var t=this.__zoom.k,e="function"==typeof n?n.apply(this,arguments):n;return t*e})},e.scaleTo=function(t,o){e.transform(t,function(){var t=y.apply(this,arguments),e=this.__zoom,s=a(t),u=e.invert(s),l="function"==typeof o?o.apply(this,arguments):o;return r(i(n(e,l),s,u),t)})},e.translateBy=function(t,n,i){e.transform(t,function(){return r(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),y.apply(this,arguments))})},u.prototype={start:function(){return 1===++this.active&&(this.index=S.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(S.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Bi(new ns(e,t,this.that.__zoom),D.apply,D,[t,this.that,this.args])}},e.filter=function(t){return arguments.length?(g="function"==typeof t?t:y_(!!t),e):g},e.extent=function(t){return arguments.length?(y="function"==typeof t?t:y_([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):y},e.scaleExtent=function(t){return arguments.length?(_=+t[0],b=+t[1],e):[_,b]},e.translateExtent=function(t){return arguments.length?(x=+t[0][0],w=+t[1][0],k=+t[0][1],M=+t[1][1],e):[[x,k],[w,M]]},e.duration=function(t){return arguments.length?(C=+t,e):C},e.interpolate=function(t){return arguments.length?(T=t,e):T},e.on=function(){var t=D.on.apply(D,arguments);return t===D?e:t},e},w_=function(t){return function(){return t}},k_=function(t,e,n){this.target=t,this.type=e,this.selection=n},M_=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},C_={name:"drag"},T_={name:"space"},S_={name:"handle"},D_={name:"center"},A_={name:"x",handles:["e","w"].map(cs),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},E_={name:"y",handles:["n","s"].map(cs),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},$_={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(cs),input:function(t){return t},output:function(t){return t}},N_={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},P_={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},O_={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},F_={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},I_={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},z_=function(){return ys($_)},R_=Math.cos,U_=Math.sin,j_=Math.PI,L_=j_/2,q_=2*j_,H_=Math.max,V_=function(){function t(t){var a,o,s,u,l,c,h=t.length,f=[],p=Rl(h),d=[],v=[],m=v.groups=new Array(h),g=new Array(h*h);for(a=0,l=-1;++l<h;){for(o=0,c=-1;++c<h;)o+=t[l][c];f.push(o),d.push(Rl(h)),a+=o}for(n&&p.sort(function(t,e){return n(f[t],f[e])}),i&&d.forEach(function(e,n){e.sort(function(e,r){return i(t[n][e],t[n][r])})}),a=H_(0,q_-e*h)/a,u=a?e:q_/h,o=0,l=-1;++l<h;){for(s=o,c=-1;++c<h;){var y=p[l],_=d[y][c],b=t[y][_],x=o,w=o+=b*a;g[_*h+y]={index:y,subindex:_,startAngle:x,endAngle:w,value:b}}m[y]={index:y,startAngle:s,endAngle:o,value:f[y]},o+=u}for(l=-1;++l<h;)for(c=l-1;++c<h;){var k=g[c*h+l],M=g[l*h+c];(k.value||M.value)&&v.push(k.value<M.value?{source:M,target:k}:{source:k,target:M})}return r?v.sort(r):v}var e=0,n=null,i=null,r=null;return t.padAngle=function(n){return arguments.length?(e=H_(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(i=e,t):i},t.sortChords=function(e){return arguments.length?(null==e?r=null:(r=_s(e))._=e,t):r&&r._},t},B_=Array.prototype.slice,Y_=function(t){return function(){return t}},W_=function(){function t(){var t,s=B_.call(arguments),u=e.apply(this,s),l=n.apply(this,s),c=+i.apply(this,(s[0]=u,s)),h=r.apply(this,s)-L_,f=a.apply(this,s)-L_,p=c*R_(h),d=c*U_(h),v=+i.apply(this,(s[0]=l,s)),m=r.apply(this,s)-L_,g=a.apply(this,s)-L_;return o||(o=t=O()),o.moveTo(p,d),o.arc(0,0,c,h,f),h===m&&f===g||(o.quadraticCurveTo(0,0,v*R_(m),v*U_(m)),o.arc(0,0,v,m,g)),o.quadraticCurveTo(0,0,p,d),o.closePath(),t?(o=null,t+""||null):void 0}var e=bs,n=xs,i=ws,r=ks,a=Ms,o=null;return t.radius=function(e){return arguments.length?(i="function"==typeof e?e:Y_(+e),t):i},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Y_(+e),t):r},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Y_(+e),t):a},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t},K_=function(){return new Cs};Cs.prototype={constructor:Cs,reset:function(){this.s=this.t=0},add:function(t){Ts(Tb,t,this.t),Ts(this,Tb.s,this.s),this.s?this.t+=Tb.t:this.s=Tb.t},valueOf:function(){return this.s}};var G_,X_,J_,Q_,Z_,tb,eb,nb,ib,rb,ab,ob,sb,ub,lb,cb,hb,fb,pb,db,vb,mb,gb,yb,_b,bb,xb,wb,kb,Mb,Cb,Tb=new Cs,Sb=1e-6,Db=1e-12,Ab=Math.PI,Eb=Ab/2,$b=Ab/4,Nb=2*Ab,Pb=180/Ab,Ob=Ab/180,Fb=Math.abs,Ib=Math.atan,zb=Math.atan2,Rb=Math.cos,Ub=Math.ceil,jb=Math.exp,Lb=Math.log,qb=Math.pow,Hb=Math.sin,Vb=Math.sign||function(t){return t>0?1:0>t?-1:0},Bb=Math.sqrt,Yb=Math.tan,Wb={Feature:function(t,e){$s(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)$s(n[i].geometry,e)}},Kb={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ns(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ns(n[i],e,0)},Polygon:function(t,e){Ps(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ps(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)$s(n[i],e)}},Gb=function(t,e){t&&Wb.hasOwnProperty(t.type)?Wb[t.type](t,e):$s(t,e)},Xb=K_(),Jb=K_(),Qb={point:Es,lineStart:Es,lineEnd:Es,polygonStart:function(){Xb.reset(),Qb.lineStart=Os,Qb.lineEnd=Fs},polygonEnd:function(){var t=+Xb;Jb.add(0>t?Nb+t:t),this.lineStart=this.lineEnd=this.point=Es},sphere:function(){Jb.add(Nb)}},Zb=function(t){return Jb.reset(),Gb(t,Qb),2*Jb},tx=K_(),ex={point:Bs,lineStart:Ws,lineEnd:Ks,polygonStart:function(){ex.point=Gs,ex.lineStart=Xs,ex.lineEnd=Js,tx.reset(),Qb.polygonStart()},polygonEnd:function(){Qb.polygonEnd(),ex.point=Bs,ex.lineStart=Ws,ex.lineEnd=Ks,0>Xb?(tb=-(nb=180),eb=-(ib=90)):tx>Sb?ib=90:-Sb>tx&&(eb=-90),lb[0]=tb,lb[1]=nb}},nx=function(t){var e,n,i,r,a,o,s;if(ib=nb=-(tb=eb=1/0),ub=[],Gb(t,ex),n=ub.length){for(ub.sort(Zs),e=1,i=ub[0],a=[i];n>e;++e)r=ub[e],tu(i,r[0])||tu(i,r[1])?(Qs(i[0],r[1])>Qs(i[0],i[1])&&(i[1]=r[1]),Qs(r[0],i[1])>Qs(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-(1/0),n=a.length-1,e=0,i=a[n];n>=e;i=r,++e)r=a[e],(s=Qs(i[1],r[0]))>o&&(o=s,tb=r[0],nb=i[1])}return ub=lb=null,tb===1/0||eb===1/0?[[NaN,NaN],[NaN,NaN]]:[[tb,eb],[nb,ib]]},ix={sphere:Es,point:eu,lineStart:iu,lineEnd:ou,polygonStart:function(){ix.lineStart=su,ix.lineEnd=uu},polygonEnd:function(){ix.lineStart=iu,ix.lineEnd=ou}},rx=function(t){cb=hb=fb=pb=db=vb=mb=gb=yb=_b=bb=0,Gb(t,ix);var e=yb,n=_b,i=bb,r=e*e+n*n+i*i;return Db>r&&(e=vb,n=mb,i=gb,Sb>hb&&(e=fb,n=pb,i=db),r=e*e+n*n+i*i,Db>r)?[NaN,NaN]:[zb(n,e)*Pb,Ds(i/Bb(r))*Pb]},ax=function(t){return function(){return t}},ox=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n};hu.invert=hu;var sx,ux,lx,cx,hx,fx,px,dx,vx,mx,gx,yx=function(t){function e(e){return e=t(e[0]*Ob,e[1]*Ob),e[0]*=Pb,e[1]*=Pb,e}return t=fu(t[0]*Ob,t[1]*Ob,t.length>2?t[2]*Ob:0),e.invert=function(e){return e=t.invert(e[0]*Ob,e[1]*Ob),e[0]*=Pb,e[1]*=Pb,e},e},_x=function(){function t(t,e){n.push(t=i(t,e)),t[0]*=Pb,t[1]*=Pb}function e(){var t=r.apply(this,arguments),e=a.apply(this,arguments)*Ob,u=o.apply(this,arguments)*Ob;return n=[],i=fu(-t[0]*Ob,-t[1]*Ob,0).invert,mu(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=i=null,t}var n,i,r=ax([0,0]),a=ax(90),o=ax(6),s={point:t};return e.center=function(t){return arguments.length?(r="function"==typeof t?t:ax([+t[0],+t[1]]),e):r},e.radius=function(t){return arguments.length?(a="function"==typeof t?t:ax(+t),e):a},e.precision=function(t){return arguments.length?(o="function"==typeof t?t:ax(+t),e):o},e},bx=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Es,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},xx=function(t,e,n,i,r,a){var o,s=t[0],u=t[1],l=e[0],c=e[1],h=0,f=1,p=l-s,d=c-u;if(o=n-s,p||!(o>0)){if(o/=p,0>p){if(h>o)return;f>o&&(f=o)}else if(p>0){if(o>f)return;o>h&&(h=o)}if(o=r-s,p||!(0>o)){if(o/=p,0>p){if(o>f)return;o>h&&(h=o)}else if(p>0){if(h>o)return;f>o&&(f=o)}if(o=i-u,d||!(o>0)){if(o/=d,0>d){if(h>o)return;f>o&&(f=o)}else if(d>0){if(o>f)return;o>h&&(h=o)}if(o=a-u,d||!(0>o)){if(o/=d,0>d){if(o>f)return;o>h&&(h=o)}else if(d>0){if(h>o)return;f>o&&(f=o)}return h>0&&(t[0]=s+h*p,t[1]=u+h*d),1>f&&(e[0]=s+f*p,e[1]=u+f*d),!0}}}}},wx=function(t,e){return Fb(t[0]-e[0])<Sb&&Fb(t[1]-e[1])<Sb},kx=function(t,e,n,i,r){var a,o,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(wx(i,o)){for(r.lineStart(),a=0;e>a;++a)r.point((i=t[a])[0],i[1]);return void r.lineEnd()}s.push(n=new yu(i,t,null,!0)),u.push(n.o=new yu(i,null,n,!1)),s.push(n=new yu(o,t,null,!1)),u.push(n.o=new yu(o,null,n,!0))}}),s.length){for(u.sort(e),_u(s),_u(u),a=0,o=u.length;o>a;++a)u[a].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,o=l.length;o>a;++a)r.point((c=l[a])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(l=f.p.z,a=l.length-1;a>=0;--a)r.point((c=l[a])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,l=f.z,p=!p}while(!f.v);r.lineEnd()}}},Mx=1e9,Cx=-Mx,Tx=function(){var t,e,n,i=0,r=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=bu(i,r,a,o)(e=n)},extent:function(s){return arguments.length?(i=+s[0][0],r=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[i,r],[a,o]]}}},Sx=K_(),Dx={sphere:Es,point:Es,lineStart:xu,lineEnd:Es,polygonStart:Es,polygonEnd:Es},Ax=function(t){return Sx.reset(),Gb(t,Dx),+Sx},Ex=[null,null],$x={type:"LineString",coordinates:Ex},Nx=function(t,e){return Ex[0]=t,Ex[1]=e,Ax($x)},Px=function(t,e){var n=t[0]*Ob,i=t[1]*Ob,r=e[0]*Ob,a=e[1]*Ob,o=Rb(i),s=Hb(i),u=Rb(a),l=Hb(a),c=o*Rb(n),h=o*Hb(n),f=u*Rb(r),p=u*Hb(r),d=2*Ds(Bb(As(a-i)+o*u*As(r-n))),v=Hb(d),m=d?function(t){var e=Hb(t*=d)/v,n=Hb(d-t)/v,i=n*c+e*f,r=n*h+e*p,a=n*s+e*l;return[zb(r,i)*Pb,zb(a,Bb(i*i+r*r))*Pb]}:function(){return[n*Pb,i*Pb]};return m.distance=d,m},Ox=function(t){return t},Fx=K_(),Ix=K_(),zx={point:Es,lineStart:Es,lineEnd:Es,polygonStart:function(){zx.lineStart=Au,zx.lineEnd=Nu},polygonEnd:function(){zx.lineStart=zx.lineEnd=zx.point=Es,Fx.add(Fb(Ix)),Ix.reset()},result:function(){var t=Fx/2;return Fx.reset(),t}},Rx=1/0,Ux=Rx,jx=-Rx,Lx=jx,qx={point:Pu,lineStart:Es,lineEnd:Es,polygonStart:Es,polygonEnd:Es,result:function(){var t=[[Rx,Ux],[jx,Lx]];return jx=Lx=-(Ux=Rx=1/0),t}},Hx=0,Vx=0,Bx=0,Yx=0,Wx=0,Kx=0,Gx=0,Xx=0,Jx=0,Qx={point:Ou,lineStart:Fu,lineEnd:Ru,polygonStart:function(){Qx.lineStart=Uu,Qx.lineEnd=ju},polygonEnd:function(){Qx.point=Ou,Qx.lineStart=Fu,Qx.lineEnd=Ru},result:function(){var t=Jx?[Gx/Jx,Xx/Jx]:Kx?[Yx/Kx,Wx/Kx]:Bx?[Hx/Bx,Vx/Bx]:[NaN,NaN];return Hx=Vx=Bx=Yx=Wx=Kx=Gx=Xx=Jx=0,t}};Hu.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Nb)}},result:Es},Vu.prototype={_circle:Bu(4.5),pointRadius:function(t){return this._circle=Bu(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var Zx=function(t,e){function n(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),Gb(t,i(r))),r.result()}var i,r,a=4.5;return n.area=function(t){return Gb(t,i(zx)),zx.result()},n.bounds=function(t){return Gb(t,i(qx)),qx.result()},n.centroid=function(t){return Gb(t,i(Qx)),Qx.result()},n.projection=function(e){return arguments.length?(i=null==e?(t=null,Ox):(t=e).stream,n):t},n.context=function(t){return arguments.length?(r=null==t?(e=null,new Vu):new Hu(e=t),"function"!=typeof a&&r.pointRadius(a),n):e},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),n):a},n.projection(t).context(e)},tw=K_(),ew=function(t,e){var n=e[0],i=e[1],r=[Hb(n),-Rb(n),0],a=0,o=0;tw.reset();for(var s=0,u=t.length;u>s;++s)if(c=(l=t[s]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+$b,d=Hb(p),v=Rb(p),m=0;c>m;++m,f=y,d=b,v=x,h=g){var g=l[m],y=g[0],_=g[1]/2+$b,b=Hb(_),x=Rb(_),w=y-f,k=w>=0?1:-1,M=k*w,C=M>Ab,T=d*b;
if(tw.add(zb(T*k*Hb(M),v*x+T*Rb(M))),a+=C?w+k*Nb:w,C^f>=n^y>=n){var S=Ls(Us(h),Us(g));Vs(S);var D=Ls(r,S);Vs(D);var A=(C^w>=0?-1:1)*Ds(D[2]);(i>A||i===A&&(S[0]||S[1]))&&(o+=C^w>=0?1:-1)}}return(-Sb>a||Sb>a&&-Sb>tw)^1&o},nw=function(t,e,n,i){return function(r,a){function o(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function s(t,e){var n=r(t,e);m.point(n[0],n[1])}function u(){x.point=s,m.lineStart()}function l(){x.point=o,m.lineEnd()}function c(t,e){v.push([t,e]);var n=r(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),v=[]}function f(){c(v[0][0],v[0][1]),_.lineEnd();var t,e,n,i,r=_.clean(),o=y.result(),s=o.length;if(v.pop(),p.push(v),v=null,s)if(1&r){if(n=o[0],(e=n.length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart(),t=0;e>t;++t)a.point((i=n[t])[0],i[1]);a.lineEnd()}}else s>1&&2&r&&o.push(o.pop().concat(o.shift())),d.push(o.filter(Yu))}var p,d,v,m=e(a),g=r.invert(i[0],i[1]),y=bx(),_=e(y),b=!1,x={point:o,lineStart:u,lineEnd:l,polygonStart:function(){x.point=c,x.lineStart=h,x.lineEnd=f,d=[],p=[]},polygonEnd:function(){x.point=o,x.lineStart=u,x.lineEnd=l,d=Jl(d);var t=ew(p,g);d.length?(b||(a.polygonStart(),b=!0),kx(d,Wu,t,n,a)):t&&(b||(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),d=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return x}},iw=nw(function(){return!0},Ku,Xu,[-Ab,-Eb]),rw=function(t,e){function n(n,i,r,a){mu(a,t,e,r,n,i)}function i(t,e){return Rb(t)*Rb(e)>s}function r(t){var e,n,r,s,c;return{lineStart:function(){s=r=!1,c=1},point:function(h,f){var p,d=[h,f],v=i(h,f),m=u?v?0:o(h,f):v?o(h+(0>h?Ab:-Ab),f):0;if(!e&&(s=r=v)&&t.lineStart(),v!==r&&(p=a(e,d),(wx(e,p)||wx(d,p))&&(d[0]+=Sb,d[1]+=Sb,v=i(d[0],d[1]))),v!==r)c=0,v?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(l&&e&&u^v){var g;m&n||!(g=a(d,e,!0))||(c=0,u?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!v||e&&wx(e,d)||t.point(d[0],d[1]),e=d,r=v,n=m},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return c|(s&&r)<<1}}}function a(t,e,n){var i=Us(t),r=Us(e),a=[1,0,0],o=Ls(i,r),u=js(o,o),l=o[0],c=u-l*l;if(!c)return!n&&t;var h=s*u/c,f=-s*l/c,p=Ls(a,o),d=Hs(a,h),v=Hs(o,f);qs(d,v);var m=p,g=js(d,m),y=js(m,m),_=g*g-y*(js(d,d)-1);if(!(0>_)){var b=Bb(_),x=Hs(m,(-g-b)/y);if(qs(x,d),x=Rs(x),!n)return x;var w,k=t[0],M=e[0],C=t[1],T=e[1];k>M&&(w=k,k=M,M=w);var S=M-k,D=Fb(S-Ab)<Sb,A=D||Sb>S;if(!D&&C>T&&(w=C,C=T,T=w),A?D?C+T>0^x[1]<(Fb(x[0]-k)<Sb?C:T):C<=x[1]&&x[1]<=T:S>Ab^(k<=x[0]&&x[0]<=M)){var E=Hs(m,(-g+b)/y);return qs(E,d),[x,Rs(E)]}}}function o(e,n){var i=u?t:Ab-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var s=Rb(t),u=s>0,l=Fb(s)>Sb;return nw(i,r,n,u?[0,-t]:[-Ab,t-Ab])},aw=function(t){return{stream:Ju(t)}};Qu.prototype={constructor:Qu,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ow=16,sw=Rb(30*Ob),uw=function(t,e){return+e?nl(t,e):el(t)},lw=Ju({point:function(t,e){this.stream.point(t*Ob,e*Ob)}}),cw=function(){return al(sl).scale(155.424).center([0,33.6442])},hw=function(){return cw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},fw=function(){function t(t){var e=t[0],n=t[1];return s=null,r.point(e,n),s||(a.point(e,n),s)||(o.point(e,n),s)}function e(){return n=i=null,t}var n,i,r,a,o,s,u=hw(),l=cw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=cw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?l:r>=.166&&.234>r&&i>=-.214&&-.115>i?c:u).invert(t)},t.stream=function(t){return n&&i===t?n:n=ul([u.stream(i=t),l.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),l.scale(.35*e),c.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),i=+t[0],s=+t[1];return r=u.translate(t).clipExtent([[i-.455*n,s-.238*n],[i+.455*n,s+.238*n]]).stream(h),a=l.translate([i-.307*n,s+.201*n]).clipExtent([[i-.425*n+Sb,s+.12*n+Sb],[i-.214*n-Sb,s+.234*n-Sb]]).stream(h),o=c.translate([i-.205*n,s+.212*n]).clipExtent([[i-.214*n+Sb,s+.166*n+Sb],[i-.115*n-Sb,s+.234*n-Sb]]).stream(h),e()},t.fitExtent=function(e,n){return Zu(t,e,n)},t.fitSize=function(e,n){return tl(t,e,n)},t.scale(1070)},pw=ll(function(t){return Bb(2/(1+t))});pw.invert=cl(function(t){return 2*Ds(t/2)});var dw=function(){return il(pw).scale(124.75).clipAngle(179.999)},vw=ll(function(t){return(t=Ss(t))&&t/Hb(t)});vw.invert=cl(function(t){return t});var mw=function(){return il(vw).scale(79.4188).clipAngle(179.999)};hl.invert=function(t,e){return[t,2*Ib(jb(e))-Eb]};var gw=function(){return fl(hl).scale(961/Nb)},yw=function(){return al(dl).scale(109.5).parallels([30,30])};vl.invert=vl;var _w=function(){return il(vl).scale(152.63)},bw=function(){return al(ml).scale(131.154).center([0,13.9389])};gl.invert=cl(Ib);var xw=function(){return il(gl).scale(144.049).clipAngle(60)},ww=function(){function t(){return r=a=null,o}var e,n,i,r,a,o,s=1,u=0,l=0,c=1,h=1,f=Ox,p=null,d=Ox;return o={stream:function(t){return r&&a===t?r:r=f(d(a=t))},clipExtent:function(r){return arguments.length?(d=null==r?(p=e=n=i=null,Ox):bu(p=+r[0][0],e=+r[0][1],n=+r[1][0],i=+r[1][1]),t()):null==p?null:[[p,e],[n,i]]},scale:function(e){return arguments.length?(f=yl((s=+e)*c,s*h,u,l),t()):s},translate:function(e){return arguments.length?(f=yl(s*c,s*h,u=+e[0],l=+e[1]),t()):[u,l]},reflectX:function(e){return arguments.length?(f=yl(s*(c=e?-1:1),s*h,u,l),t()):0>c},reflectY:function(e){return arguments.length?(f=yl(s*c,s*(h=e?-1:1),u,l),t()):0>h},fitExtent:function(t,e){return Zu(o,t,e)},fitSize:function(t,e){return tl(o,t,e)}}};_l.invert=cl(Ds);var kw=function(){return il(_l).scale(249.5).clipAngle(90+Sb)};bl.invert=cl(function(t){return 2*Ib(t)});var Mw=function(){return il(bl).scale(250).clipAngle(142)};xl.invert=function(t,e){return[-e,2*Ib(jb(t))-Eb]};var Cw=function(){var t=fl(xl),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.version=wl,t.bisect=Tl,t.bisectRight=Tl,t.bisectLeft=Sl,t.ascending=kl,t.bisector=Ml,t.descending=Dl,t.deviation=$l,t.extent=Nl,t.histogram=Vl,t.thresholdFreedmanDiaconis=Yl,t.thresholdScott=Wl,t.thresholdSturges=Hl,t.max=Kl,t.mean=Gl,t.median=Xl,t.merge=Jl,t.min=Ql,t.pairs=Zl,t.permute=tc,t.quantile=Bl,t.range=Rl,t.scan=ec,t.shuffle=nc,t.sum=ic,t.ticks=ql,t.tickStep=n,t.transpose=rc,t.variance=El,t.zip=ac,t.entries=hc,t.keys=lc,t.values=cc,t.map=a,t.set=h,t.nest=sc,t.randomUniform=fc,t.randomNormal=pc,t.randomLogNormal=dc,t.randomBates=mc,t.randomIrwinHall=vc,t.randomExponential=gc,t.easeLinear=f,t.easeQuad=v,t.easeQuadIn=p,t.easeQuadOut=d,t.easeQuadInOut=v,t.easeCubic=y,t.easeCubicIn=m,t.easeCubicOut=g,t.easeCubicInOut=y,t.easePoly=xc,t.easePolyIn=_c,t.easePolyOut=bc,t.easePolyInOut=xc,t.easeSin=x,t.easeSinIn=_,t.easeSinOut=b,t.easeSinInOut=x,t.easeExp=M,t.easeExpIn=w,t.easeExpOut=k,t.easeExpInOut=M,t.easeCircle=S,t.easeCircleIn=C,t.easeCircleOut=T,t.easeCircleInOut=S,t.easeBounce=A,t.easeBounceIn=D,t.easeBounceOut=A,t.easeBounceInOut=E,t.easeBack=zc,t.easeBackIn=Fc,t.easeBackOut=Ic,t.easeBackInOut=zc,t.easeElastic=qc,t.easeElasticIn=Lc,t.easeElasticOut=qc,t.easeElasticInOut=Hc,t.polygonArea=Vc,t.polygonCentroid=Bc,t.polygonHull=Wc,t.polygonContains=Kc,t.polygonLength=Gc,t.path=O,t.quadtree=j,t.queue=G,t.arc=xh,t.area=Mh,t.line=kh,t.pie=Sh,t.radialArea=Eh,t.radialLine=Ah,t.symbol=Xh,t.symbols=Gh,t.symbolCircle=$h,t.symbolCross=Nh,t.symbolDiamond=Fh,t.symbolSquare=Lh,t.symbolStar=jh,t.symbolTriangle=Hh,t.symbolWye=Kh,t.curveBasisClosed=Zh,t.curveBasisOpen=tf,t.curveBasis=Qh,t.curveBundle=ef,t.curveCardinalClosed=rf,t.curveCardinalOpen=af,t.curveCardinal=nf,t.curveCatmullRomClosed=sf,t.curveCatmullRomOpen=uf,t.curveCatmullRom=of,t.curveLinearClosed=lf,t.curveLinear=wh,t.curveMonotoneX=$t,t.curveMonotoneY=Nt,t.curveNatural=cf,t.curveStep=hf,t.curveStepAfter=zt,t.curveStepBefore=It,t.stack=vf,t.stackOffsetExpand=mf,t.stackOffsetNone=pf,t.stackOffsetSilhouette=gf,t.stackOffsetWiggle=yf,t.stackOrderAscending=_f,t.stackOrderDescending=bf,t.stackOrderInsideOut=xf,t.stackOrderNone=df,t.stackOrderReverse=wf,t.color=qt,t.rgb=Yt,t.hsl=Xt,t.lab=te,t.hcl=se,t.cubehelix=ce,t.interpolate=_p,t.interpolateArray=fp,t.interpolateDate=pp,t.interpolateNumber=dp,t.interpolateObject=vp,t.interpolateRound=bp,t.interpolateString=yp,t.interpolateTransformCss=Mp,t.interpolateTransformSvg=Cp,t.interpolateZoom=Ep,t.interpolateRgb=lp,t.interpolateRgbBasis=cp,t.interpolateRgbBasisClosed=hp,t.interpolateHsl=$p,t.interpolateHslLong=Np,t.interpolateLab=De,t.interpolateHcl=Pp,t.interpolateHclLong=Op,t.interpolateCubehelix=Fp,t.interpolateCubehelixLong=Ip,t.interpolateBasis=op,t.interpolateBasisClosed=sp,t.quantize=zp,t.dispatch=$e,t.dsvFormat=Lp,t.csvParse=Hp,t.csvParseRows=Vp,t.csvFormat=Bp,t.csvFormatRows=Yp,t.tsvParse=Kp,t.tsvParseRows=Gp,t.tsvFormat=Xp,t.tsvFormatRows=Jp,t.request=Qp,t.html=td,t.json=ed,t.text=nd,t.xml=id,t.csv=ad,t.tsv=od,t.now=qe,t.timer=Be,t.timerFlush=Ye,t.timeout=md,t.interval=gd,t.timeInterval=Je,t.timeMillisecond=bd,t.timeMilliseconds=xd,t.timeSecond=Sd,t.timeSeconds=Dd,t.timeMinute=Ad,t.timeMinutes=Ed,t.timeHour=$d,t.timeHours=Nd,t.timeDay=Pd,t.timeDays=Od,t.timeWeek=Fd,t.timeWeeks=qd,t.timeSunday=Fd,t.timeSundays=qd,t.timeMonday=Id,t.timeMondays=Hd,t.timeTuesday=zd,t.timeTuesdays=Vd,t.timeWednesday=Rd,t.timeWednesdays=Bd,t.timeThursday=Ud,t.timeThursdays=Yd,t.timeFriday=jd,t.timeFridays=Wd,t.timeSaturday=Ld,t.timeSaturdays=Kd,t.timeMonth=Gd,t.timeMonths=Xd,t.timeYear=Jd,t.timeYears=Qd,t.utcMillisecond=bd,t.utcMilliseconds=xd,t.utcSecond=Sd,t.utcSeconds=Dd,t.utcMinute=Zd,t.utcMinutes=tv,t.utcHour=ev,t.utcHours=nv,t.utcDay=iv,t.utcDays=rv,t.utcWeek=av,t.utcWeeks=fv,t.utcSunday=av,t.utcSundays=fv,t.utcMonday=ov,t.utcMondays=pv,t.utcTuesday=sv,t.utcTuesdays=dv,t.utcWednesday=uv,t.utcWednesdays=vv,t.utcThursday=lv,t.utcThursdays=mv,t.utcFriday=cv,t.utcFridays=gv,t.utcSaturday=hv,t.utcSaturdays=yv,t.utcMonth=_v,t.utcMonths=bv,t.utcYear=xv,t.utcYears=kv,t.formatLocale=Fv,t.formatDefaultLocale=nn,t.formatSpecifier=Nv,t.precisionFixed=zv,t.precisionPrefix=Rv,t.precisionRound=Uv,t.isoFormat=Bv,t.isoParse=Yv,t.timeFormatLocale=sn,t.timeFormatDefaultLocale=ei,t.scaleBand=ai,t.scalePoint=si,t.scaleIdentity=gi,t.scaleLinear=mi,t.scaleLog=Mi,t.scaleOrdinal=ri,t.scaleImplicit=Xv,t.scalePow=Ti,t.scaleSqrt=Si,t.scaleQuantile=Di,t.scaleQuantize=Ai,t.scaleThreshold=Ei,t.scaleTime=lm,t.scaleUtc=cm,t.schemeCategory10=fm,t.schemeCategory20b=pm,t.schemeCategory20c=dm,t.schemeCategory20=vm,t.scaleSequential=Fi,t.interpolateCubehelixDefault=mm,t.interpolateRainbow=bm,t.interpolateWarm=gm,t.interpolateCool=ym,t.interpolateViridis=xm,t.interpolateMagma=wm,t.interpolateInferno=km,t.interpolatePlasma=Mm,t.creator=Dm,t.customEvent=Bi,t.local=Ri,t.matcher=Pm,t.mouse=Um,t.namespace=Sm,t.namespaces=Tm,t.select=xg,t.selectAll=wg,t.selection=Nr,t.selector=jm,t.selectorAll=qm,t.touch=kg,t.touches=Mg,t.window=sg,t.active=sy,t.interrupt=Fg,t.transition=ca,t.axisTop=ya,t.axisRight=_a,t.axisBottom=ba,t.axisLeft=xa,t.cluster=vy,t.hierarchy=Ea,t.pack=Ey,t.packSiblings=Dy,t.packEnclose=Sy,t.partition=Py,t.stratify=zy,t.tree=Ry,t.treemap=qy,t.treemapBinary=Hy,t.treemapDice=Ny,t.treemapSlice=Uy,t.treemapSliceDice=Vy,t.treemapSquarify=Ly,t.treemapResquarify=By,t.forceCenter=Yy,t.forceCollide=Gy,t.forceLink=Xy,t.forceManyBody=t_,t.forceSimulation=Zy,t.forceX=e_,t.forceY=n_,t.drag=o_,t.dragDisable=r_,t.dragEnable=_o,t.voronoi=g_,t.zoom=x_,t.zoomIdentity=__,t.zoomTransform=rs,t.brush=z_,t.brushX=ms,t.brushY=gs,t.brushSelection=vs,t.chord=V_,t.ribbon=W_,t.geoAlbers=hw,t.geoAlbersUsa=fw,t.geoArea=Zb,t.geoAzimuthalEqualArea=dw,t.geoAzimuthalEqualAreaRaw=pw,t.geoAzimuthalEquidistant=mw,t.geoAzimuthalEquidistantRaw=vw,t.geoBounds=nx,t.geoCentroid=rx,t.geoCircle=_x,t.geoClipExtent=Tx,t.geoConicConformal=yw,t.geoConicConformalRaw=dl,t.geoConicEqualArea=cw,t.geoConicEqualAreaRaw=sl,t.geoConicEquidistant=bw,t.geoConicEquidistantRaw=ml,t.geoDistance=Nx,t.geoEquirectangular=_w,t.geoEquirectangularRaw=vl,t.geoGnomonic=xw,t.geoGnomonicRaw=gl,t.geoGraticule=Su,t.geoGraticule10=Du,t.geoIdentity=ww,t.geoInterpolate=Px,t.geoLength=Ax,t.geoMercator=gw,t.geoMercatorRaw=hl,t.geoOrthographic=kw,t.geoOrthographicRaw=_l,t.geoPath=Zx,t.geoProjection=il,t.geoProjectionMutator=rl,t.geoRotation=yx,t.geoStereographic=Mw,t.geoStereographicRaw=bl,t.geoStream=Gb,t.geoTransform=aw,t.geoTransverseMercator=Cw,t.geoTransverseMercatorRaw=xl,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){(function(e){var i=n(37),r=function(t){var e=t||{};this.$popover=null,this.$rankTable=null,this.$preloader=null,this.$rankTable=null,this.selector=e.selector||".rank",this.loading=!1,this.rankFieldName=null,this.order={altType:"",rank:""},this.year=e.year,this.init()};r.prototype.init=function(){var t=this,n=e(".statistics"),r=e(".governmentController");t.noMoreData=!1,n.popover({placement:"bottom",selector:this.selector,animation:!0,template:'<div class="popover rankPopover" role="tooltip"><div class="arrow"></div><div class="popover-title-custom"><h3 class="popover-title"></h3></div><div class="popover-content"></div></div>'}),r.on("click",function(t){e(t.target).closest(".popover")[0]||e(".rank").not(t.target).popover("destroy")}),n.on("click",function(n){var r=e(n.target),a=r.hasClass("rank")?r:r.closest(".rank");return 0===a.length?!0:(n.preventDefault(),n.stopPropagation(),e(n.target).closest(".popover")[0]||e(".rank").not(n.target).popover("destroy"),0===a.length?!0:(t.$popover=r,t.$popoverContent=a.next().find(".popover-content"),t.rankFieldName=a.attr("data-field"),t.$popover.on("hide.bs.popover",function(){t.noMoreData=!1}),t.rankFieldName&&(t.loading=!0,e.ajax({url:window.gw.urls.popover,dataType:"json",data:{field_name:t.rankFieldName,year:t.year},success:function(e){0!==e.data.length?(t.formatData.call(t,e),t.$popoverContent.html(i.templates.rankTable(e)),t.$rankTable=t.$popoverContent.find("table tbody"),t.$preloader=t.$popoverContent.find(".loader"),t.scrollHandler.call(t),t.sortHandler.call(t),t.loading=!1):t.noMoreData||(t.$popoverContent[0].innerHTML='<h3 style="text-align: center">No data</h3>',t.noMoreData=!0,t.loading=!1)}})),!0))})},r.prototype.scrollHandler=function(){var t=this,n=t.$rankTable,r=t.order;t.previousScrollTop=0,t.currentPage=0,t.$popoverContent.scroll(function(){var a=t.$popoverContent.scrollTop();t.previousScrollTop<a&&a>.5*t.$popoverContent[0].scrollHeight&&!t.noMoreData&&(t.previousScrollTop=a,t.loading===!1&&(t.loading=!0,t.$preloader.show(),e.ajax({url:window.gw.urls.popover,dataType:"json",data:{page:++t.currentPage,order:r.rank,name_order:r.altType,field_name:t.rankFieldName,year:t.year},success:function(r){var a;0!==r.data.length?(t.formatData(r),t.loading=!1,t.$preloader.hide(),n[0].innerHTML+=i.templates.rankTableAdditionalRows(r)):t.noMoreData||(t.noMoreData=!0,a=e('<h3 style="text-align: center">No more data</h3>'),t.$popoverContent.append(a),t.loading=!1,t.$preloader.hide())}})))})},r.prototype.sortHandler=function(){var t=this,n=t.order;t.$popoverContent.on("click","th",function(i){var r,a;i.stopPropagation(),t.$popoverContent.find("h3").remove(),t.noMoreData=!1,t.previousScrollTop=0,t.currentPage=0,a=e(this).hasClass("sortable")?e(this):e(this).closest("th"),r=a.find("i"),a.hasClass("desc")?("name_order"===a.attr("data-sort-type")?n.altType="":n.rank="",a.removeClass("desc").removeClass("asc"),r.removeClass("icon__bottom").removeClass("icon__top")):a.hasClass("asc")?("name_order"===a.attr("data-sort-type")?n.altType="desc":n.rank="desc",a.removeClass("asc").addClass("desc"),r.removeClass("icon__top").addClass("icon__bottom")):("name_order"===a.attr("data-sort-type")?n.altType="asc":n.rank="asc",a.addClass("asc"),r.addClass("icon__top")),t.loadNewRows.call(t,n)})},r.prototype.loadNewRows=function(t){var n=this,r=n.$rankTable||n.$popoverContent.find("table tbody"),a=t||this.order;r.html(""),n.$preloader.show(),n.loading=!0,e.ajax({url:window.gw.urls.popover,dataType:"json",data:{page:n.currentPage,order:a.rank,name_order:a.altType,field_name:n.rankFieldName,year:n.year},success:function(t){0!==t.data.length?(n.formatData.call(n,t),r.html(i.templates.rankTableAdditionalRows(t)),n.loading=!1,n.$preloader.hide()):(n.$popoverContent[0].innerHTML='<h3 style="text-align: center">No data</h3>',n.loading=!1,n.$preloader.hide())}})},r.prototype.formatData=function(t){var e=this,n=e.$popover,i=n.attr("data-mask");return i?t.data.forEach(function(t){return t.amount=numeral(t.amount).format(i)}):!0},function(){var t=i.template,e=i.templates=i.templates||{};e.rankTable=t({1:function(t,e,n,i,r){var a,o,s=null!=e?e:{},u=n.helperMissing,l="function",c=t.escapeExpression;return" <tr> <td>"+c((o=null!=(o=n.name||(null!=e?e.name:e))?o:u,typeof o===l?o.call(s,{name:"name",hash:{},data:r}):o))+"</td> <td> "+(null!=(a=n["if"].call(s,null!=e?e.value:e,{name:"if",hash:{},fn:t.program(2,r,0),inverse:t.program(4,r,0),data:r}))?a:"")+"</td> <td> "+c((o=null!=(o=n.amount||(null!=e?e.amount:e))?o:u,typeof o===l?o.call(s,{name:"amount",hash:{},data:r}):o))+"</td> </tr> "},2:function(t,e,n,i,r){var a;return" "+t.escapeExpression((a=null!=(a=n.value||(null!=e?e.value:e))?a:n.helperMissing,"function"==typeof a?a.call(null!=e?e:{},{name:"value",hash:{},data:r}):a))+" "},4:function(t,e,n,i,r){return" No data "},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var a,o,s,u=null!=e?e:{},l=n.helperMissing,c="function",h='<table class="table table-condensed table-hover"> <thead> <tr> <th data-sort-type="name_order" class="sortable"><nobr>'+t.escapeExpression((o=null!=(o=n.alt_type||(null!=e?e.alt_type:e))?o:l,typeof o===c?o.call(u,{name:"alt_type",hash:{},data:r}):o))+'<i class="icon"></i></nobr></th> <th data-sort-type="order" class="sortable"><nobr>Rank<i class="icon"></i></nobr></th> <th>Amount</th> </tr> </thead> <tbody> ';return o=null!=(o=n.data||(null!=e?e.data:e))?o:l,s={name:"data",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r},a=typeof o===c?o.call(u,s):o,n.data||(a=n.blockHelperMissing.call(e,a,s)),null!=a&&(h+=a),h+'\n    </tbody>\n</table>\n<div class="loader"></div>\n'},useData:!0})}(),function(){var t=i.template,e=i.templates=i.templates||{};e.rankTableAdditionalRows=t({1:function(t,e,n,i,r){var a,o,s=null!=e?e:{},u=n.helperMissing,l="function",c=t.escapeExpression;return" <tr> <td>"+c((o=null!=(o=n.name||(null!=e?e.name:e))?o:u,typeof o===l?o.call(s,{name:"name",hash:{},data:r}):o))+"</td> <td> "+(null!=(a=n["if"].call(s,null!=e?e.value:e,{name:"if",hash:{},fn:t.program(2,r,0),inverse:t.program(4,r,0),data:r}))?a:"")+"\n        </td>\n        <td>\n            "+c((o=null!=(o=n.amount||(null!=e?e.amount:e))?o:u,typeof o===l?o.call(s,{name:"amount",hash:{},data:r}):o))+"\n        </td>\n    </tr>\n"},2:function(t,e,n,i,r){var a;return" "+t.escapeExpression((a=null!=(a=n.value||(null!=e?e.value:e))?a:n.helperMissing,"function"==typeof a?a.call(null!=e?e:{},{name:"value",hash:{},data:r}):a))+" "},4:function(t,e,n,i,r){return" No data "},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var a,o,s,u="";return o=null!=(o=n.data||(null!=e?e.data:e))?o:n.helperMissing,s={name:"data",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r},a="function"==typeof o?o.call(null!=e?e:{},s):o,n.data||(a=n.blockHelperMissing.call(e,a,s)),null!=a&&(u+=a),u},useData:!0})}(),t.exports=r}).call(e,n(1))},function(t,e,n){/*!
	
	 handlebars v4.0.5
	
	Copyright (C) 2011-2015 by Yehuda Katz
	
	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:
	
	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.
	
	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.
	
	@license
	*/
!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(){var t=new s.HandlebarsEnvironment;return p.extend(t,s),t.SafeString=l["default"],t.Exception=h["default"],t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=v,t.template=function(e){return v.template(e,t)},t}var r=n(1)["default"],a=n(2)["default"];e.__esModule=!0;var o=n(3),s=r(o),u=n(17),l=a(u),c=n(5),h=a(c),f=n(4),p=r(f),d=n(18),v=r(d),m=n(19),g=a(m),y=i();y.create=i,g["default"](y),y["default"]=y,e["default"]=y,t.exports=e["default"]},function(t,e){"use strict";e["default"]=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},e.__esModule=!0},function(t,e){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0},function(t,e,n){"use strict";function i(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},u.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}var r=n(2)["default"];e.__esModule=!0,e.HandlebarsEnvironment=i;var a=n(4),o=n(5),s=r(o),u=n(6),l=n(14),c=n(16),h=r(c),f="4.0.5";e.VERSION=f;var p=7;e.COMPILER_REVISION=p;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=d;var v="[object Object]";i.prototype={constructor:i,logger:h["default"],log:h["default"].log,registerHelper:function(t,e){if(a.toString.call(t)===v){if(e)throw new s["default"]("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(a.toString.call(t)===v)a.extend(this.partials,t);else{if("undefined"==typeof e)throw new s["default"]('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(a.toString.call(t)===v){if(e)throw new s["default"]("Arg not supported with multiple decorators");a.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var m=h["default"].log;e.log=m,e.createFrame=a.createFrame,e.logger=h["default"]},function(t,e){"use strict";function n(t){return c[t]}function i(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function r(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}function a(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return f.test(t)?t.replace(h,n):t}function o(t){return t||0===t?!(!v(t)||0!==t.length):!0}function s(t){var e=i({},t);return e._parent=t,e}function u(t,e){return t.path=e,t}function l(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=i,e.indexOf=r,e.escapeExpression=a,e.isEmpty=o,e.createFrame=s,e.blockParams=u,e.appendContextPath=l;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},h=/[&<>"'`=]/g,f=/[&<>"'`=]/,p=Object.prototype.toString;e.toString=p;var d=function(t){return"function"==typeof t};d(/x/)&&(e.isFunction=d=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)}),e.isFunction=d;var v=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===p.call(t):!1};e.isArray=v},function(t,e){"use strict";function n(t,e){var r=e&&e.loc,a=void 0,o=void 0;r&&(a=r.start.line,o=r.start.column,t+=" - "+a+":"+o);for(var s=Error.prototype.constructor.call(this,t),u=0;u<i.length;u++)this[i[u]]=s[i[u]];Error.captureStackTrace&&Error.captureStackTrace(this,n),r&&(this.lineNumber=a,this.column=o)}e.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function i(t){o["default"](t),u["default"](t),c["default"](t),f["default"](t),d["default"](t),m["default"](t),y["default"](t)}var r=n(2)["default"];e.__esModule=!0,e.registerDefaultHelpers=i;var a=n(7),o=r(a),s=n(8),u=r(s),l=n(9),c=r(l),h=n(10),f=r(h),p=n(11),d=r(p),v=n(12),m=r(v),g=n(13),y=r(g)},function(t,e,n){"use strict";e.__esModule=!0;var i=n(4);e["default"]=function(t){t.registerHelper("blockHelperMissing",function(e,n){var r=n.inverse,a=n.fn;if(e===!0)return a(this);if(e===!1||null==e)return r(this);if(i.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):r(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(e,n)})},t.exports=e["default"]},function(t,e,n){"use strict";var i=n(2)["default"];e.__esModule=!0;var r=n(4),a=n(5),o=i(a);e["default"]=function(t){t.registerHelper("each",function(t,e){function n(e,n,a){l&&(l.key=e,l.index=n,l.first=0===n,l.last=!!a,c&&(l.contextPath=c+e)),u+=i(t[e],{data:l,blockParams:r.blockParams([t[e],e],[c+e,null])})}if(!e)throw new o["default"]("Must pass iterator to #each");var i=e.fn,a=e.inverse,s=0,u="",l=void 0,c=void 0;if(e.data&&e.ids&&(c=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),r.isFunction(t)&&(t=t.call(this)),e.data&&(l=r.createFrame(e.data)),t&&"object"==typeof t)if(r.isArray(t))for(var h=t.length;h>s;s++)s in t&&n(s,s,s===t.length-1);else{var f=void 0;for(var p in t)t.hasOwnProperty(p)&&(void 0!==f&&n(f,s-1),f=p,s++);void 0!==f&&n(f,s-1,!0)}return 0===s&&(u=a(this)),u})},t.exports=e["default"]},function(t,e,n){"use strict";var i=n(2)["default"];e.__esModule=!0;var r=n(5),a=i(r);e["default"]=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var i=n(4);e["default"]=function(t){t.registerHelper("if",function(t,e){return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),e[0]=r,t.log.apply(t,e)})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var i=n(4);e["default"]=function(t){t.registerHelper("with",function(t,e){i.isFunction(t)&&(t=t.call(this));var n=e.fn;if(i.isEmpty(t))return e.inverse(this);var r=e.data;return e.data&&e.ids&&(r=i.createFrame(e.data),r.contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:r,blockParams:i.blockParams([t],[r&&r.contextPath])})})},t.exports=e["default"]},function(t,e,n){"use strict";function i(t){o["default"](t)}var r=n(2)["default"];e.__esModule=!0,e.registerDefaultDecorators=i;var a=n(15),o=r(a)},function(t,e,n){"use strict";e.__esModule=!0;var i=n(4);e["default"]=function(t){t.registerDecorator("inline",function(t,e,n,r){var a=t;return e.partials||(e.partials={},a=function(r,a){var o=n.partials;n.partials=i.extend({},o,e.partials);var s=t(r,a);return n.partials=o,s}),e.partials[r.args[0]]=r.fn,a})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var i=n(4),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=i.indexOf(r.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=r.lookupLevel(t),"undefined"!=typeof console&&r.lookupLevel(r.level)<=t){var e=r.methodMap[t];console[e]||(e="log");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;n>a;a++)i[a-1]=arguments[a];console[e].apply(console,i)}}};e["default"]=r,t.exports=e["default"]},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=g.COMPILER_REVISION;if(e!==n){if(n>e){var i=g.REVISION_CHANGES[n],r=g.REVISION_CHANGES[e];throw new m["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new m["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){function n(n,i,r){r.hash&&(i=d.extend({},i,r.hash),r.ids&&(r.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,i,r);var a=e.VM.invokePartial.call(this,n,i,r);if(null==a&&e.compile&&(r.partials[r.name]=e.compile(n,t.compilerOptions,e),a=r.partials[r.name](i,r)),null!=a){if(r.indent){for(var o=a.split("\n"),s=0,u=o.length;u>s&&(o[s]||s+1!==u);s++)o[s]=r.indent+o[s];a=o.join("\n")}return a}throw new m["default"]("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(e){function n(e){return""+t.main(r,e,r.helpers,r.partials,o,u,s)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=a.data;i._setup(a),!a.partial&&t.useData&&(o=l(e,o));var s=void 0,u=t.useBlockParams?[]:void 0;return t.useDepths&&(s=a.depths?e!==a.depths[0]?[e].concat(a.depths):a.depths:[e]),(n=c(t.main,n,r,a.depths||[],o,u))(e,a)}if(!e)throw new m["default"]("No environment passed to template");if(!t||!t.main)throw new m["default"]("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var r={strict:function(t,e){if(!(e in t))throw new m["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:d.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,i,r){var o=this.programs[t],s=this.fn(t);return e||r||i||n?o=a(this,t,s,e,n,i,r):o||(o=this.programs[t]=a(this,t,s)),o},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=d.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators):(r.helpers=r.merge(n.helpers,e.helpers),t.usePartial&&(r.partials=r.merge(n.partials,e.partials)),(t.usePartial||t.useDecorators)&&(r.decorators=r.merge(n.decorators,e.decorators)))},i._child=function(e,n,i,o){if(t.useBlockParams&&!i)throw new m["default"]("must pass block params");if(t.useDepths&&!o)throw new m["default"]("must pass parent depths");return a(r,e,t[e],n,0,i,o)},i}function a(t,e,n,i,r,a,o){function s(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return o&&e!==o[0]&&(s=[e].concat(o)),n(t,e,t.helpers,t.partials,r.data||i,a&&[r.blockParams].concat(a),s)}return s=c(n,s,t,o,i,a),s.program=e,s.depth=o?o.length:0,s.blockParams=r||0,s}function o(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t}function s(t,e,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==u&&(n.data=g.createFrame(n.data),i=n.data["partial-block"]=n.fn,i.partials&&(n.partials=d.extend({},n.partials,i.partials))),void 0===t&&i&&(t=i),void 0===t)throw new m["default"]("The partial "+n.name+" could not be found");return t instanceof Function?t(e,n):void 0}function u(){return""}function l(t,e){return e&&"root"in e||(e=e?g.createFrame(e):{},e.root=t),e}function c(t,e,n,i,r,a){if(t.decorator){var o={};e=t.decorator(e,o,n,i&&i[0],r,a,i),d.extend(e,o)}return e}var h=n(1)["default"],f=n(2)["default"];e.__esModule=!0,e.checkRevision=i,e.template=r,e.wrapProgram=a,e.resolvePartial=o,e.invokePartial=s,e.noop=u;var p=n(4),d=h(p),v=n(5),m=f(v),g=n(3)},function(t,e){(function(n){"use strict";e.__esModule=!0,e["default"]=function(t){var e="undefined"!=typeof n?n:window,i=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=i),t}},t.exports=e["default"]}).call(e,function(){return this}())}])})},function(t,e,n){(function(e){function i(t,n){this.container=n,this.$container=e(n),this.CurrentFormState=".first-condition"===n?t.firstStep:t.secondStep,this.$select=e(n+" select"),this.$loader=e('<div class="loader"></div>'),this.init()}var r=n(39);i.prototype.init=function(){var t=this;t.handlerOnMouseDownSelect(),t.handlerOnChangeSelect(),t.search=new r(t.container,t.searchResponseCallback),t.search.$typeahead.bind("typeahead:selected",function(e,n){t.CurrentFormState.data=n,t.createYearOptions(n)}),t.search.$typeahead.bind("typeahead:asyncrequest",function(){t.loading(!0)}),t.search.$typeahead.bind("typeahead:asyncreceive",function(){t.loading(!1)}),t.search.$typeahead.bind("typeahead:asynccancel",function(){t.loading(!1),t.lockSelect()}),t.search.$typeahead.bind("typeahead:open",function(){t.lockSelect(),t.CurrentFormState.incomplete()})},i.prototype.unlock=function(){this.search.$typeahead.toggleClass("disabled",!1)},i.prototype.lock=function(){this.search.$typeahead.toggleClass("disabled",!0),this.$select.toggleClass("disabled",!0)},i.prototype.lockSelect=function(){this.$select.toggleClass("disabled",!0)},i.prototype.loading=function(t){var e=t?"none":"block";this.$select.css({display:e}),t?this.$container.append(this.$loader):this.$loader.remove()},i.prototype.createYearOptions=function(t){function e(t){r.$select.toggleClass("disabled",!!t)}function n(t){t?r.CurrentFormState.complete():r.CurrentFormState.incomplete()}var i,r=this;return t?(i=t.years.sort(function(t,e){return e>t}),r.CurrentFormState.data.year=t.years[0],e(!1),r.$select.html(""),i.forEach(function(e,n){var i=0===n?"selected":"";r.$select.append('<option value="'+t.id+'" '+i+">"+e+"</option>")}),n(!0),!0):(console.error("First argument not passed in createYearOptions() "),!0)},i.prototype.handlerOnChangeSelect=function(){var t=this;t.$select.on("change",function(n){var i=e(n.target),r=i.find("option:selected"),a=r.text();return a?(t.CurrentFormState.data.year=parseInt(a,10),t.CurrentFormState.complete()):(alert("Please choose correct year"),t.CurrentFormState.incomplete()),!0})},i.prototype.handlerOnMouseDownSelect=function(){var t=this;t.$select.on("mousedown",function(t){var n=e(t.target);return n.hasClass("disabled")?(alert("Please, first select government"),!1):!0})},t.exports=i}).call(e,n(1))},function(t,e,n){(function(e){function i(t){function n(t,n,r){i.timer&&clearTimeout(i.timer),i.timer=setTimeout(function(){e.ajax({method:"GET",url:window.gw.urls.search+"?search="+t}).success(function(t){r(t)})},i.delay)}var i=this;return t?(i.delay=750,i.timer=void 0,i.governmentData={},i.$typeahead=e(t+" .typeahead_government"),i.searchValue="",i.$typeahead.typeahead({hint:!0,highlight:!0,minLength:3},{name:"countries",source:n,templates:{empty:'<div class="tt-suggestion">Not found. Please retype your query </div>',suggestion:r.compile('<div class="sugg-box"><div class="sugg-name">{{name}}</div></div>')},updater:function(t){alert(t)}}),i.$typeahead.bind("typeahead:selected",function(t,e){i.$typeahead.typeahead("val",e.name)}),i.$typeahead.bind("typeahead:cursorchange",function(){i.$typeahead.typeahead("val",i.searchValue)}),i.$typeahead.keyup(function(t){i.searchValue=e(t.target).val(),i.searchValue.length<3&&clearTimeout(i.timer)}),i):(alert("Please pass container selector"),!0)}var r=n(15);n(40),t.exports=i}).call(e,n(1))},function(t,e,n){var i,r,i,r;(function(a){/*!
	 * typeahead.js 0.11.1
	 * https://github.com/twitter/typeahead.js
	 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
	 */
!function(a,o){i=[n(1)],r=function(t){return a.Bloodhound=o(t)}.apply(e,i),!(void 0!==r&&(t.exports=r))}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var a,o,s=this,u=arguments;return a=function(){i=null,n||(r=t.apply(s,u))},o=n&&!i,clearTimeout(i),i=setTimeout(a,e),o&&(r=t.apply(s,u)),r}},throttle:function(t,e){var n,i,r,a,o,s;return o=0,s=function(){o=new Date,r=null,a=t.apply(n,i)},function(){var u=new Date,l=e-(u-o);return n=this,i=arguments,0>=l?(clearTimeout(r),r=null,o=u,a=t.apply(n,i)):r||(r=setTimeout(s,l)),a}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n="0.11.1",i=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function n(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function i(t){return function(n){return n=e.isArray(n)?n:[].slice.call(arguments,0),function(i){var r=[];return e.each(n,function(n){r=r.concat(t(e.toStr(i[n])))}),r}}}return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}}}(),r=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new r(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),a=function(){"use strict";function n(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=n||s,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function a(e){return t.parseJSON(e)}function o(t){var e,n,i=[],r=s.length;for(e=0;r>e;e++)(n=s.key(e)).match(t)&&i.push(n.replace(t,""));return i}var s;try{s=window.localStorage,s.setItem("~~~","!"),s.removeItem("~~~")}catch(u){s=null}return e.mixin(n.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),a(this.ls.getItem(this._prefix(t)))},set:function(t,n,a){return e.isNumber(a)?this._safeSet(this._ttlKey(t),r(i()+a)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=o(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=a(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(n)&&i()>n)}}),n}(),o=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new r(0):s}var i=0,a={},o=6,s=new r(10);return n.setMaxPendingRequests=function(t){o=t},n.resetCache=function(){s.reset()},e.mixin(n.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function n(t){e(null,t),c._cache.set(u,t)}function r(){e(!0)}function s(){i--,delete a[u],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var u,l,c=this;u=this._fingerprint(t),this.cancelled||u!==this.lastReq||((l=a[u])?l.done(n).fail(r):o>i?(i++,a[u]=this._send(t).done(n).fail(r).always(s)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var r,a;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},a=this._fingerprint(n),this.cancelled=!1,this.lastReq=a,(r=this._cache.get(a))?i(null,r):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),s=window.SearchIndex=function(){"use strict";function n(n){n=n||{},n.datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[u]=[],t[s]={},t}function a(t){for(var e={},n=[],i=0,r=t.length;r>i;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function o(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var a=t.length,o=e.length;a>n&&o>i;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}var s="c",u="i";return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var a,o;n.datums[a=n.identify(t)]=t,o=i(n.datumTokenizer(t)),e.each(o,function(t){var e,i,o;for(e=n.trie,i=t.split("");o=i.shift();)e=e[s][o]||(e[s][o]=r()),e[u].push(a)})})},get:function(t){var n=this;return e.map(t,function(t){return n.datums[t]})},search:function(t){var n,r,l=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,a;if(r&&0===r.length)return!1;for(e=l.trie,n=t.split("");e&&(i=n.shift());)e=e[s][i];return e&&0===n.length?(a=e[u].slice(0),void(r=r?o(r,a):a)):(r=[],!1)}),r?e.map(a(r),function(t){return l.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),u=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new a(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function n(e){t(null,r.transform(e))}var i,r=this;t&&(i=this.prepare(this._settings()),this.transport(i).fail(e).done(n))},clear:function(){return this.storage.clear(),this}}),t}(),l=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function n(t,n){e(t?[]:r.transform(n))}var i,r=this;if(e)return t=t||"",i=this.prepare(t,this._settings()),this.transport.get(i,n)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),c=function(){"use strict";function i(i){var r;return i?(r={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(r,i),!i.url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?s(i.transport):t.ajax,i):null}function r(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(i,n),!n.url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=a(n),n.limiter=o(n),n.transport=n.transport?s(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function a(t){function e(t,e){return e.url=a(e.url,t),e}function n(t,e){return e.url=e.url.replace(o,encodeURIComponent(t)),e}function i(t,e){return e}var r,a,o;return r=t.prepare,a=t.replace,o=t.wildcard,r?r:r=a?e:t.wildcard?n:i}function o(t){function n(t){return function(n){return e.debounce(n,t)}}function i(t){return function(n){return e.throttle(n,t)}}var r,a,o;return r=t.limiter,a=t.rateLimitBy,o=t.rateLimitWait,r||(r=/^throttle$/i.test(a)?i(o):n(o)),r}function s(n){return function(i){function r(t){e.defer(function(){o.resolve(t)})}function a(t){e.defer(function(){o.reject(t)})}var o=t.Deferred();return n(i,r,a),o}}return function(n){var a,o;return a={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},n=e.mixin(a,n||{}),!n.datumTokenizer&&t.error("datumTokenizer is required"),!n.queryTokenizer&&t.error("queryTokenizer is required"),o=n.sorter,n.sorter=o?function(t){return t.sort(o)}:e.identity,n.local=e.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=r(n.remote),n}}(),h=function(){"use strict";function n(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new l(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new s({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var r;return r=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=r),n},n.tokenizers=i,e.mixin(n.prototype,{__ttAdapter:function(){function t(t,e,i){return n.search(t,e,i)}function e(t,e){return n.search(t,e)}var n=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?n.reject():(r.add(e),r.prefetch.store(r.index.serialize()),void n.resolve())}var n,i,r=this;return n=t.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(e):n.resolve(),n.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,n,i){function r(t){var n=[];e.each(t,function(t){!e.some(a,function(e){return o.identify(t)===o.identify(e)})&&n.push(t)}),i&&i(n)}var a,o=this;return a=this.sorter(this.index.search(t)),n(this.remote?a.slice():a),this.remote&&a.length<this.sufficient?this.remote.get(t,r):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}();return h}),function(a,o){i=[n(1)],r=function(t){return o(t)}.apply(e,i),!(void 0!==r&&(t.exports=r))}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var a,o,s=this,u=arguments;return a=function(){i=null,n||(r=t.apply(s,u))},o=n&&!i,clearTimeout(i),i=setTimeout(a,e),o&&(r=t.apply(s,u)),r}},throttle:function(t,e){var n,i,r,a,o,s;return o=0,s=function(){o=new Date,r=null,a=t.apply(n,i)},function(){var u=new Date,l=e-(u-o);return n=this,i=arguments,0>=l?(clearTimeout(r),r=null,o=u,a=t.apply(n,i)):r||(r=setTimeout(s,l)),a}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){"use strict";function t(t){var o,s;return s=e.mixin({},a,t),o={css:r(),classes:s,html:n(s),selectors:i(s)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(t){e.mixin(t,o)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var a={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),i=function(){"use strict";function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i,r;return i="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function(e,n){var r;return r=t.Event(i+e),(n=n||[]).unshift(r),this.$el.trigger.apply(this.$el,n),r},before:function(t){var e,n;return e=[].slice.call(arguments,1),n=this._trigger("before"+t,e),n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=r[t])&&this._trigger(e,[].slice.call(arguments,1))}}),n}(),r=function(){"use strict";function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(l),n=i?u(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,a;if(!this._callbacks)return this;for(t=t.split(l),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=o(n.sync,this,[e].concat(i)),a=o(n.async,this,[e].concat(i)),r()&&c(a);return this}function o(t,e,n){function i(){for(var i,r=0,a=t.length;!i&&a>r;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function s(){var t;return t=window.setImmediate?function(t){a(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function u(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=s();return{onSync:n,onAsync:e,off:i,trigger:r}}(),o=function(t){"use strict";function n(t,n,i){for(var r,a=[],o=0,s=t.length;s>o;o++)a.push(e.escapeRegExChars(t[o]));return r=i?"\\b("+a.join("|")+")\\b":"("+a.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function a(e){var n,i,a;return(n=s.exec(e.data))&&(a=t.createElement(r.tagName),r.className&&(a.className=r.className),i=e.splitText(n.index),i.splitText(n[0].length),a.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(a,i)),!!n}function o(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:o(n,e)}var s;r=e.mixin({},i,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],s=n(r.pattern,r.caseSensitive,r.wordsOnly),o(r.node,a))}}(window.document),s=function(){"use strict";function n(n,r){n=n||{},n.input||t.error("input is missing"),r.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function a(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!o(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!o(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var n,i;n=a(t,this.query),i=n?this.query.length!==t.length:!1,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,n,i,r,a=this;return t=e.bind(this._onBlur,this),n=e.bind(this._onFocus,this),i=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",n).on("keydown.tt",i),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){s[t.which||t.keyCode]||e.defer(e.bind(a._onInput,a,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:document.selection?(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),u=function(){"use strict";function n(n,r){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!s(n.name)&&t.error("invalid dataset name: "+n.name),r.mixin(this),this.highlight=!!n.highlight,this.name=n.name||l(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=a(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(t){function n(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:n}function a(n,i){function r(e){return t("<div>").text(i(e))}return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||r}}function s(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u,l;return u={val:"tt-selectable-display",obj:"tt-selectable-object"},l=e.getIdGenerator(),n.extractData=function(e){var n=t(e);return n.data(u.obj)?{val:n.data(u.val)||"",obj:n.data(u.obj)||null}:null},e.mixin(n.prototype,r,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;n=this._getSuggestionsFragment(t,e),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,i){var r,a=this;return r=document.createDocumentFragment(),e.each(i,function(e){var i,o;o=a._injectQuery(n,e),i=t(a.templates.suggestion(o)).data(u.obj,e).data(u.val,a.displayFn(e)).addClass(a.classes.suggestion+" "+a.classes.selectable),r.appendChild(i[0])}),this.highlight&&o({className:this.classes.highlight,node:r,pattern:n}),t(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function(e){function n(t){o||(o=!0,t=(t||[]).slice(0,r.limit),s=t.length,r._overwrite(e,t),s<r.limit&&r.async&&r.trigger("asyncRequested",e))}function i(n){n=n||[],!a&&s<r.limit&&(r.cancel=t.noop,s+=n.length,r._append(e,n),r.async&&r.trigger("asyncReceived",e))}var r=this,a=!1,o=!1,s=0;this.cancel(),this.cancel=function(){a=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,n,i),!o&&n([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),n}(),l=function(){"use strict";function n(n,i){function r(e){var n=a.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(a.$node),new u(e,i)}var a=this;n=n||{},n.node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,r)}return e.mixin(n.prototype,r,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(i+e):n>r&&this.$node.scrollTop(i+(n-r))},bind:function(){var t,n=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i,r;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,r=i+t,r=(r+1)%(e.length+1)-1,r=-1>r?e.length-1:r,-1===r?null:e.eq(r)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?u.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function n(e){e.update(t)}var i=t!==this.query;return i&&(this.query=t,e.each(this.datasets,n)),i},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,n)}}),n}(),c=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var n=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),h=function(){"use strict";function n(n,r){var a,o,s,u,l,c,h,f,p,d,v;n=n||{},n.input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),a=i(this,"activate","open","_onFocused"),o=i(this,"deactivate","_onBlurred"),s=i(this,"isActive","isOpen","_onEnterKeyed"),u=i(this,"isActive","isOpen","_onTabKeyed"),l=i(this,"isActive","_onEscKeyed"),c=i(this,"isActive","open","_onUpKeyed"),h=i(this,"isActive","open","_onDownKeyed"),f=i(this,"isActive","isOpen","_onLeftKeyed"),p=i(this,"isActive","isOpen","_onRightKeyed"),d=i(this,"_openIfActive","_onQueryChanged"),v=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",a,this).onSync("blurred",o,this).onSync("enterKeyed",s,this).onSync("tabKeyed",u,this).onSync("escKeyed",l,this).onSync("upKeyed",c,this).onSync("downKeyed",h,this).onSync("leftKeyed",f,this).onSync("rightKeyed",p,this).onSync("queryChanged",d,this).onSync("whitespaceChanged",v,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var r,a,o;r=document.activeElement,a=i.is(r),o=i.has(r).length>0,e.isMsie()&&(a||o)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){
n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,n,i,r,a,o,u;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=s.normalizeQuery(i),a=e.escapeRegExChars(r),o=new RegExp("^(?:"+a+")(.+$)","i"),u=o.exec(n.val),u&&this.input.setHint(i+u[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,n,i;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),i=n&&e!==n.val,i&&!this.eventBus.before("autocomplete",n.obj)?(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0):!1},moveCursor:function(t){var e,n,i,r,a;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),r=i?i.obj:null,a=this._minLengthMet()&&this.menu.update(e),a||this.eventBus.before("cursorchange",r)?!1:(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function r(e,n){e.each(function(){var e,i=t(this);(e=i.data(v.typeahead))&&n(e,i)})}function a(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(u(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function o(t,e){t.data(v.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(n){}return t}function u(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function f(t){var n,i;n=t.data(v.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(v.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(v.typeahead).removeData(v.www).removeData(v.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}function p(n){var i,r;return i=e.isJQuery(n)||e.isElement(n),r=i?t(n).first():[],r.length?r:null}var d,v,m;d=t.fn.typeahead,v={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(r,u){function f(){var n,f,m,g,y,_,b,x,w,k,M;e.each(u,function(t){t.highlight=!!r.highlight}),n=t(this),f=t(d.html.wrapper),m=p(r.hint),g=p(r.menu),y=r.hint!==!1&&!m,_=r.menu!==!1&&!g,y&&(m=a(n,d)),_&&(g=t(d.html.menu).css(d.css.menu)),m&&m.val(""),n=o(n,d),(y||_)&&(f.css(d.css.wrapper),n.css(y?d.css.input:d.css.inputWithNoHint),n.wrap(f).parent().prepend(y?m:null).append(_?g:null)),M=_?c:l,b=new i({el:n}),x=new s({hint:m,input:n},d),w=new M({node:g,datasets:u},d),k=new h({input:x,menu:w,eventBus:b,minLength:r.minLength},d),n.data(v.www,d),n.data(v.typeahead,k)}var d;return u=e.isArray(u)?u:[].slice.call(arguments,1),r=r||{},d=n(r.classNames),this.each(f)},isEnabled:function(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return r(this,function(t){t.enable()}),this},disable:function(){return r(this,function(t){t.disable()}),this},isActive:function(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function(){return r(this,function(t){t.activate()}),this},deactivate:function(){return r(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function(){return r(this,function(t){t.open()}),this},close:function(){return r(this,function(t){t.close()}),this},select:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.select(i)}),n},autocomplete:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.autocomplete(i)}),n},moveCursor:function(t){var e=!1;return r(this.first(),function(n){e=n.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return r(this,function(t,e){f(e),t.destroy()}),this}},t.fn.typeahead=function(t){return m[t]?m[t].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=d,this}}()})}).call(e,n(41).setImmediate)},function(t,e,n){(function(t,i){function r(t,e){this._id=t,this._clearFn=e}var a=n(42).nextTick,o=Function.prototype.apply,s=Array.prototype.slice,u={},l=0;e.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=l++,i=arguments.length<2?!1:s.call(arguments,1);return u[n]=!0,a(function(){u[n]&&(i?t.apply(null,i):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof i?i:function(t){delete u[t]}}).call(e,n(41).setImmediate,n(41).clearImmediate)},function(t,e){function n(){l=!1,o.length?u=o.concat(u):c=-1,u.length&&i()}function i(){if(!l){var t=setTimeout(n);l=!0;for(var e=u.length;e;){for(o=u,u=[];++c<e;)o&&o[c].run();c=-1,e=u.length}o=null,l=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function a(){}var o,s=t.exports={},u=[],l=!1,c=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new r(t,e)),1!==u.length||l||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){function i(t,e){var i=n(38);return new i(t,e)}t.exports=i},function(t,e,n){(function(e){function i(t,n){this.container=n,this.$select=e(n),this.firstStep=t.firstStep,this.secondStep=t.secondStep,this.$loader=e('<div class="loader"></div>'),this.init()}var r=n(45);i.prototype.init=function(){this.handlerOnChangeSelect(),this.handlerOnClickSelect()},i.prototype.unlock=function(){this.loading(!0),this.loadMatchedCategories(),this.$select.toggleClass("disabled",!1)},i.prototype.lock=function(){this.$select.html("<option>"+this.$select.data("default-item")+"</option>"),this.$select.toggleClass("disabled",!0)},i.prototype.loading=function(t){var e=t?"none":"block";this.$select.css({display:e}),t?this.$select.parent().append(this.$loader):this.$loader.remove()},i.prototype.switchGraphs=function(){var t=e('<div class="loader"></div>'),n=e("#total-compare-first-pie"),i=e("#total-compare-second-pie"),r=e("#total-compare-column");e(".government-categories .category").removeClass("selected"),e(".government-categories .caption").addClass("selected"),r.show(),n.hide(),i.hide(),r.find("p").append(t)},i.prototype.loadMatchedCategories=function(){var t=this,n={captions:[{id:t.firstStep.data.id,year:t.firstStep.data.year,altType:t.firstStep.data.altType},{id:t.secondStep.data.id,year:t.secondStep.data.year,altType:t.secondStep.data.altType}]},i=JSON.stringify(n);e.ajax({url:window.gw.urls.captions,type:"POST",contentType:"application/json",data:i,success:function(e){var n;return t.loading(!1),e&&0!==e.length?(t.$select.toggleClass("disabled",!1),n=[],e.forEach(function(t){r.find(n,function(e){return e.normal===t.tab})||n.push({translated:t.translatedTab,normal:t.tab})}),n.forEach(function(e){t.$select.append('<optgroup data-name="'+e.normal+'" label="'+e.translated+'"></optgroup>')}),e.forEach(function(e){var n=e.fieldName||e.name,i=t.$select.find('[label="'+e.translatedTab+'"]');i.append('<option value="'+n+'">'+e.translatedName+"</option>")}),!0):(alert("Not can find categories for current comparison"),t.lock(),!0)},error:function(){t.loading(!1),alert("Something wrong, please try another government"),t.$select.toggleClass("disabled",!0)}})},i.prototype.drawDiagramm=function(t,e,n){var i,r,a,o,s;o=new google.visualization.DataTable,o.addColumn("string","Caption"),o.addColumn("number","Total Funds"),a=[],a.push(["Total "+n,parseInt(t.total,10)]),s=t.data,s.forEach(function(t){a.push([t.caption,parseInt(t.amount,10)])}),o.addRows(a),r={title:"Compare",titleTextStyle:{fontSize:16},tooltip:{textStyle:{fontSize:12}},width:470,height:350,pieStartAngle:60,sliceVisibilityThreshold:0,forceIFrame:!0,chartArea:{width:"90%",height:"75%"}},i=new google.visualization.PieChart(document.getElementById(e)),i.draw(o,r)},i.prototype.handlerOnChangeSelect=function(){var t,n=this;e(n.container).on("change",function(i){var r=e(i.target),a=r.find("option:selected"),o=a.text(),s=a.parent("optgroup").data("name");return o?(n.switchGraphs(),t={firstGovernment:{id:n.firstStep.data.id,name:n.firstStep.data.name,year:n.firstStep.data.year},secondGovernment:{id:n.secondStep.data.id,name:n.secondStep.data.name,year:n.firstStep.data.year},caption:o,tab:s},"Financial Statement"!==s&&(t.fieldName=a.val()),t=JSON.stringify(t),console.log(t),e.ajax({url:window.gw.urls.compare,type:"POST",data:t,contentType:"application/json",success:function(t){n.drawColumnChart(t,"total-compare-column")}}),!0):(alert("Please select one of captions"),!0)})},i.prototype.handlerOnClickSelect=function(){var t=this;t.$select.on("mousedown",function(n){var i=e(n.target);return i.hasClass("disabled")?alert("Please, first select governments"):t.firstStep.completed&&t.secondStep.completed||alert("Please, first enter all fields"),!0})},i.prototype.drawColumnChart=function(t,e){var n,i,r,a,o=t.firstGovernment,s=t.secondGovernment;r=[["City","Amount"]],r.push([o.name,parseInt(o.data[0].amount,10)]),r.push([s.name,parseInt(s.data[0].amount,10)]),i={title:t.caption,titleTextStyle:{fontSize:16},tooltip:{textStyle:{fontSize:12}},width:500,height:350,pieStartAngle:60,sliceVisibilityThreshold:.05,forceIFrame:!0,chartArea:{width:"90%",height:"75%"}},a=google.visualization.arrayToDataTable(r),n=new google.visualization.ColumnChart(document.getElementById(e)),n.draw(a,i)},t.exports=i}).call(e,n(1))},function(t,e,n){var i;(function(t,r,a){!function(o,s){function u(t){return t&&"object"==typeof t&&t.__wrapped__?t:this instanceof u?void(this.__wrapped__=t):new u(t)}function l(t,e,n){e||(e=0);var i=t.length,r=i-e>=(n||de);if(r)for(var a={},o=e-1;++o<i;){var s=t[o]+"";(Pe.call(a,s)?a[s]:a[s]=[]).push(t[o])}return function(n){if(r){var i=n+"";return Pe.call(a,i)&&yt(a[i],n)>-1}return yt(t,n,e)>-1}}function c(t){return t.charCodeAt(0)}function h(t,e){var n=t.index,i=e.index;if(t=t.criteria,e=e.criteria,t!==e){if(t>e||"undefined"==typeof t)return 1;if(e>t||"undefined"==typeof e)return-1}return i>n?-1:1}function f(t,e,n,i){function r(){var u=arguments,l=o?this:e;if(a||(t=e[s]),n.length&&(u=u.length?(u=_(u),i?u.concat(n):n.concat(u)):n),this instanceof r){y.prototype=t.prototype,l=new y,y.prototype=null;var c=t.apply(l,u);return I(c)?c:l}return t.apply(l,u)}var a=F(t),o=!n,s=e;return o&&(n=e),a||(e=t),r}function p(t,e,n){if(null==t)return Yt;var i=typeof t;if("function"!=i){if("object"!=i)return function(e){return e[t]};var r=kn(t);return function(e){for(var n=r.length,i=!1;n--&&(i=P(e[r[n]],t[r[n]],pe)););return i}}return"undefined"!=typeof e?1===n?function(n){return t.call(e,n)}:2===n?function(n,i){return t.call(e,n,i)}:4===n?function(n,i,r,a){return t.call(e,n,i,r,a)}:function(n,i,r){return t.call(e,n,i,r)}:t}function d(){for(var t,e={hasDontEnumBug:se,hasEnumPrototype:ue,isKeysFast:nn,nonEnumArgs:an,noCharByIndex:un,shadowed:Se,arrays:"isArray(iterable)",bottom:"",loop:"",top:"",useHas:!0},n=0;t=arguments[n];n++)for(var i in t)e[i]=t[i];var r=e.args;e.firstArg=/^[^,]+/.exec(r)[0];var a=Function("createCallback, hasOwnProperty, isArguments, isArray, isString, objectTypes, nativeKeys","return function("+r+") {\n"+vn(e)+"\n}");return a(p,Pe,x,wn,L,pn,je)}function v(t){return"\\"+dn[t]}function m(t){return Mn[t]}function g(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function y(){}function _(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var i=-1,r=n-e||0,a=Array(0>r?0:r);++i<r;)a[i]=t[e+i];return a}function b(t){return Cn[t]}function x(t){return Fe.call(t)==Ve}function w(t){var e=!1;if(!t||"object"!=typeof t||x(t))return e;var n=t.constructor;return!F(n)&&(!ln||!g(t))||n instanceof n?le?(bn(t,function(t,n,i){return e=!Pe.call(i,n),!1}),e===!1):(bn(t,function(t,n){e=n}),e===!1||Pe.call(t,e)):e}function k(t){var e=[];return xn(t,function(t,n){e.push(n)}),e}function M(t,e,n,i,r,a){var o=t;if("function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n){n="undefined"==typeof i?n:p(n,i,1),o=n(o);var u="undefined"!=typeof o;u||(o=t)}var l=I(o);if(l){var c=Fe.call(o);if(!hn[c]||ln&&g(o))return o;var h=wn(o)}if(!l||!e)return l&&!u?h?_(o):Tn({},o):o;var f=fn[c];switch(c){case Ye:case We:return u?o:new f(+o);case Ge:case Qe:return u?o:new f(o);case Je:return u?o:f(o.source,be.exec(o))}r||(r=[]),a||(a=[]);for(var d=r.length;d--;)if(r[d]==t)return a[d];return u||(o=h?f(o.length):{},h&&(Pe.call(t,"index")&&(o.index=t.index),Pe.call(t,"input")&&(o.input=t.input))),r.push(t),a.push(o),(h?tt:xn)(u?o:t,function(t,i){o[i]=M(t,e,n,s,r,a)}),o}function C(t,e,n){return M(t,!0,e,n)}function T(t){var e=[];return bn(t,function(t,n){F(t)&&e.push(n)}),e.sort()}function S(t,e){return t?Pe.call(t,e):!1}function D(t){for(var e=-1,n=kn(t),i=n.length,r={};++e<i;){var a=n[e];r[t[a]]=a}return r}function A(t){return t===!0||t===!1||Fe.call(t)==Ye}function E(t){return t instanceof Date||Fe.call(t)==We}function $(t){return t?1===t.nodeType:!1}function N(t){var e=!0;if(!t)return e;var n=Fe.call(t),i=t.length;return n==Be||n==Qe||n==Ve||sn&&x(t)||n==Xe&&"number"==typeof i&&F(t.splice)?!i:(xn(t,function(){return e=!1}),e)}function P(t,e,n,i,r,a){var o=n===pe;if(n&&!o){n="undefined"==typeof i?n:p(n,i,2);var s=n(t,e);if("undefined"!=typeof s)return!!s}if(t===e)return 0!==t||1/t==1/e;var u=typeof t,l=typeof e;if(t===t&&(!t||"function"!=u&&"object"!=u)&&(!e||"function"!=l&&"object"!=l))return!1;if(null==t||null==e)return t===e;var c=Fe.call(t),h=Fe.call(e);if(c==Ve&&(c=Xe),h==Ve&&(h=Xe),c!=h)return!1;switch(c){case Ye:case We:return+t==+e;case Ge:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case Je:case Qe:return t==e+""}var f=c==Be;if(!f){if(t.__wrapped__||e.__wrapped__)return P(t.__wrapped__||t,e.__wrapped__||e,n,i,r,a);if(c!=Xe||ln&&(g(t)||g(e)))return!1;var d=!on&&x(t)?Object:t.constructor,v=!on&&x(e)?Object:e.constructor;if(d!=v&&!(F(d)&&d instanceof d&&F(v)&&v instanceof v))return!1}r||(r=[]),a||(a=[]);for(var m=r.length;m--;)if(r[m]==t)return a[m]==e;var y=0;if(s=!0,r.push(t),a.push(e),f){if(m=t.length,y=e.length,s=y==t.length,!s&&!o)return s;for(;y--;){var _=m,b=e[y];if(o)for(;_--&&!(s=P(t[_],b,n,i,r,a)););else if(!(s=P(t[y],b,n,i,r,a)))break}return s}return bn(e,function(e,o,u){return Pe.call(u,o)?(y++,s=Pe.call(t,o)&&P(t[o],e,n,i,r,a)):void 0}),s&&!o&&bn(t,function(t,e,n){return Pe.call(n,e)?s=--y>-1:void 0}),s}function O(t){return Re(t)&&!Ue(parseFloat(t))}function F(t){return"function"==typeof t}function I(t){return t?pn[typeof t]:!1}function z(t){return U(t)&&t!=+t}function R(t){return null===t}function U(t){return"number"==typeof t||Fe.call(t)==Ge}function j(t){return t instanceof RegExp||Fe.call(t)==Je}function L(t){return"string"==typeof t||Fe.call(t)==Qe}function q(t){return"undefined"==typeof t}function H(t,e,n){var i=arguments,r=0,a=2;if(!I(t))return t;if(n===pe)var o=i[3],s=i[4],u=i[5];else s=[],u=[],"number"!=typeof n&&(a=i.length),a>3&&"function"==typeof i[a-2]?o=p(i[--a-1],i[a--],2):a>2&&"function"==typeof i[a-1]&&(o=i[--a]);for(;++r<a;)(wn(i[r])?tt:xn)(i[r],function(e,n){var i,r,a=e,l=t[n];if(e&&((r=wn(e))||Dn(e))){for(var c=s.length;c--;)if(i=s[c]==e){l=u[c];break}i||(l=r?wn(l)?l:[]:Dn(l)?l:{},o&&(a=o(l,e),"undefined"!=typeof a&&(l=a)),s.push(e),u.push(l),o||(l=H(l,e,pe,o,s,u)))}else o&&(a=o(l,e),"undefined"==typeof a&&(a=e)),"undefined"!=typeof a&&(l=a);t[n]=l});return t}function V(t,e,n){var i="function"==typeof e,r={};if(i)e=p(e,n);else var a=Ee.apply(ce,arguments);return bn(t,function(t,n,o){(i?!e(t,n,o):yt(a,n,1)<0)&&(r[n]=t)}),r}function B(t){for(var e=-1,n=kn(t),i=n.length,r=Array(i);++e<i;){var a=n[e];r[e]=[a,t[a]]}return r}function Y(t,e,n){var i={};if("function"!=typeof e)for(var r=0,a=Ee.apply(ce,arguments),o=I(t)?a.length:0;++r<o;){var s=a[r];s in t&&(i[s]=t[s])}else e=p(e,n),bn(t,function(t,n,r){e(t,n,r)&&(i[n]=t)});return i}function W(t){for(var e=-1,n=kn(t),i=n.length,r=Array(i);++e<i;)r[e]=t[n[e]];return r}function K(t){var e=-1,n=Ee.apply(ce,_(arguments,1)),i=n.length,r=Array(i);for(un&&L(t)&&(t=t.split(""));++e<i;)r[e]=t[n[e]];return r}function G(t,e,n){var i=-1,r=t?t.length:0,a=!1;return n=(0>n?Le(0,r+n):n)||0,"number"==typeof r?a=(L(t)?t.indexOf(e,n):yt(t,e,n))>-1:_n(t,function(t){return++i>=n?!(a=t===e):void 0}),a}function X(t,e,n){var i={};return e=p(e,n),tt(t,function(t,n,r){n=e(t,n,r)+"",Pe.call(i,n)?i[n]++:i[n]=1}),i}function J(t,e,n){var i=!0;if(e=p(e,n),wn(t))for(var r=-1,a=t.length;++r<a&&(i=!!e(t[r],r,t)););else _n(t,function(t,n,r){return i=!!e(t,n,r)});return i}function Q(t,e,n){var i=[];if(e=p(e,n),wn(t))for(var r=-1,a=t.length;++r<a;){var o=t[r];e(o,r,t)&&i.push(o)}else _n(t,function(t,n,r){e(t,n,r)&&i.push(t)});return i}function Z(t,e,n){var i;return e=p(e,n),tt(t,function(t,n,r){return e(t,n,r)?(i=t,!1):void 0}),i}function tt(t,e,n){if(e&&"undefined"==typeof n&&wn(t))for(var i=-1,r=t.length;++i<r&&e(t[i],i,t)!==!1;);else _n(t,e,n);return t}function et(t,e,n){var i={};return e=p(e,n),tt(t,function(t,n,r){n=e(t,n,r)+"",(Pe.call(i,n)?i[n]:i[n]=[]).push(t)}),i}function nt(t,e){var n=_(arguments,2),i=-1,r="function"==typeof e,a=t?t.length:0,o=Array("number"==typeof a?a:0);return tt(t,function(t){o[++i]=(r?e:t[e]).apply(t,n)}),o}function it(t,e,n){var i=-1,r=t?t.length:0,a=Array("number"==typeof r?r:0);if(e=p(e,n),wn(t))for(;++i<r;)a[i]=e(t[i],i,t);else _n(t,function(t,n,r){a[++i]=e(t,n,r)});return a}function rt(t,e,n){var i=-(1/0),r=i;if(!e&&wn(t))for(var a=-1,o=t.length;++a<o;){var s=t[a];s>r&&(r=s)}else e=!e&&L(t)?c:p(e,n),_n(t,function(t,n,a){var o=e(t,n,a);o>i&&(i=o,r=t)});return r}function at(t,e,n){var i=1/0,r=i;if(!e&&wn(t))for(var a=-1,o=t.length;++a<o;){var s=t[a];r>s&&(r=s)}else e=!e&&L(t)?c:p(e,n),_n(t,function(t,n,a){var o=e(t,n,a);i>o&&(i=o,r=t)});return r}function ot(t,e,n,i){var r=arguments.length<3;if(e=p(e,i,4),wn(t)){var a=-1,o=t.length;for(r&&(n=t[++a]);++a<o;)n=e(n,t[a],a,t)}else _n(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)});return n}function st(t,e,n,i){var r=t,a=t?t.length:0,o=arguments.length<3;if("number"!=typeof a){var s=kn(t);a=s.length}else un&&L(t)&&(r=t.split(""));return e=p(e,i,4),tt(t,function(t,i,u){i=s?s[--a]:--a,n=o?(o=!1,r[i]):e(n,r[i],i,u)}),n}function ut(t,e,n){return e=p(e,n),Q(t,function(t,n,i){return!e(t,n,i)})}function lt(t){var e=-1,n=t?t.length:0,i=Array("number"==typeof n?n:0);return tt(t,function(t){var n=$e(He()*(++e+1));i[e]=i[n],i[n]=t}),i}function ct(t){var e=t?t.length:0;return"number"==typeof e?e:kn(t).length}function ht(t,e,n){var i;if(e=p(e,n),wn(t))for(var r=-1,a=t.length;++r<a&&!(i=e(t[r],r,t)););else _n(t,function(t,n,r){return!(i=e(t,n,r))});return!!i}function ft(t,e,n){var i=-1,r=t?t.length:0,a=Array("number"==typeof r?r:0);for(e=p(e,n),tt(t,function(t,n,r){a[++i]={criteria:e(t,n,r),index:i,value:t}}),r=a.length,a.sort(h);r--;)a[r]=a[r].value;return a}function pt(t){return t&&"number"==typeof t.length?un&&L(t)?t.split(""):_(t):W(t)}function dt(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var r=t[e];r&&i.push(r)}return i}function vt(t){for(var e=-1,n=t?t.length:0,i=Ee.apply(ce,arguments),r=l(i,n),a=[];++e<n;){var o=t[e];r(o)||a.push(o)}return a}function mt(t,e,n){if(t){var i=0,r=t.length;if("number"!=typeof e&&null!=e){var a=-1;for(e=p(e,n);++a<r&&e(t[a],a,t);)i++}else if(i=e,null==i||n)return t[0];return _(t,0,qe(Le(0,i),r))}}function gt(t,e){for(var n=-1,i=t?t.length:0,r=[];++n<i;){var a=t[n];wn(a)?Oe.apply(r,e?a:gt(a)):r.push(a)}return r}function yt(t,e,n){var i=-1,r=t?t.length:0;if("number"==typeof n)i=(0>n?Le(0,r+n):n||0)-1;else if(n)return i=Tt(t,e),t[i]===e?i:-1;for(;++i<r;)if(t[i]===e)return i;return-1}function _t(t,e,n){if(!t)return[];var i=0,r=t.length;if("number"!=typeof e&&null!=e){var a=r;for(e=p(e,n);a--&&e(t[a],a,t);)i++}else i=null==e||n?1:e||i;return _(t,0,qe(Le(0,r-i),r))}function bt(t){var e=arguments,n=e.length,i={0:{}},r=-1,a=t?t.length:0,o=a>=100,s=[],u=s;t:for(;++r<a;){var c=t[r];if(o)var h=c+"",f=Pe.call(i[0],h)?!(u=i[0][h]):u=i[0][h]=[];if(f||yt(u,c)<0){o&&u.push(c);for(var p=n;--p;)if(!(i[p]||(i[p]=l(e[p],0,100)))(c))continue t;s.push(c)}}return s}function xt(t,e,n){if(t){var i=0,r=t.length;if("number"!=typeof e&&null!=e){var a=r;for(e=p(e,n);a--&&e(t[a],a,t);)i++}else if(i=e,null==i||n)return t[r-1];return _(t,Le(0,r-i))}}function wt(t,e,n){var i=t?t.length:0;for("number"==typeof n&&(i=(0>n?Le(0,i+n):qe(n,i-1))+1);i--;)if(t[i]===e)return i;return-1}function kt(t,e){for(var n=-1,i=t?t.length:0,r={};++n<i;){var a=t[n];e?r[a]=e[n]:r[a[0]]=a[1]}return r}function Mt(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var i=-1,r=Le(0,Ae((e-t)/n)),a=Array(r);++i<r;)a[i]=t,t+=n;return a}function Ct(t,e,n){if("number"!=typeof e&&null!=e){var i=0,r=-1,a=t?t.length:0;for(e=p(e,n);++r<a&&e(t[r],r,t);)i++}else i=null==e||n?1:Le(0,e);return _(t,i)}function Tt(t,e,n,i){var r=0,a=t?t.length:r;for(n=n?p(n,i,1):Yt,e=n(e);a>r;){var o=r+a>>>1;n(t[o])<e?r=o+1:a=o}return r}function St(){return Dt(Ee.apply(ce,arguments))}function Dt(t,e,n,i){var r=-1,a=t?t.length:0,o=[],s=o;"function"==typeof e&&(i=n,n=e,e=!1);var u=!e&&a>=75;if(u)var l={};for(n&&(s=[],n=p(n,i));++r<a;){var c=t[r],h=n?n(c,r,t):c;if(u)var f=h+"",d=Pe.call(l,f)?!(s=l[f]):s=l[f]=[];(e?!r||s[s.length-1]!==h:d||yt(s,h)<0)&&((n||u)&&s.push(h),o.push(c))}return o}function At(t){for(var e=-1,n=t?t.length:0,i=l(arguments,1),r=[];++e<n;){var a=t[e];i(a)||r.push(a)}return r}function Et(t){for(var e=-1,n=t?rt(An(arguments,"length")):0,i=Array(n);++e<n;)i[e]=An(arguments,e);return i}function $t(t,e){return 1>t?e():function(){return--t<1?e.apply(this,arguments):void 0}}function Nt(t,e){return en||Ie&&arguments.length>2?Ie.call.apply(Ie,arguments):f(t,e,_(arguments,2))}function Pt(t){for(var e=Ee.apply(ce,arguments),n=e.length>1?0:(e=T(t),-1),i=e.length;++n<i;){var r=e[n];t[r]=Nt(t[r],t)}return t}function Ot(t,e){return f(t,e,_(arguments,2))}function Ft(){var t=arguments;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function It(t,e,n){function i(){s=null,n||(a=t.apply(o,r))}var r,a,o,s;return function(){var u=n&&!s;return r=arguments,o=this,clearTimeout(s),s=setTimeout(i,e),u&&(a=t.apply(o,r)),a}}function zt(t,e){var n=_(arguments,2);return setTimeout(function(){t.apply(s,n)},e)}function Rt(t){var e=_(arguments,1);return setTimeout(function(){t.apply(s,e)},1)}function Ut(t,e){var n={};return function(){var i=(e?e.apply(this,arguments):arguments[0])+"";return Pe.call(n,i)?n[i]:n[i]=t.apply(this,arguments)}}function jt(t){var e,n;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Lt(t){return f(t,_(arguments,1))}function qt(t){return f(t,_(arguments,1),null,pe)}function Ht(t,e){function n(){s=new Date,o=null,r=t.apply(a,i)}var i,r,a,o,s=0;return function(){var u=new Date,l=e-(u-s);return i=arguments,a=this,0>=l?(clearTimeout(o),o=null,s=u,r=t.apply(a,i)):o||(o=setTimeout(n,l)),r}}function Vt(t,e){return function(){var n=[t];return Oe.apply(n,arguments),e.apply(this,n)}}function Bt(t){return null==t?"":(t+"").replace(Ce,m)}function Yt(t){return t}function Wt(t){tt(T(t),function(e){var n=u[e]=t[e];u.prototype[e]=function(){var t=[this.__wrapped__];return Oe.apply(t,arguments),new u(n.apply(u,t))}})}function Kt(){return o._=ve,this}function Gt(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e&&(e=t,t=0),t+$e(He()*((+e||0)-t+1))}function Xt(t,e){var n=t?t[e]:s;return F(n)?t[e]():n}function Jt(t,e,n){var i=u.templateSettings;t||(t=""),n=Sn({},n,i);var r,a=Sn({},n.imports,i.imports),o=kn(a),l=W(a),c=0,h=n.interpolate||Me,f="__p += '",p=RegExp((n.escape||Me).source+"|"+h.source+"|"+(h===ke?we:Me).source+"|"+(n.evaluate||Me).source+"|$","g");t.replace(p,function(e,n,i,a,o,s){return i||(i=a),f+=t.slice(c,s).replace(Te,v),n&&(f+="' +\n__e("+n+") +\n'"),o&&(r=!0,f+="';\n"+o+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=s+e.length,e}),f+="';\n";var d=n.variable,m=d;m||(d="obj",f="with ("+d+") {\n"+f+"\n}\n"),f=(r?f.replace(ge,""):f).replace(ye,"$1").replace(_e,"$1;"),f="function("+d+") {\n"+(m?"":d+" || ("+d+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g="\n/*\n//@ sourceURL="+(n.sourceURL||"/lodash/template/source["+De++ +"]")+"\n*/";try{var y=Function(o,"return "+f+g).apply(s,l)}catch(_){throw _.source=f,_}return e?y(e):(y.source=f,y)}function Qt(t,e,n){t=+t||0;for(var i=-1,r=Array(t);++i<t;)r[i]=e.call(n,i);return r}function Zt(t){return null==t?"":(t+"").replace(me,b)}function te(t){var e=++fe;return(null==t?"":t+"")+e}function ee(t,e){return e(t),t}function ne(){return this.__wrapped__+""}function ie(){return this.__wrapped__}var re="object"==typeof e&&e,ae="object"==typeof t&&t&&t.exports==re&&t,oe="object"==typeof r&&r;oe.global===oe&&(o=oe);var se,ue,le,ce=[],he={},fe=0,pe=he,de=30,ve=o._,me=/&(?:amp|lt|gt|quot|#39);/g,ge=/\b__p \+= '';/g,ye=/\b(__p \+=) '' \+/g,_e=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/\w*$/,xe=RegExp("^"+(he.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),we=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ke=/<%=([\s\S]+?)%>/g,Me=/($^)/,Ce=/[&<>"']/g,Te=/['\n\r\t\u2028\u2029\\]/g,Se=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],De=0,Ae=Math.ceil,Ee=ce.concat,$e=Math.floor,Ne=xe.test(Ne=Object.getPrototypeOf)&&Ne,Pe=he.hasOwnProperty,Oe=ce.push,Fe=he.toString,Ie=xe.test(Ie=_.bind)&&Ie,ze=xe.test(ze=Array.isArray)&&ze,Re=o.isFinite,Ue=o.isNaN,je=xe.test(je=Object.keys)&&je,Le=Math.max,qe=Math.min,He=Math.random,Ve="[object Arguments]",Be="[object Array]",Ye="[object Boolean]",We="[object Date]",Ke="[object Function]",Ge="[object Number]",Xe="[object Object]",Je="[object RegExp]",Qe="[object String]",Ze=!!o.attachEvent,tn=Ie&&!/\n|true/.test(Ie+Ze),en=Ie&&!tn,nn=je&&(Ze||tn),rn=(rn={0:1,length:1},ce.splice.call(rn,0,1),rn[0]),an=!0;!function(){function t(){this.x=1}var e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments)an=!n;se=!/valueOf/.test(e),ue=t.propertyIsEnumerable("prototype"),le="x"!=e[0]}(1);var on=arguments.constructor==Object,sn=!x(arguments),un="x"[0]+Object("x")[0]!="xx";try{var ln=Fe.call(document)==Xe&&!({toString:0}+"")}catch(cn){}var hn={};hn[Ke]=!1,hn[Ve]=hn[Be]=hn[Ye]=hn[We]=hn[Ge]=hn[Xe]=hn[Je]=hn[Qe]=!0;var fn={};fn[Be]=Array,fn[Ye]=Boolean,fn[We]=Date,fn[Xe]=Object,fn[Ge]=Number,fn[Je]=RegExp,fn[Qe]=String;var pn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},dn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};u.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ke,variable:"",imports:{_:u}};var vn=function(t){var e="var index, iterable = "+t.firstArg+", result = iterable;\nif (!iterable) return result;\n"+t.top+";\n";if(t.arrays?(e+="var length = iterable.length; index = -1;\nif ("+t.arrays+") {  ",t.noCharByIndex&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+"\n  }\n}\nelse {  "):t.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+"\n    }\n  } else {  "),t.hasEnumPrototype&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),t.isKeysFast&&t.useHas?(e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",t.hasEnumPrototype&&(e+="if (!(skipProto && index == 'prototype')) {\n  "),e+=t.loop+"",t.hasEnumPrototype&&(e+="}\n"),e+="  }  "):(e+="\n  for (index in iterable) {",
(t.hasEnumPrototype||t.useHas)&&(e+="\n    if (",t.hasEnumPrototype&&(e+="!(skipProto && index == 'prototype')"),t.hasEnumPrototype&&t.useHas&&(e+=" && "),t.useHas&&(e+="hasOwnProperty.call(iterable, index)"),e+=") {    "),e+=t.loop+";    ",(t.hasEnumPrototype||t.useHas)&&(e+="\n    }"),e+="\n  }  "),t.hasDontEnumBug){e+="\n\n  var ctor = iterable.constructor;\n    ";for(var n=0;7>n;n++)e+="\n  index = '"+t.shadowed[n]+"';\n  if (","constructor"==t.shadowed[n]&&(e+="!(ctor && ctor.prototype === iterable) && "),e+="hasOwnProperty.call(iterable, index)) {\n    "+t.loop+"\n  }    "}return(t.arrays||t.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"},mn={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},gn={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},yn={top:"if (!objectTypes[typeof iterable]) return result;\n"+gn.top,arrays:!1},_n=d(gn);sn&&(x=function(t){return t?Pe.call(t,"callee"):!1});var bn=d(gn,yn,{useHas:!1}),xn=d(gn,yn),wn=ze||function(t){return on&&t instanceof Array||Fe.call(t)==Be},kn=je?function(t){return I(t)?ue&&"function"==typeof t||an&&t.length&&x(t)?k(t):je(t):[]}:k,Mn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cn=D(Mn),Tn=d(mn,{top:mn.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Sn=d(mn);F(/x/)&&(F=function(t){return t instanceof Function||Fe.call(t)==Ke});var Dn=Ne?function(t){if(!t||"object"!=typeof t)return!1;var e=t.valueOf,n="function"==typeof e&&(n=Ne(e))&&Ne(n);return n?t==n||Ne(t)==n&&!x(t):w(t)}:w,An=it,En=Q;tn&&ae&&"function"==typeof a&&(Rt=Nt(a,o)),u.after=$t,u.assign=Tn,u.at=K,u.bind=Nt,u.bindAll=Pt,u.bindKey=Ot,u.compact=dt,u.compose=Ft,u.countBy=X,u.debounce=It,u.defaults=Sn,u.defer=Rt,u.delay=zt,u.difference=vt,u.filter=Q,u.flatten=gt,u.forEach=tt,u.forIn=bn,u.forOwn=xn,u.functions=T,u.groupBy=et,u.initial=_t,u.intersection=bt,u.invert=D,u.invoke=nt,u.keys=kn,u.map=it,u.max=rt,u.memoize=Ut,u.merge=H,u.min=at,u.object=kt,u.omit=V,u.once=jt,u.pairs=B,u.partial=Lt,u.partialRight=qt,u.pick=Y,u.pluck=An,u.range=Mt,u.reject=ut,u.rest=Ct,u.shuffle=lt,u.sortBy=ft,u.tap=ee,u.throttle=Ht,u.times=Qt,u.toArray=pt,u.union=St,u.uniq=Dt,u.values=W,u.where=En,u.without=At,u.wrap=Vt,u.zip=Et,u.collect=it,u.drop=Ct,u.each=tt,u.extend=Tn,u.methods=T,u.select=Q,u.tail=Ct,u.unique=Dt,Wt(u),u.clone=M,u.cloneDeep=C,u.contains=G,u.escape=Bt,u.every=J,u.find=Z,u.has=S,u.identity=Yt,u.indexOf=yt,u.isArguments=x,u.isArray=wn,u.isBoolean=A,u.isDate=E,u.isElement=$,u.isEmpty=N,u.isEqual=P,u.isFinite=O,u.isFunction=F,u.isNaN=z,u.isNull=R,u.isNumber=U,u.isObject=I,u.isPlainObject=Dn,u.isRegExp=j,u.isString=L,u.isUndefined=q,u.lastIndexOf=wt,u.mixin=Wt,u.noConflict=Kt,u.random=Gt,u.reduce=ot,u.reduceRight=st,u.result=Xt,u.size=ct,u.some=ht,u.sortedIndex=Tt,u.template=Jt,u.unescape=Zt,u.uniqueId=te,u.all=J,u.any=ht,u.detect=Z,u.foldl=ot,u.foldr=st,u.include=G,u.inject=ot,xn(u,function(t,e){u.prototype[e]||(u.prototype[e]=function(){var e=[this.__wrapped__];return Oe.apply(e,arguments),t.apply(u,e)})}),u.first=mt,u.last=xt,u.take=mt,u.head=mt,xn(u,function(t,e){u.prototype[e]||(u.prototype[e]=function(e,n){var i=t(this.__wrapped__,e,n);return null==e||n&&"function"!=typeof e?i:new u(i)})}),u.VERSION="1.0.2",u.prototype.toString=ne,u.prototype.value=ie,u.prototype.valueOf=ie,_n(["join","pop","shift"],function(t){var e=ce[t];u.prototype[t]=function(){return e.apply(this.__wrapped__,arguments)}}),_n(["push","reverse","sort","unshift"],function(t){var e=ce[t];u.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),_n(["concat","slice","splice"],function(t){var e=ce[t];u.prototype[t]=function(){return new u(e.apply(this.__wrapped__,arguments))}}),rn&&_n(["pop","shift","splice"],function(t){var e=ce[t],n="splice"==t;u.prototype[t]=function(){var t=this.__wrapped__,i=e.apply(t,arguments);return 0===t.length&&delete t[0],n?new u(i):i}}),o._=u,i=function(){return u}.call(e,n,e,t),!(i!==s&&(t.exports=i))}(this)}).call(e,n(46)(t),function(){return this}(),n(41).setImmediate)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){(function(e){function i(t,n){this.container=n,this.$select=e(n),this.firstStep=t.firstStep,this.secondStep=t.secondStep,this.init()}var r=n(34).rowSortFunction;i.prototype.init=function(){this.handlerOnChangeSelect(),this.handlerOnClickSelect()},i.prototype.unlock=function(){this.$select.toggleClass("disabled",!1)},i.prototype.lock=function(){this.$select.toggleClass("disabled",!0)},i.prototype.drawDiagramm=function(t,e,n){var i,a,o,s,u;s=new google.visualization.DataTable,s.addColumn("string","Caption"),s.addColumn("number","Total Funds"),o=[],u=t.data,u.forEach(function(t){var e=_.assign({},t);e.amount<0&&(e.amount=-parseInt(e.amount,10)),o.push([e.translatedCaption,parseInt(e.amount,10)])}),o.sort(r),s.addRows(o),a={title:"Total "+n.translatedCategory+": "+t.name,titleTextStyle:{fontSize:16},tooltip:{textStyle:{fontSize:12}},width:470,height:350,sliceVisibilityThreshold:0,forceIFrame:!0,chartArea:{width:"90%",height:"75%"}},i=new google.visualization.PieChart(document.getElementById(e)),i.draw(s,a)},i.prototype.switchGraphs=function(){var t=e("#total-compare-first-pie"),n=e("#total-compare-second-pie"),i=e("#total-compare-column"),r=e('<div class="loader"></div>'),a=e('<div class="loader"></div>');e(".government-categories .category").addClass("selected"),e(".government-categories .caption").removeClass("selected"),i.hide(),t.show(),n.show(),t.find("p").append(r),n.find("p").append(a)},i.prototype.drawTable=function(t,n){var i,r,a,o,s,u,l;i=e(t),i.html(""),r=".compare-first-table"===t?"firstGovernment":"secondGovernment",a=n.translatedCategory,o=n[r].name,s=n[r].year,u='<thead><tr><th colspan="2" style="text-align: center">'+o+" ("+s+")</th></tr><tr><th>"+a+"</th><th> Total </th></tr>></thead>",l="<tbody>",n[r].data.forEach(function(t){l+="<tr><td>"+t.translatedCaption+"</td><td>"+numeral(t.amount).format("$0,0")+"</td></tr>"}),l+="</tbody>",i.append(u),i.append(l)},i.prototype.handlerOnChangeSelect=function(){var t=this;return e(t.container).on("change",function(n){var i=e(n.target),r=i.find("option:selected"),a=r.parent("optgroup").data("name"),o=r.val();return o?(t.loadComparedData(a,o),!0):(alert("Please select one of category"),!0)}),!0},i.prototype.loadComparedData=function(t,n,i){var r,a=this;return t&&n?(i&&a.$select.find('[value="'+n+'"]').attr("selected",!0),r={firstGovernment:{id:a.firstStep.data.id,name:a.firstStep.data.name,year:a.firstStep.data.year},secondGovernment:{id:a.secondStep.data.id,name:a.secondStep.data.name,year:a.secondStep.data.year},category:n,tab:t},r=JSON.stringify(r),e.ajax({url:window.gw.urls.compare,type:"POST",data:r,contentType:"application/json",success:function(t){a.switchGraphs(),a.drawTable(".compare-first-table",t),a.drawTable(".compare-second-table",t),a.drawDiagramm(t.firstGovernment,"total-compare-first-pie",t),a.drawDiagramm(t.secondGovernment,"total-compare-second-pie",t)},error:function(){return alert("Cant load data for this governments, please try later"),!0}}),!0):(alert("Something went wrong, please contact with us"),console.error("Please pass all required arguments into loadComparedData() function"),!1)},i.prototype.handlerOnClickSelect=function(){var t=this;t.$select.on("mousedown",function(n){var i=e(n.target);return i.hasClass("disabled")?alert("Please, first select governments"):t.firstStep.completed&&t.secondStep.completed||alert("Please, first enter all fields"),!0})},t.exports=i}).call(e,n(1))}]);